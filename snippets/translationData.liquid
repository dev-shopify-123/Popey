{% if split_character == blank %}{% assign split_character = '||' %}{% endif %}{%- if translationIndex == undefined -%}{%- assign translationIndex = 0 -%}{%- else -%}{%- assign translationIndex = translationIndex | plus: 1 -%}{%- endif -%}{%- capture lang_list -%}{%- for locale in shop.published_locales -%}{%- if locale.primary -%}{{- locale.iso_code -}}{%- endif -%}{%- endfor -%}{%- for locale in shop.published_locales -%}{%- if locale.primary -%}{%- continue -%}{%- endif -%},{{- locale.iso_code -}}{%- endfor -%}{%- endcapture -%}{%- assign langArray = lang_list | remove: " " | split: "," -%}{%- assign translations = translationData | replace: "'", "&#39;" | split: split_character -%}{%- assign lastTranslation = 0 -%}{%- for data in translations -%}{%- if langArray[forloop.index0] != undefined -%}{%- assign lastTranslation = forloop.index -%}{%- endif -%}{%- endfor -%}{%- if translationData != "" -%}{ {%- assign key = translations | first | md5 | append: translationIndex -%}{%- assign key = key | remove: ":" -%}{%- if newKey != undefined and newKey != blank -%}{%- assign key = newKey -%}{%- endif -%}{%- assign key = key | replace: ".", "" | truncate: 80 -%}{%- capture key -%}{{- key -}}-{{- "now" | date: "%a%b%d%y%N" -}}{%- endcapture -%}{%- if truncatewords != undefined and truncatewords != blank -%}{%- capture key -%}{{- key -}}-truncatewords-{{- truncatewords -}}{%- endcapture -%}{%- endif -%}{%- if truncate != undefined and truncate != blank -%}{%- capture key -%}{{- key -}}-truncate-{{- truncate -}}{%- endcapture -%}{%- endif -%}{%- if remove != undefined and remove != blank -%}{%- capture key -%}{{- key -}}-remove-{{- remove -}}{%- endcapture -%}{%- endif -%}{%- if link_to != undefined and link_to != blank -%}{%- capture key -%}{{- key -}}-link_to-{{- link_to -}}{% endcapture -%}{%- endif -%}{%- if link_to_remove_tag != undefined and link_to_remove_tag != blank -%}{%- capture key -%}{{- key -}}-link_to_remove_tag-{{- link_to_remove_tag | remove: split_character -}}{% endcapture -%}{%- endif -%}{%- if link_to_add_tag != undefined and link_to_add_tag != blank -%}{%- capture key -%}{{- key -}}-link_to_add_tag-{{- link_to_add_tag | remove: split_character -}}{% endcapture -%}{%- endif -%}{%- if link_to_tag != undefined and link_to_tag != blank -%}{%- capture key -%}{{- key -}}-link_to_tag-{{- link_to_tag | remove: split_character -}}{% endcapture -%}{%- endif -%}{%- if replace1 != undefined and replace1 != blank -%}{%- capture key -%}{{- key -}}-replace-{{- replace1 | remove: split_character -}}{% endcapture -%}{%- endif -%}{%- if escape != undefined and escape != blank -%}{%- capture key -%}{{- key -}}-escape-{{- escape -}}{% endcapture -%}{%- endif -%}{%- if newline_to_br != undefined and newline_to_br != blank -%}{%- capture key -%}{{- key -}}-newline_to_br-{{- escape -}}{% endcapture -%}{%- endif -%}{%- if strip != undefined and strip != blank -%}{%- capture key -%}{{- key -}}-strip-{{- strip -}}{% endcapture -%}{%- endif -%}{%- assign key = key | replace: ".", "" -%}"key": {{- key | json -}}} ~~ { {%- for data in translations -%} {%- assign translation = data -%}{%- if strip_html == true -%}{% assign translation = translation | strip_html %}{%- endif -%}{%- if truncatewords != undefined and truncatewords != blank -%}{% assign translation = translation | truncatewords: truncatewords %}{%- endif -%}{%- if truncate != undefined and truncate != blank -%}{% assign translation = translation | truncate: truncate %}{%- endif -%}{%- if remove != undefined and remove != blank -%}{% assign translation = translation | remove: remove %}{%- endif -%}{%- if link_to != undefined and link_to != blank -%}{% assign translation = translation | link_to: link_to %}{%- endif -%}{%- if link_to_remove_tag != undefined and link_to_remove_tag != blank -%}{% assign translation = translation | link_to_remove_tag: link_to_remove_tag | replace: split_character, "|" %}{%- endif -%}{%- if link_to_add_tag != undefined and link_to_add_tag != blank -%}{% assign translation = translation | link_to_add_tag: link_to_add_tag | replace: split_character, "|" %}{%- endif -%}{%- if link_to_tag != undefined and link_to_tag != blank -%}{% assign translation = translation | link_to_tag: link_to_tag %}{%- endif -%}{%- if replace1 != undefined and replace2 != undefined -%}{% assign translation = translation | replace: replace1, replace2 %}{%- endif -%}{%- if escape == true -%}{% assign translation = translation | escape %}{%- endif -%}{%- if newline_to_br == true -%}{% assign translation = translation | newline_to_br %}{%- endif -%}{%- if strip == true -%}{% assign translation = translation | strip %}{%- endif -%}{%- if customer_logout_link == true -%}{% assign translation = translation | customer_logout_link %}{%- endif -%}{%- if customer_login_link == true -%}{% assign translation = translation | customer_login_link %}{%- endif -%}{%- if customer_register_link == true -%}{% assign translation = translation | customer_register_link %}{%- endif -%}{%- if append != undefined and append != blank -%}{% capture translation %}{{translation}}{{append}}{% endcapture %}{%- endif -%}{%- if langArray[forloop.index0] != undefined -%} "{{- langArray[forloop.index0] -}}": {{- translation | json -}} {%- if forloop.index == lastTranslation -%}{%- else -%},{%- endif -%} {%- endif -%}{%- endfor -%}{%- if notHtml == true -%},"notHtml": "true"{%- endif -%}{%- if changeInner == true -%},"changeInner": "true"{%- endif -%}{%- if attr != undefined and attr != blank -%},"attr": "{{attr}}"{%- endif -%}}{%- endif -%}