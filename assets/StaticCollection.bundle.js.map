{"version":3,"sources":["webpack:///./source/scripts/sections/StaticCollection.js"],"names":["StaticCollection","section","$el","$","el","context","data","collectionUrl","$focusItem","defaultView","grid_list","filtersContentSelector","sortContent","$sortTrigger","find","$sortTriggerButton","$sortTriggerModal","$filtersTrigger","$filtersContent","$allTags","$advandedTags","$additionalTags","$viewToggle","$gridContainer","_changeSorting","bind","_changeSortingButton","_showSortModal","_showFiltersModal","_activateTag","_advancedTags","_toggleTags","_toggleView","_checkListView","events","on","productItems","_setSortByQueryParameters","_updatePrices","modal","Modal","forEach","off","unload","productItem","view","$productItems","each","i","push","ProductGridItem","id","lazy","index","CurrencyConverter","update","event","preventDefault","currentTarget","open","target","closest","toggleClass","$target","parent","targetGroup","attr","filterGroups","filterHandles","filterGroup","getAttribute","hasClass","siblings","removeClass","addClass","selectedItems","querySelectorAll","length","indexOf","location","href","join","$trigger","$items","siblingsVisible","text","see_less","see_more","isOpen","position","Shopify","queryParams","search","aCouples","substr","split","aKeyValue","decodeURIComponent","activeClass","sort_by","val","jQuery","param","replace","url","replaceIndex","firstHalf","secondHalf","concat","className","_initProductItems"],"mappings":"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","file":"StaticCollection.bundle.js","sourcesContent":["import $ from 'jquery';\nimport CurrencyConverter from 'shopify-currency-converter';\n\nimport ProductGridItem from '../components/ProductGridItem';\nimport Modal from '../components/Modal';\n\nexport default class StaticCollection {\n  constructor(section) {\n    this.section = section;\n    this.$el = $(section.el);\n    this.context = section.data.context;\n    this.collectionUrl = this.context.collectionUrl;\n    this.$focusItem = null;\n    this.defaultView = this.context.grid_list;\n\n    this.filtersContentSelector = '[data-productgrid-filters-content]';\n    this.sortContent = '[data-productgrid-sort-content]';\n    this.$sortTrigger = this.$el.find('[data-productgrid-trigger-sort]');\n    this.$sortTriggerButton = this.$el.find('[data-productgrid-trigger-sort-button]');\n    this.$sortTriggerModal = this.$el.find('[data-productgrid-modal-sort]');\n    this.$filtersTrigger = this.$el.find('[data-productgrid-trigger-filters]');\n    this.$filtersContent = this.$el.find(this.filtersContentSelector);\n    this.$allTags = this.$filtersContent.find('.filter-item a:not([data-filter-toggle])');\n    this.$advandedTags = this.$el.find('[data-tag-advanced] a');\n    this.$additionalTags = this.$el.find('[data-filter-toggle]');\n    this.$viewToggle = this.$el.find('[data-collection-view]');\n    this.$gridContainer = this.$el.find('.productgrid--outer');\n\n    this._changeSorting = this._changeSorting.bind(this);\n    this._changeSortingButton = this._changeSortingButton.bind(this);\n    this._showSortModal = this._showSortModal.bind(this);\n    this._showFiltersModal = this._showFiltersModal.bind(this);\n    this._activateTag = this._activateTag.bind(this);\n    this._advancedTags = this._advancedTags.bind(this);\n    this._toggleTags = this._toggleTags.bind(this);\n\n    this._toggleView = this._toggleView.bind(this);\n    this._checkListView = this._checkListView.bind(this);\n\n    this.events = [\n      this.$sortTrigger.on('change.collection', this._changeSorting),\n      this.$sortTriggerButton.on('click.collection', this._changeSortingButton),\n      this.$sortTriggerModal.on('click.collection', this._showSortModal),\n      this.$filtersTrigger.on('click.collection', this._showFiltersModal),\n      this.$advandedTags.on('click.collection', this._advancedTags),\n      this.$allTags.on('click.collection', this._activateTag),\n      this.$additionalTags.on('click.collection', this._toggleTags),\n      this.$viewToggle.on('click.collection', this._toggleView),\n    ];\n\n    // Product items\n    this.productItems = [];\n\n    this._setSortByQueryParameters();\n    this._checkListView();\n    this._updatePrices();\n    this.modal = new Modal();\n  }\n\n  onSectionUnload() {\n    this.events.forEach($el => $el.off('.collection'));\n    this.modal.unload();\n\n    this.productItems.forEach(productItem => {\n      productItem.unload();\n    });\n  }\n\n  _initProductItems(view = 'grid-view') {\n    const $productItems = this.$el.find('[data-product-item]');\n\n    $productItems.each((i, productItem) => {\n      this.productItems.push(\n        new ProductGridItem({\n          el: productItem,\n          id: this.section.id,\n          lazy: true,\n          grid_list: view,\n        }),\n      );\n    });\n  }\n\n  /**\n   * Set product grid prices to match CurrencyConverter settings on page load, section re-load\n   *\n   * @private\n   */\n  _updatePrices() {\n    this.$el.find('.money:not([data-currency])').each((index, el) => CurrencyConverter.update(el));\n  }\n\n  /**\n   * Open Tags/Filters modal (on mobile)\n   *\n   * @param event\n   * @private\n   */\n  _showFiltersModal(event) {\n    event.preventDefault();\n\n    this.$focusItem = $(event.currentTarget);\n    this.modal.open(this.filtersContentSelector, 'productgrid-filters');\n  }\n\n  /**\n   * Open Sort by modal (on mobile)\n   *\n   * @param event\n   * @private\n   */\n  _showSortModal(event) {\n    event.preventDefault();\n\n    this.$focusItem = $(event.currentTarget);\n    this.modal.open(this.sortContent, 'productgrid-sort');\n  }\n\n  /**\n   * Style a tag as active after click, before page transition\n   *\n   * @param event\n   * @private\n   */\n  _activateTag(event) {\n    $(event.target)\n      .closest('.filter-item')\n      .toggleClass('filter-item--active')\n      .toggleClass('filter-item--inactive');\n  }\n\n  /**\n   * Used by advanced tags to concatenate tag searches\n   *\n   * @param event\n   * @private\n   */\n  _advancedTags(event) {\n    event.preventDefault();\n    const $target = $(event.currentTarget).parent();\n    const targetGroup = $target.attr('data-group');\n\n    const $filtersContent = $target.closest('nav');\n\n    const filterGroups = $filtersContent.find('[data-filter-group]');\n    const filterHandles = [];\n\n    // Build the filter for the url based on what is in the dom\n    filterGroups.each((index, filterGroup) => {\n      if (filterGroup.getAttribute('data-filter-group') === targetGroup) {\n        if (!$target.hasClass('filter-item--active')) {\n          $target.siblings().removeClass('filter-item--active').addClass('filter-item--inactive');\n          filterHandles.push($target.data('handle'));\n        }\n        // The active class is removed from the target in _activateTag\n      } else {\n        const selectedItems = filterGroup.querySelectorAll('.filter-item--active');\n        if (selectedItems.length) {\n          filterHandles.push($(selectedItems).data('handle'));\n        }\n      }\n    });\n\n    if (this.collectionUrl.indexOf('vendors') > -1) {\n      location.href = `${this.collectionUrl}&constraint=${filterHandles.join('+')}`;\n    } else {\n      location.href = `${this.collectionUrl}/${filterHandles.join('+')}`;\n    }\n  }\n\n  /**\n   * Expand / Collapse additional tags in the sidebar\n   *\n   * @param event\n   * @private\n   */\n  _toggleTags(event) {\n    event.preventDefault();\n\n    const $trigger = $(event.currentTarget);\n    const $items = $trigger.parent().siblings('[data-hidden-default]');\n    const siblingsVisible = $trigger.data('filter-toggle');\n\n    $items.toggleClass('filter-item--hidden', siblingsVisible);\n    $trigger\n      .data('filter-toggle', !siblingsVisible)\n      .text(!siblingsVisible ? this.context.see_less : this.context.see_more);\n\n    if (this.modal.isOpen()) {\n      this.modal.position();\n    }\n  }\n\n  /**\n   * Make Shopify aware of releavent collection search info\n   *  - tag\n   *  - vendor\n   *  - pagination\n   *  - sorting criteria\n   *\n   * @private\n   */\n  _setSortByQueryParameters() {\n    Shopify.queryParams = {};\n    if (location.search.length) {\n      for (let i = 0, aCouples = location.search.substr(1).split('&'); i < aCouples.length; i++) {\n        const aKeyValue = aCouples[i].split('=');\n        // Reset the page number when we apply (i.e. don't add it to params)\n        if (aKeyValue.length > 1 && aKeyValue[0] !== 'page') {\n          Shopify.queryParams[decodeURIComponent(aKeyValue[0])] = decodeURIComponent(aKeyValue[1]);\n        }\n      }\n    }\n  }\n\n  /**\n   * Sort by opens a modal on mobile, this handles button events\n   *\n   * @param event\n   * @private\n   */\n  _changeSortingButton(event) {\n    const activeClass = 'utils-sortby--modal-button--active';\n\n    $(event.currentTarget)\n      .addClass(activeClass)\n      .parent()\n      .siblings()\n      .find(`.${activeClass}`)\n      .removeClass(activeClass);\n\n    this._changeSorting(event);\n  }\n\n  /**\n   * Change sorting of collection\n   *\n   * @param event\n   * @private\n   */\n  _changeSorting(event) {\n    event.preventDefault();\n    const $target = $(event.currentTarget);\n\n    Shopify.queryParams.sort_by = $target.val();\n    location.search = jQuery.param(Shopify.queryParams).replace(/\\+/g, '%20');\n  }\n\n  /**\n   * Toggle grid or list view\n   *\n   */\n  _toggleView(event) {\n    const $target = $(event.currentTarget);\n    Shopify.queryParams.grid_list = $target.data('collection-view');\n    location.search = jQuery.param(Shopify.queryParams).replace(/\\+/g, '%20');\n  }\n\n  /**\n   * Check grid/list view toggle query parameters\n   *\n   */\n  _checkListView() {\n    const view = Shopify.queryParams.grid_list ? Shopify.queryParams.grid_list : this.defaultView;\n    this.$el.find('[href*=\"&grid_list\"]')\n      .attr('href',\n        (i, url) => {\n          let href = url;\n          if (url.indexOf('?') < 0) {\n            const replaceIndex = url.indexOf('&');\n            const firstHalf = url.substr(0, replaceIndex);\n            const secondHalf = url.substr(replaceIndex + 1);\n\n            href = firstHalf.concat('?', secondHalf);\n          }\n          href = href.replace('grid_list', `grid_list=${view}`);\n          return href;\n        });\n\n    this.$el.find('.utils-viewtoggle-button').removeClass('active');\n    $(`[data-collection-view=${view}]`).addClass('active');\n    const className = view.replace('-', '');\n    this.$gridContainer.addClass(`productgrid-${className}`);\n\n    if (className === 'listview') {\n      this.$gridContainer.removeClass('productgrid-gridview');\n    } else {\n      this.$gridContainer.removeClass('productgrid-listview');\n    }\n\n    this._initProductItems(view);\n  }\n}\n"],"sourceRoot":""}