{"version":3,"sources":["webpack:///./source/scripts/sections/Product.js","webpack:///./source/scripts/sections/DynamicProduct.js"],"names":["Product","section","options","$el","$","el","context","data","settings","product","richText","readmoreText","reviewForm","isThreeColumn","layout","isThemeEditor","window","Shopify","designMode","useHistory","history","replaceState","gallery","find","$details","$description","$readmore","$formRegular","$formAlt","$formArea","layoutHandler","onBreakpointChange","bind","$productReviews","_moveForm","length","RichText","Forms","$script","productDetails","ProductDetails","sectionId","id","_updatePrices","each","index","CurrencyConverter","update","offBreakpointChange","unload","isGreaterThanBreakpoint","contains","$form","detach","append","DynamicProduct"],"mappings":"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","file":"DynamicProduct.bundle.js","sourcesContent":["import $ from 'jquery';\nimport $script from 'scriptjs';\nimport CurrencyConverter from 'shopify-currency-converter';\nimport layout from '../Layout';\nimport Forms from '../Forms';\n\nimport RichText from '../components/RichText';\nimport ProductDetails from '../components/ProductDetails';\n\nexport default class Product {\n  constructor(section, options = {}) {\n    this.section = section;\n    this.$el = $(this.section.el);\n    this.context = section.data.context;\n    this.settings = section.data.settings;\n    this.product = section.data.product;\n    this.richText = null;\n    this.readmoreText = null;\n    this.reviewForm = null;\n\n    if (this.settings) {\n      this.isThreeColumn = this.settings.layout === 'layout--three-col';\n    }\n\n    // History\n    this.isThemeEditor = window.Shopify && window.Shopify.designMode;\n    this.useHistory = 'useHistory' in options\n      ? options.useHistory\n      : !!(!this.isThemeEditor && history.replaceState);\n\n    const gallery = this.$el.find('[data-product-gallery]')[0];\n\n    // Product details\n    this.$details = this.$el.find('[data-product-details]');\n\n    // Product description\n    this.$description = this.$el.find('[data-product-description]');\n    this.$readmore = this.$el.find('[data-product-readmore]');\n\n    // Product form containers\n    this.$formRegular = this.$el.find('[data-product-form-regular]');\n    this.$formAlt = this.$el.find('[data-product-form-alt]');\n\n    // Product form area\n    this.$formArea = this.$el.find('[data-product-form-area]');\n\n    // Move product form and information on breakpoint change\n    this.layoutHandler = this.onBreakpointChange.bind(this);\n    layout.onBreakpointChange(this.layoutHandler);\n\n    // Product reviews\n    this.$productReviews = this.$el.find('[data-product-reviews]');\n\n    this._moveForm();\n\n    if (this.$description.length) {\n      this.richText = new RichText(this.$description);\n    }\n\n    if (this.$readmore.length) {\n      this.readmoreText = new RichText(this.$readmore);\n    }\n\n    if (this.$productReviews.length) {\n      this.reviewForm = new Forms(this.$productReviews, '.spr-form-input');\n    }\n\n    // Instantiate ProductDetails after Shopify API is loaded\n    $script($('[data-scripts]').data('shopify-api-url'), () => {\n      this.productDetails = new ProductDetails({\n        $formArea: this.$formArea,\n        $details: this.$details,\n        gallery,\n        context: this.context,\n        settings: this.settings,\n        product: this.product,\n        useHistory: this.useHistory,\n        sectionId: section.id,\n      });\n    });\n\n    this._updatePrices();\n  }\n\n  _updatePrices() {\n    this.$el.find('.money:not([data-currency]').each((index, el) => CurrencyConverter.update(el));\n  }\n\n  onSectionUnload() {\n    layout.offBreakpointChange(this.layoutHandler);\n\n    if (this.productDetails) {\n      this.productDetails.unload();\n    }\n\n    if (this.richText) {\n      this.richText.unload();\n    }\n\n    if (this.readmoreText) {\n      this.readmoreText.unload();\n    }\n\n    if (this.reviewForm) {\n      this.reviewForm.unload();\n    }\n  }\n\n  onBreakpointChange() {\n    this._moveForm();\n  }\n\n  /**\n   * Move product form if is a three column layout\n   * @private\n   */\n  _moveForm() {\n    if (!this.isThreeColumn) return;\n\n    if (layout.isGreaterThanBreakpoint('M')) {\n      if (!$.contains(this.$formAlt[0], this.$formArea[0])) {\n        const $form = this.$formArea.detach();\n        this.$formAlt.append($form);\n      }\n    } else if (!$.contains(this.$formRegular[0], this.$formArea[0])) {\n      const $form = this.$formArea.detach();\n      this.$formRegular.append($form);\n    }\n  }\n}\n","import Product from './Product';\n\nexport default class DynamicProduct extends Product {\n  constructor(section) {\n    super(section, { useHistory: false });\n  }\n}\n"],"sourceRoot":""}