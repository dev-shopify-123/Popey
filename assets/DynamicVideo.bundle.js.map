{"version":3,"sources":["webpack:///./source/scripts/components/Youtube.js","webpack:///./source/scripts/components/Vimeo.js","webpack:///./source/scripts/components/Video.js","webpack:///./source/scripts/sections/DynamicVideo.js"],"names":["api","apiLoadedCallbacks","apiLoaded","window","onYouTubeIframeAPIReady","forEach","apiLoadedCallback","Youtube","el","videoUrl","loop","regex","id","match","onApiLoaded","_onApiLoaded","bind","isReady","onReady","_onReady","onReadyCallback","onStateChange","_onStateChange","onPlayCallback","push","$script","Promise","resolve","player","playVideo","pauseVideo","mute","destroy","playerVars","modestbranding","showinfo","controls","rel","playlist","YT","Player","videoId","events","event","state","data","PlayerState","BUFFERING","VimeoPlayer","urlParts","split","length","onProgress","_onProgress","onProgressCallback","on","play","pause","setVolume","unload","catch","Vimeo","ready","then","off","Video","options","platform","getAttribute","trim","playButton","querySelector","videoEl","onPlayClick","_onPlayClick","onPauseClick","_onPauseClick","autoplay","_autoplay","video","videoData","childNodes","addEventListener","classList","add","setTimeout","remove","removeEventListener","DynamicVideo","section","init","hasPlayed","thresholds","playPauseObserver","IntersectionObserver","entries","intersectionRatio","isIntersecting","threshold","observe","disconnect"],"mappings":"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","file":"DynamicVideo.bundle.js","sourcesContent":["import $script from 'scriptjs';\n\nconst api = 'https://www.youtube.com/iframe_api';\nlet apiLoadedCallbacks = [];\nlet apiLoaded = false;\n\nwindow.onYouTubeIframeAPIReady = () => {\n  apiLoadedCallbacks.forEach(apiLoadedCallback => apiLoadedCallback());\n  apiLoadedCallbacks = [];\n  apiLoaded = true;\n};\n\nexport default class Youtube {\n  constructor({ el, videoUrl, loop }) {\n    const regex = /(?:youtube\\.com\\/(?:[^\\/]+\\/.+\\/|(?:v|e(?:mbed)?)\\/|.*[?&]v=)|youtu\\.be\\/)([^\"&?\\/ ]{11})/i; // eslint-disable-line no-useless-escape\n\n    this.el = el;\n    this.id = videoUrl.match(regex)[1] || null;\n\n    this.onApiLoaded = this._onApiLoaded.bind(this);\n\n    this.isReady = false;\n    this.onReady = this._onReady.bind(this);\n    this.onReadyCallback = null;\n    this.loop = loop ? 1 : 0;\n\n    this.onStateChange = this._onStateChange.bind(this);\n    this.onPlayCallback = null;\n\n    if (apiLoaded) {\n      this._onApiLoaded();\n    } else {\n      apiLoadedCallbacks.push(this.onApiLoaded);\n      $script(api);\n    }\n  }\n\n  play() {\n    return new Promise(resolve => {\n      this.onPlayCallback = resolve;\n\n      if (this.isReady) {\n        this.player.playVideo();\n      } else {\n        this.onReadyCallback = () => { this.player.playVideo(); };\n      }\n    });\n  }\n\n  pause() {\n    return new Promise(resolve => {\n      this.onPlayCallback = resolve;\n\n      if (this.isReady) {\n        this.player.pauseVideo();\n      } else {\n        this.onReadyCallback = () => { this.player.pauseVideo(); };\n      }\n    });\n  }\n\n  autoplay() {\n    return new Promise(resolve => {\n      this.onPlayCallback = resolve;\n\n      if (this.isReady) {\n        this.player.playVideo();\n        this.player.mute();\n      } else {\n        this.onReadyCallback = () => {\n          this.player.playVideo();\n          this.player.mute();\n        };\n      }\n    });\n  }\n\n  unload() {\n    this.player.destroy();\n  }\n\n  _onApiLoaded() {\n    const playerVars = {\n      modestbranding: true,\n      showinfo: false,\n      controls: false,\n      loop: this.loop,\n      rel: 0,\n    };\n\n    if (this.loop) {\n      // This is required to allow 'loop' to work based on the YouTube api\n      playerVars.playlist = this.id;\n    }\n\n    this.player = new YT.Player(this.el, {\n      videoId: this.id,\n      playerVars,\n      events: {\n        onReady: this.onReady,\n        onStateChange: this.onStateChange,\n      },\n    });\n  }\n\n  _onReady() {\n    this.isReady = true;\n\n    if (this.onReadyCallback) {\n      this.onReadyCallback();\n    }\n  }\n\n  _onStateChange(event) {\n    const state = event.data;\n    if (\n      this.onPlayCallback\n      && state === YT.PlayerState.BUFFERING\n    ) {\n      this.onPlayCallback();\n      this.onPlayCallback = null;\n    }\n  }\n}\n","import $script from 'scriptjs';\n\nconst api = 'https://player.vimeo.com/api/player.js';\nlet apiLoaded = false;\n\nexport default class VimeoPlayer {\n  constructor({ el, videoUrl }) {\n    this.el = el;\n    const urlParts = videoUrl.split('/');\n\n    this.id = urlParts[urlParts.length - 1];\n    this.onReadyCallback = null;\n\n    this.onApiLoaded = this._onApiLoaded.bind(this);\n\n    this.onProgress = this._onProgress.bind(this);\n    this.onProgressCallback = null;\n\n    if (apiLoaded) {\n      this._onApiLoaded();\n    } else {\n      $script(api, this.onApiLoaded);\n    }\n  }\n\n  play() {\n    return new Promise(resolve => {\n      this.onProgressCallback = resolve;\n\n      if (apiLoaded) {\n        this.player.on('play', this.onProgress);\n        this.player.play();\n      } else {\n        this.onReadyCallback = () => {\n          this.player.on('play', this.onProgress);\n          this.player.play();\n        };\n      }\n    });\n  }\n\n  pause() {\n    return new Promise(resolve => {\n      this.onProgressCallback = resolve;\n\n      if (apiLoaded) {\n        this.player.on('pause', this.onProgress);\n        this.player.pause();\n      } else {\n        this.onReadyCallback = () => {\n          this.player.on('pause', this.onProgress);\n          this.player.pause();\n        };\n      }\n    });\n  }\n\n  autoplay() {\n    return new Promise(resolve => {\n      this.onProgressCallback = resolve;\n\n      if (apiLoaded) {\n        this.player.on('play', this.onProgress);\n        this.player.setVolume(0);\n        this.player.play();\n      } else {\n        this.onReadyCallback = () => {\n          this.player.on('play', this.onProgress);\n          this.player.setVolume(0);\n          this.player.play();\n        };\n      }\n    });\n  }\n\n  unload() {\n    this.player\n      .unload()\n      .catch();\n  }\n\n  _onApiLoaded() {\n    this.player = new window.Vimeo.Player(this.el, { id: this.id });\n\n    this.player\n      .ready()\n      .then()\n      .catch();\n\n    apiLoaded = true;\n\n    if (this.onReadyCallback) {\n      this.onReadyCallback();\n    }\n  }\n\n  _onProgress() {\n    this.player.off('play', this.onProgress);\n    this.player.off('pause', this.onProgress);\n\n    if (this.onProgressCallback) {\n      this.onProgressCallback();\n      this.onProgressCallback = null;\n    }\n  }\n}\n","import Youtube from './Youtube';\nimport Vimeo from './Vimeo';\n\nexport default class Video {\n  constructor(el, options) {\n    this.el = el;\n    this.options = options;\n    this.platform = el.getAttribute('data-video').trim();\n    this.playButton = el.querySelector('[data-video-play-button]');\n    this.videoEl = el.querySelector('[data-video-element]');\n\n    this.onPlayClick = this._onPlayClick.bind(this);\n    this.onPauseClick = this._onPauseClick.bind(this);\n    this.autoplay = this._autoplay.bind(this);\n\n    this.video = null;\n\n    this.videoData = {\n      el: this.videoEl.childNodes[0],\n      videoUrl: this.videoEl.getAttribute('data-video-url'),\n      loop: this.options && this.options.loop,\n    };\n\n    switch (this.platform) {\n      case 'youtube':\n        this.video = new Youtube(this.videoData);\n        break;\n      case 'vimeo':\n        this.video = new Vimeo(this.videoData);\n        break;\n      default:\n        this.video = null;\n        break;\n    }\n\n    this.el.addEventListener('click', this.onPlayClick);\n\n    if (this.playButton) {\n      if (this.options && this.options.autoplay) {\n        this.autoplay();\n      }\n\n      this.playButton.addEventListener('click', this.onPlayClick);\n    }\n  }\n\n  _onPlayClick() {\n    this.el.classList.add('video-loading');\n\n    this.video.play()\n      .then(() => {\n        this.el.classList.add('video-transitioning');\n\n        setTimeout(() => {\n          this.el.classList.remove('video-loading');\n          this.el.classList.remove('video-transitioning');\n          this.el.classList.add('video-playing');\n        }, 200);\n      });\n  }\n\n  _onPauseClick() {\n    this.video.pause();\n  }\n\n  _autoplay() {\n    this.el.classList.add('video-loading');\n\n    this.video.autoplay()\n      .then(() => {\n        this.el.classList.add('video-transitioning');\n\n        setTimeout(() => {\n          this.el.classList.remove('video-loading');\n          this.el.classList.remove('video-transitioning');\n          this.el.classList.add('video-playing');\n        }, 200);\n      });\n  }\n\n  play() {\n    this._onPlayClick();\n  }\n\n  pause() {\n    this._onPauseClick();\n  }\n\n  unload() {\n    this.el.removeEventListener('click', this.onPlayClick);\n\n    if (this.playButton) {\n      this.playButton.removeEventListener('click', this.onPlayClick);\n    }\n\n    if (this.video) {\n      this.video.unload();\n    }\n  }\n\n  destroy() {\n    this.unload();\n  }\n}\n","import Video from '../components/Video';\n\nexport default class DynamicVideo {\n  constructor(section) {\n    this.el = section.el;\n    this.autoplay = section.data.autoplay;\n    this.init();\n  }\n\n  init() {\n    const videoEl = this.el.querySelector('[data-video]');\n    this.hasPlayed = false;\n\n    if (videoEl) {\n      this.video = new Video(videoEl);\n    }\n\n    if (this.video && this.autoplay) {\n      const thresholds = { play: 0.5, pause: 0.2 };\n\n      this.playPauseObserver = new IntersectionObserver(entries => {\n        const { intersectionRatio, isIntersecting } = entries[0];\n\n        if (intersectionRatio >= thresholds.play && isIntersecting && !this.hasPlayed) {\n          // videoEl has just scrolled into view and is at least 50% visible: play video\n          this.video._autoplay();\n          this.hasPlayed = true;\n        } else if (intersectionRatio <= thresholds.pause && isIntersecting === false) {\n          // videoEl has scrolled out of view and is less than 20% visible: pause video\n          this.video._onPauseClick();\n        }\n      },\n      {\n        threshold: [thresholds.pause, thresholds.play],\n      });\n\n      this.playPauseObserver.observe(videoEl);\n    }\n  }\n\n  onSectionUnload() {\n    if (this.video) {\n      this.video.unload();\n    }\n\n    if (this.playPauseObserver) {\n      this.playPauseObserver.disconnect();\n    }\n  }\n}\n"],"sourceRoot":""}