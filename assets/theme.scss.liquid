// {% assign font_settings = 'type_body:bolder|type_heading:bolder,lighter|type_button|type_menu|type_section:bold' %}
{% assign font_settings = font_settings | split: '|' %}
{% assign font_scss_variables = '' %}
{% for font_setting in font_settings %}
  {% assign font_info = font_setting | split: ':' %}

  {% comment %}Get setting name{% endcomment %}
  {% assign font_setting_name = font_info[0] %}

  {% comment %}Get additional weights{% endcomment %}
  {% assign font_additional_weights = font_info[1] | split: ',' | uniq %}

  {% comment %}Create variables for use in SCSS{% endcomment %}
  {% assign font_scss_base = font_setting_name | replace: '_', '-' | prepend: '$' %}
  {% assign font_scss_reference = font_scss_base %}
  {% assign font_scss_family = font_scss_base | append: '-family' %}
  {% assign font_scss_weights = font_scss_base | append: '-weights' %}
  {% assign font_scss_named_weights = font_scss_base | append: '-named-weights' %}
  {% assign font_scss_styles = font_scss_base | append: '-styles' %}
  {% assign font_scss_named_styles = font_scss_base | append: '-named-styles' %}


  {% comment %}Add the current setting to a list of reference variables{% endcomment %}
  {% assign font_scss_variables = font_scss_variables | append: '|' | append: font_scss_reference %}

  {% comment %}Get the initial FontDrop, and an italic style FontDrop{% endcomment %}
  {% assign font_initial = settings[font_setting_name] %}
  {% assign font_initial_weight = font_initial.weight | times: 1 %}
  {% assign font_italic = font_initial | font_modify: 'style', 'italic' %}
  {% assign font_styles = '(' | append: font_initial.style %}
  {% assign font_named_styles = '(initial' %}
  {% assign font_weights = font_initial_weight %}
  {% assign font_named_weights = 'initial' %}

  {{ font_initial | font_face }}
  {{ font_italic | font_face }}

  {% comment %}Use the font face italic style if possible, otherwise use something browser friendly{% endcomment %}
  {% assign font_initial_italic_style = font_italic.style | default: 'italic' %}
  {% assign font_styles = font_styles | append: ', ' | append: font_initial_italic_style %}
  {% assign font_named_styles = font_named_styles | append: ', italic' %}

  {% assign font_styles = font_styles | append: ')' %}
  {% assign font_named_styles = font_named_styles | append: ')' %}

  {% comment %}Iterate over each additional weight to load font face, and weights{% endcomment %}
  {% for font_adjustment in font_additional_weights %}
    {% assign font_weighted = font_initial | font_modify: 'weight', font_adjustment %}
    {% assign font_styled = font_weighted | font_modify: 'style', 'italic' %}
    {% assign font_weighted_styles = blank %}
    {% assign font_weighted_named_styles = blank %}

    {% comment %}If additional weight exists, generate font face{% endcomment %}
    {{ font_weighted | font_face }}

    {% comment %}Create a default value of the weight adjustment is not possible{% endcomment %}
    {% assign font_adjustment_default = '' %}
    {% case font_adjustment %}
      {% when 'lighter' %}
        {% comment %}Shopify requirement: If lighter variant is not found, use default value of 300{% endcomment %}
        {% assign font_adjustment_default = 300 %}
        {% if font_initial_weight < 300 %}
          {% assign font_adjustment_default = font_initial_weight %}
        {% endif %}
      {% when 'bolder' %}
        {% comment %}Shopify requirement: If bolder variant is not found, use default value of 700{% endcomment %}
        {% assign font_adjustment_default = 700 %}
        {% if font_initial_weight > 700 %}
          {% assign font_adjustment_default = font_initial_weight %}
        {% endif %}
      {% else %}
        {% assign font_adjustment_default = font_adjustment %}
    {% endcase %}
    {% assign font_weighted_value = font_weighted.weight | default: font_adjustment_default %}
    {% assign font_weighted_style = font_weighted.style | default: 'normal' %}

    {% assign font_weights = font_weights | append: '|' | append: font_weighted_value %}
    {% assign font_named_weights = font_named_weights | append: '|' | append: font_adjustment %}
    {% assign font_weighted_styles = font_weighted_styles | append: font_weighted_style %}
    {% assign font_weighted_named_styles = font_weighted_named_styles | append: 'initial' %}

    {% comment %}If italic exists for weight, generate font face{% endcomment %}
    {{ font_styled | font_face }}
    {% assign font_weighted_italic_style = font_styled.style | default: 'italic' %}
    {% assign font_weighted_styles = font_weighted_styles | append: '|' | append: font_weighted_italic_style %}
    {% assign font_weighted_named_styles = font_weighted_named_styles | append: '|italic' %}

    {% if font_weighted_styles != blank %}
      {% assign font_weighted_styles = font_weighted_styles | split: '|' | join: ', ' %}
      {% assign font_weighted_named_styles = font_weighted_named_styles | split: '|' | join: ', ' %}

      {% assign font_styles = font_styles | append: '|(' | append: font_weighted_styles | append: ')'%}
      {% assign font_named_styles = font_named_styles | append: '|(' | append: font_weighted_named_styles | append: ')'%}
    {% endif %}

    {% assign font_weighted = blank %}
    {% assign font_styled = blank %}
    {% assign font_weighted_styles = blank %}

    {% assign font_adjustment_default = blank %}
    {% assign font_weighted_value = blank %}
    {% assign font_weighted_style = blank %}
    {% assign font_weighted_italic_style = blank %}
  {% endfor %}

  {% comment %}If only one weight, add an empty list to styles{% endcomment %}
  {% comment %}`length()` reports length of nested list if list only has 1 index{% endcomment %}
  {% assign font_weights_size = font_weights | split: '|' %}
  {% if font_weights_size.size == 1 %}
    {% assign font_styles = font_styles | append: '|()' %}
    {% assign font_named_styles = font_named_styles | append: '|()' %}
  {% endif %}

  {{ font_scss_reference }}: {{ font_setting_name }};
  {{ font_scss_family }}: {{ font_initial.family }}, {{ font_initial.fallback_families }};
  {{ font_scss_styles }}: ({{ font_styles | split: '|' | join: ', ' }});
  {{ font_scss_named_styles }}: ({{ font_named_styles | split: '|' | join: ', ' }});
  {{ font_scss_weights }}: ({{ font_weights | split: '|' | join: ', ' }});
  {{ font_scss_named_weights }}: ({{ font_named_weights | split: '|' | join: ', ' }});

  {% comment %}Blank used variables to prevent bleeding{% endcomment %}
  {% assign font_info = blank %}
  {% assign font_setting_name = blank %}
  {% assign font_additional_weights = blank %}
  {% assign font_scss_base = blank %}
  {% assign font_scss_reference = blank %}
  {% assign font_scss_family = blank %}
  {% assign font_scss_styles = blank %}
  {% assign font_scss_named_styles = blank %}
  {% assign font_scss_weights = blank %}
  {% assign font_scss_named_weights = blank %}
  {% assign font_initial = blank %}
  {% assign font_italic = blank %}
  {% assign font_weights = blank %}
  {% assign font_named_weights = blank %}
  {% assign font_initial_italic_style = blank %}
  {% assign font_styles = blank %}
  {% assign font_named_styles = blank %}
{% endfor %}

{% assign font_scss_variables = font_scss_variables | remove_first: '|' | split: '|' %}

{% comment %}Build SCSS friendly lists of weights{% endcomment %}
{% assign font_variable_families = '' %}
{% assign font_variable_weights = '' %}
{% assign font_variable_named_weights = '' %}
{% assign font_variable_styles = '' %}
{% assign font_variable_named_styles = '' %}

{% for variable in font_scss_variables %}
  {% assign font_variable_families = font_variable_families | append: ' ' | append: variable | append: '-family' %}
  {% assign font_variable_weights = font_variable_weights | append: ' ' | append: variable | append: '-weights' %}
  {% assign font_variable_named_weights = font_variable_named_weights | append: ' ' | append: variable | append: '-named-weights' %}
  {% assign font_variable_styles = font_variable_styles | append: ' ' | append: variable | append: '-styles' %}
  {% assign font_variable_named_styles = font_variable_named_styles | append: ' ' | append: variable | append: '-named-styles' %}
{% endfor %}

/* cyrillic-ext */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 300;
  font-display: swap;
  src: local('Open Sans Light'), local('OpenSans-Light'), url({{ 'OpenSans-Light.ttf' | asset_url }}) format('ttf');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
/* cyrillic-ext */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Open Sans SemiBold'), local('OpenSans-SemiBold'), url({{ 'OpenSans-SemiBold.ttf' | asset_url  }}) format('ttf');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
/* cyrillic-ext */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Open Sans Bold'), local('OpenSans-Bold'), url({{ 'OpenSans-Bold.ttf' | asset_url }}) format('ttf');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
/* cyrillic-ext */
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 800;
  font-display: swap;
  src: local('Open Sans ExtraBold'), local('OpenSans-ExtraBold'), url({{ 'OpenSans-ExtraBold.ttf' | asset_url }}) format('ttf');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}

$font-variables: ({{ font_scss_variables | join: ' ' }});
$font-variables-families: ({{ font_variable_families | strip }});
$font-variables-weights: ({{ font_variable_weights | strip }});
$font-variables-named-weights: ({{ font_variable_named_weights | strip }});
$font-variables-styles: ({{ font_variable_styles | strip }});
$font-variables-named-styles: ({{ font_variable_named_styles | strip }});

// Find the index of the font setting for cross referencing
@function font-setting-index($font-type) {
  @return index($font-variables, $font-type);
}

// Font
// --------
// Find the index of a font weight from its relative name
// - [$font-type]: Variable of font to look up
// - [$font-weight]: lighter/initial/bolder
@function font-weight-index($font-type, $font-weight: initial) {
  $font-setting-index: font-setting-index($font-type);

  // Look up available weights based on index of font setting
  $named-weights: nth($font-variables-named-weights, $font-setting-index);

  // Try to find index of desired font weight by cross referencing
  $weight-index: index($named-weights, $font-weight);

  // Return index of named weight, or return initial weight
  @return if($weight-index, $weight-index, 1);
}

// Font
// --------
// Find the font family for a font setting
// - [$font-type]: Variable of font to look up
@function font-family($font-type) {
  @return nth($font-variables-families, font-setting-index($font-type));
}

// Font
// --------
// Find a font style relative to a font weight
// - [$font-type]: Variable of font to look up
// - [$font-style]: initial/italic
// - [$font-weight]: lighter/initial/bolder
@function font-style($font-type, $font-style: initial, $font-weight: initial) {
  $style: null;
  $styles: null;

  // Find index of font setting
  $font-setting-index: font-setting-index($font-type);

  // Get styles based on index of font setting
  $font-styles: nth($font-variables-styles, $font-setting-index);
  $font-named-styles: nth($font-variables-named-styles, $font-setting-index);

  // Try to find index of desired font weight by cross referencing
  $weight-named-index: font-weight-index($font-type, $font-weight);

  // Get styles available for $font-weight
  $named-weight-style: nth($font-styles, $weight-named-index);
  $named-weight-named-style: nth($font-named-styles, $weight-named-index);

  // Find position of $font-style
  $style-named-index: index($named-weight-named-style, $font-style);

  @if $style-named-index {
    @return nth($named-weight-style, $style-named-index);
  } @else {
    // Return initial font style
    @return nth($named-weight-style, 1);
  }
}

// Font weight
// --------
// Find a font sensitive relative weight
// - [$font-type]: Variable of font to look up
// - [$font-weight]: lighter/initial/bolder
@function font-weight($font-type, $font-weight: initial) {
  $weight: null;

  // Find index of font setting
  $font-setting-index: font-setting-index($font-type);

  // Look up available weights based on index of font setting
  $weights: nth($font-variables-weights, $font-setting-index);

  // Try to find index of desired font weight by cross referencing
  $weight-index: font-weight-index($font-type, $font-weight);

  // Return numerical weight of font
  @return nth($weights, $weight-index);
}

// Font
// --------
// Generate complete font styles for a font setting
// - [$font-type]: Variable of font to look up
// - [$font-family]: true/false
// - [$font-size]: unit/false
// - [$font-style]: initial/italic/false
// - [$font-weight]: lighter/initial/bolder/false
@mixin font(
  $font-type,
  $font-family: true,
  $font-size: false,
  $font-style: initial,
  $font-weight: initial
) {
  @if $font-family { font-family: font-family($font-type); }
  @if $font-size { font-size: $font-size; }
  @if $font-style { font-style: font-style($font-type, $font-style: $font-style, $font-weight: $font-weight ); }
  @if $font-weight { font-weight: font-weight($font-type, $font-weight: $font-weight); }
}

{% assign font_scss_variables = blank %}
{% assign font_variable_families = blank %}
{% assign font_variable_weights = blank %}
{% assign font_variable_named_weights = blank %}
{% assign font_variable_styles = blank %}
{% assign font_variable_named_styles = blank %}


// External libraries
/*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */

/**
 * 1. Change the default font family in all browsers (opinionated).
 * 2. Correct the line height in all browsers.
 * 3. Prevent adjustments of font size after orientation changes in
 *    IE on Windows Phone and in iOS.
 */

/* Document
   ========================================================================== */

html {
  font-family: sans-serif; /* 1 */
  line-height: 1.15; /* 2 */
  -ms-text-size-adjust: 100%; /* 3 */
  -webkit-text-size-adjust: 100%; /* 3 */
}

/* Sections
   ========================================================================== */

/**
 * Remove the margin in all browsers (opinionated).
 */

body {
  margin: 0;
}

/**
 * Add the correct display in IE 9-.
 */

:lang(fr) .money {
  display: flex; }
  :lang(fr) .money span:last-child {
    order: -1; }


:lang(en) .money {
  display: flex; }
article,
aside,
footer,
header,
nav,
section {
  display: block;
}

/**
 * Correct the font size and margin on `h1` elements within `section` and
 * `article` contexts in Chrome, Firefox, and Safari.
 */

h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

/* Grouping content
   ========================================================================== */

/**
 * Add the correct display in IE 9-.
 * 1. Add the correct display in IE.
 */
.ly-languages-switcher .current_lang {
 	display:none; 
}
figcaption,
figure,
main { /* 1 */
  display: block;
}

/**
 * Add the correct margin in IE 8.
 */

figure {
  margin: 1em 40px;
}

/**
 * 1. Add the correct box sizing in Firefox.
 * 2. Show the overflow in Edge and IE.
 */

hr {
  box-sizing: content-box; /* 1 */
  height: 0; /* 1 */
  overflow: visible; /* 2 */
}

/**
 * 1. Correct the inheritance and scaling of font size in all browsers.
 * 2. Correct the odd `em` font sizing in all browsers.
 */

pre {
  font-family: monospace, monospace; /* 1 */
  font-size: 1em; /* 2 */
}

/* Text-level semantics
   ========================================================================== */

/**
 * 1. Remove the gray background on active links in IE 10.
 * 2. Remove gaps in links underline in iOS 8+ and Safari 8+.
 */

a {
  background-color: transparent; /* 1 */
  -webkit-text-decoration-skip: objects; /* 2 */
}

/**
 * Remove the outline on focused links when they are also active or hovered
 * in all browsers (opinionated).
 */

a:active,
a:hover {
  outline-width: 0;
}

/**
 * 1. Remove the bottom border in Firefox 39-.
 * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.
 */

abbr[title] {
  border-bottom: none; /* 1 */
  text-decoration: underline; /* 2 */
  -webkit-text-decoration: underline dotted;
          text-decoration: underline dotted; /* 2 */
}

/**
 * Prevent the duplicate application of `bolder` by the next rule in Safari 6.
 */

b,
strong {
  font-weight: inherit;
}

/**
 * Add the correct font weight in Chrome, Edge, and Safari.
 */

b,
strong {
  font-weight: bolder;
}

/**
 * 1. Correct the inheritance and scaling of font size in all browsers.
 * 2. Correct the odd `em` font sizing in all browsers.
 */

code,
kbd,
samp {
  font-family: monospace, monospace; /* 1 */
  font-size: 1em; /* 2 */
}

/**
 * Add the correct font style in Android 4.3-.
 */

dfn {
  font-style: italic;
}

/**
 * Add the correct background and color in IE 9-.
 */

mark {
  background-color: #ff0;
  color: #000;
}

/**
 * Add the correct font size in all browsers.
 */

small {
  font-size: 80%;
}

/**
 * Prevent `sub` and `sup` elements from affecting the line height in
 * all browsers.
 */

sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

sub {
  bottom: -0.25em;
}

sup {
  top: -0.5em;
}

/* Embedded content
   ========================================================================== */

/**
 * Add the correct display in IE 9-.
 */

audio,
video {
  display: inline-block;
}

/**
 * Add the correct display in iOS 4-7.
 */

audio:not([controls]) {
  display: none;
  height: 0;
}

/**
 * Remove the border on images inside links in IE 10-.
 */

img {
  border-style: none;
}

/**
 * Hide the overflow in IE.
 */

svg:not(:root) {
  overflow: hidden;
}

/* Forms
   ========================================================================== */

/**
 * 1. Change the font styles in all browsers (opinionated).
 * 2. Remove the margin in Firefox and Safari.
 */

button,
input,
optgroup,
select,
textarea {
  font-family: sans-serif; /* 1 */
  font-size: 100%; /* 1 */
  line-height: 1.15; /* 1 */
  margin: 0; /* 2 */
}

/**
 * Show the overflow in IE.
 * 1. Show the overflow in Edge.
 */

button,
input { /* 1 */
  overflow: visible;
}

/**
 * Remove the inheritance of text transform in Edge, Firefox, and IE.
 * 1. Remove the inheritance of text transform in Firefox.
 */

button,
select { /* 1 */
  text-transform: none;
}

/**
 * 1. Prevent a WebKit bug where (2) destroys native `audio` and `video`
 *    controls in Android 4.
 * 2. Correct the inability to style clickable types in iOS and Safari.
 */

button,
html [type="button"], /* 1 */
[type="reset"],
[type="submit"] {
  -webkit-appearance: button; /* 2 */
}

/**
 * Remove the inner border and padding in Firefox.
 */

button::-moz-focus-inner,
[type="button"]::-moz-focus-inner,
[type="reset"]::-moz-focus-inner,
[type="submit"]::-moz-focus-inner {
  border-style: none;
  padding: 0;
}

/**
 * Restore the focus styles unset by the previous rule.
 */

button:-moz-focusring,
[type="button"]:-moz-focusring,
[type="reset"]:-moz-focusring,
[type="submit"]:-moz-focusring {
  outline: 1px dotted ButtonText;
}

/**
 * Change the border, margin, and padding in all browsers (opinionated).
 */

fieldset {
  border: 1px solid #c0c0c0;
  margin: 0 2px;
  padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct the text wrapping in Edge and IE.
 * 2. Correct the color inheritance from `fieldset` elements in IE.
 * 3. Remove the padding so developers are not caught out when they zero out
 *    `fieldset` elements in all browsers.
 */

legend {
  box-sizing: border-box; /* 1 */
  color: inherit; /* 2 */
  display: table; /* 1 */
  max-width: 100%; /* 1 */
  padding: 0; /* 3 */
  white-space: normal; /* 1 */
}

/**
 * 1. Add the correct display in IE 9-.
 * 2. Add the correct vertical alignment in Chrome, Firefox, and Opera.
 */

progress {
  display: inline-block; /* 1 */
  vertical-align: baseline; /* 2 */
}

/**
 * Remove the default vertical scrollbar in IE.
 */

textarea {
  overflow: auto;
}

/**
 * 1. Add the correct box sizing in IE 10-.
 * 2. Remove the padding in IE 10-.
 */

[type="checkbox"],
[type="radio"] {
  box-sizing: border-box; /* 1 */
  padding: 0; /* 2 */
}

/**
 * Correct the cursor style of increment and decrement buttons in Chrome.
 */

[type="number"]::-webkit-inner-spin-button,
[type="number"]::-webkit-outer-spin-button {
  height: auto;
}

/**
 * 1. Correct the odd appearance in Chrome and Safari.
 * 2. Correct the outline style in Safari.
 */

[type="search"] {
  -webkit-appearance: textfield; /* 1 */
  outline-offset: -2px; /* 2 */
}

/**
 * Remove the inner padding and cancel buttons in Chrome and Safari on macOS.
 */

[type="search"]::-webkit-search-cancel-button,
[type="search"]::-webkit-search-decoration {
  -webkit-appearance: none;
}

/**
 * 1. Correct the inability to style clickable types in iOS and Safari.
 * 2. Change font properties to `inherit` in Safari.
 */

::-webkit-file-upload-button {
  -webkit-appearance: button; /* 1 */
  font: inherit; /* 2 */
}

/* Interactive
   ========================================================================== */

/*
 * Add the correct display in IE 9-.
 * 1. Add the correct display in Edge, IE, and Firefox.
 */

details, /* 1 */
menu {
  display: block;
}

/*
 * Add the correct display in all browsers.
 */

summary {
  display: list-item;
}

/* Scripting
   ========================================================================== */

/**
 * Add the correct display in IE 9-.
 */

canvas {
  display: inline-block;
}

/**
 * Add the correct display in IE.
 */

template {
  display: none;
}

/* Hidden
   ========================================================================== */

/**
 * Add the correct display in IE 10-.
 */

[hidden] {
  display: none;
}


// Setting abstracted libraries
@function strip-units($value) {
  @return ($value / ($value * 0 + 1));
}

@function rem($pxval, $rem-base: 16px) {
  @return (strip-units($pxval) / strip-units($rem-base)) * 1rem;
}

@function rem2px($remval, $px-base: 16px) {
  @return (strip-units($px-base) * strip-units($remval)) * 1px;
}

@function morph($color, $adjustment-value: 2) {
  $lightness: lightness($color);
  $light-color: false;

  @if $lightness > 35% { $light-color: true; }

  @if $light-color {
    $lightness: ($lightness / 20) * $adjustment-value;
    $color: darken($color, $lightness);
  } @else {
    @if $lightness < 2.5% {
      $lightness: 30%;
    } @else if $lightness < 7.5% {
      $lightness: 15%;
    }

    $lightness: ($lightness / 10) * $adjustment-value;
    $color: lighten($color, $lightness);
  }

  $saturation: saturation($color);
  $saturated-color: false;

  @if $saturation > 0% { $saturated-color: true; }

  $saturation: ($saturation / 20);

  @if $saturated-color {
    @if $light-color {
      $color: desaturate($color, $saturation);
    } @else {
      $color: saturate($color, $saturation);
    }
  }

  @return $color;
}

// Check to see if a color is black and transparent
@function color-transparent($color) {
  @if (alpha($color) == 0 and red($color) == 0 and green($color) == 0 and blue($color) == 0) {
    // Color is fully transparent, but black. Return opaque white for further adjustments
    @return rgba(255, 255, 255, 1);
  } @else {
    @return $color;
  }
}

// If background is dark return appropriate color for mixin
@function border-mix($local-background, $local-dark, $local-light) {
  @if(lightness($local-background) >= 50%) {
    @return $local-dark;
  } @else {
    @return $local-light;
  }
}

@function vw($pxval) {
  $vw-context: $max-width / 100;
  @return ($pxval/$vw-context) * 1vw;
}


// Internal libraries
// ! Colors

// Backgrounds
$color-background: color-transparent({{ settings.color_background }});

// Typography
$color-heading: {{ settings.color_headings }};
$color-text: {{ settings.color_text }};
$color-text-encoded: "{{ settings.color_text | color_to_hex | replace: '#', '' }}";
$color-text-hover: morph($color-text, 5);
$color-text-light: {{ settings.color_text_light }};
$color-link: {{ settings.color_links }};
$color-link-hover: morph($color-link, 3);

// Buttons
$color-button-text: {{ settings.color_button_text }};
$color-button-background: {{ settings.color_button_background }};
$color-button-background-hover: mix($color-background, $color-button-background, 10%);
$color-button-background-focus: morph($color-button-background);
$color-button-disable: desaturate($color-button-background, 100%);

$color-button-secondary-text: {{ settings.color_button_secondary_text }};
$color-button-secondary-background: {{ settings.color_button_secondary_background }};
$color-button-secondary-background-hover: mix($color-background, $color-button-secondary-background, 10%);;
$color-button-secondary-background-focus: morph($color-button-secondary-background);
$color-button-secondary-border: {{ settings.color_button_secondary_border }};
$color-button-secondary-border-hover: morph($color-button-secondary-border);

// Header
$color-header-text: {{ settings.color_header_text }};
$color-header-background: color-transparent({{ settings.color_header_background }});

// Forms
$color-input-text: {{ settings.color_input_text }};
$color-input-text-hover: morph($color-input-text);
$color-input-background: {{ settings.color_input_background }};
$color-input-border: {{ settings.color_input_border }};
$color-input-border-hover: morph($color-input-border, 2);

$color-product-sale-accent: {{ settings.color_product_sale_accent }};
$color-product-review-star: {{ settings.color_product_review_star }};

// Footer
$color-footer-text: {{ settings.color_footer_text }};
$color-footer-background: color-transparent({{ settings.color_footer_background }});
$color-footer-link: morph($color-footer-text);
$color-footer-color-alt: transparentize($color-footer-text, 0.2);
$color-additional-accent: transparentize($color-footer-text, 0.5);

// Placeholders
$color-placeholder-background: mix($color-text, $color-background, 8%);
$color-placeholder-fill: mix($color-text, $color-background, 35%);

// General
$color-black: #000;
$color-white: #fff;
$color-border: mix($color-background, border-mix($color-background, $color-black, $color-white));
$color-border-soft: transparentize(border-mix($color-background, $color-black, $color-white), 0.85);
$color-overlay-background: rgba({{ settings.color_overlay}}, {{ settings.overlay_opacity | divided_by: '100.00' }});
$color-background-light: mix($color-text, $color-background, 5%);
$color-search-category-background: mix($color-text, $color-background, 10%);

$color-box-shadow-border: transparentize($color-border, 0.84);
$color-box-shadow-shadow: transparentize($color-border, 0.89);
$color-box-shadow-border-focused: transparentize($color-border, 0.5);
$color-box-shadow-shadow-focused: transparentize($color-border, 0.5);

$color-error: #f05d5d;
$color-success: #51a551;
$color-warning: #dfa354;
$color-highlight: #fffbd9;
$color-notice: $color-text;
$color-sale: $color-product-sale-accent;
$color-star: $color-product-review-star;
$color-star-empty: mix($color-text, $color-background, 50%);

$color-facebook: #425dab;
$color-twitter: #1da1f2;
$color-pinterest: #bd1c1c;
$color-linkedin: #0077B5;

// ! Typography

// Fonts
$font-heading: $type-heading !default;
$font-body: $type-body !default;
$font-button: $type-button !default;
$font-menu: $type-menu !default;
$font-section: $type-section !default;

// Base Size
$font-size-base: {{ settings.type_size_base }};
$font-size-base-mobile: 15px;

// Headings size adjustment
$font-heading-sizing: {{ settings.type_heading_size }};

// Letter spacing
$font-heading-spacing: {{ settings.type_heading_spacing | divided_by: 100.0 | append: 'em' }};
$font-menu-spacing: {{ settings.type_menu_spacing | divided_by: 100.0 | append: 'em' }};
$font-button-spacing: {{ settings.type_button_spacing | divided_by: 100.0 | append: 'em' }};
$font-section-spacing: {{ settings.type_section_spacing | divided_by: 100.0 | append: 'em' }};

// Capitalization
$font-heading-capitalize: {{ settings.type_heading_capitalize }};
$font-menu-capitalize: {{ settings.type_menu_capitalize }};
$font-button-capitalize: {{ settings.type_button_capitalize }};
$font-section-capitalize: {{ settings.type_section_capitalize }};

// font sizes should be adjusted by this much if all caps.
$capitalize_adjustment: -1;

// Font sizes
$font-body-size: $font-size-base;
$font-body-size-small: rem($font-size-base - 1px); // 15px
$font-body-size-smaller: rem($font-size-base - 2px); // 14px
$font-body-size-smallest: rem($font-size-base - 3px); // 13px
$font-heading-large: rem($font-size-base * 2.125); // 34px
$font-heading-medium: rem($font-size-base * 1.875); // 32px
$font-h1-size: rem($font-size-base * 1.75); // 28px
$font-h2-size: rem($font-size-base * 1.625); // 26px
$font-h3-size: rem($font-size-base * 1.5); // 24px
$font-h4-size: rem($font-size-base * 1.25); // 20px
$font-h5-size: rem($font-size-base * 1.125); // 18px
$font-h6-size: rem($font-size-base); // 16px

// ! Spacing

// Vertical spaces
$space-xxx-small: rem($font-body-size * 0.25); // 4px
$space-xx-small: rem($font-body-size * 0.5); // 8px
$space-x-small: rem($font-body-size * 0.75); // 12px
$space-small: rem($font-body-size); // 16px
$space-medium: rem($font-body-size * 1.25); // 20px
$space-large: rem($font-body-size * 1.75); // 28px
$space-x-large: rem($font-body-size * 2); // 32px
$space-xx-large: rem($font-body-size * 3.125); // 50px
$space-xxx-large: rem($font-body-size * 4.25); // 68px

// Layout
$max-width: {{ settings.layout_max_width | append: 'px' }};
$gutter-outer-small: 10px;
$gutter-outer-medium: 15px;
$gutter-outer: 25px;
$gutter-content: 20px;

// ! Z-Indices

$index-header: 700;
$index-header-navmenu: $index-header + 2;
$index-banner: 600;
$index-main: 500;
$index-footer: 500;
$index-mobile-nav: $index-header + 100;
$index-modal: $index-mobile-nav + 100;

$index-header-search: 150;
$index-header-internal-icons: 125;
$index-header-internal-main: 100;
$index-header-internal-nav: 50;

// ! Breakpoints

$bp-xxxs: 375px;
$bp-xxs: 480px;
$bp-xs: 680px;
$bp-small: 720px;
$bp-medium: 860px;
$bp-large: 1250px;
$bp-xl: 1350px;
$bp-xxl: 1400px;
$bp-xxxl: 1500px;

// ! Components

// Button font sizes
$button-x-large-size: rem($font-size-base * 1.3125); // 21px
$button-large-size: rem($font-size-base * 1.125); // 18px
$button-medium-size: rem($font-size-base); // 16px
$button-small-size: rem($font-size-base * 0.875); // 14px

// Checkbox settings
$checkbox-size: (13px, 13px);
$checkbox-border: $color-input-border;
$checkbox-inactive: $color-input-background;
$checkbox-active: $color-link;

// Transitions
$ease-in--normal: cubic-bezier(0.4, 0, 1, 1);
$ease-in--strong: cubic-bezier(.7, .18, 1, 1);

$ease-out--normal: cubic-bezier(0, 0, 0.2, 1);
$ease-out--strong: cubic-bezier(0.1, 0.1, 0, 1);

$ease-in-out--normal: cubic-bezier(0.4, 0, 0.2, 1);
$ease-in-out--strong: cubic-bezier(0.6, 0.05, 0.01, 0.99);

$duration--zero: 0ms;

$duration--small-100: 75ms;
$duration--small-200: 100ms;
$duration--small-300: 125ms;
$duration--small-400: 150ms;
$duration--small-500: 175ms;
$duration--small-600: 200ms;

$duration--medium-100: 250ms;
$duration--medium-200: 300ms;
$duration--medium-300: 350ms;
$duration--medium-400: 400ms;
$duration--medium-500: 450ms;
$duration--medium-600: 500ms;

$duration--large-100: 600ms;
$duration--large-200: 750ms;
$duration--large-300: 900ms;
$duration--large-400: 1050ms;
$duration--large-500: 1200ms;
$duration--large-600: 1350ms;

// Logo widths
$header-logo-image-max-width: 100px;
$header-content-offset-right: 305px; // My account + Logout + Currency switcher

$site-nav-item-space: 8px;
$site-nav-link-space: 7px;
$site-nav-link-space-vertical: 12px;
$site-nav-link-space-horizontal: 15px;
$site-subnav-space: 15px;

 // Header Settings
$header-content-height: 46px;
$header-padding-vertical-mobile: 10px;
$header-padding-vertical: 20px;
$header-padding-vertical-sticky: 10px;
$header-line-height: $font-body-size + 2px;

// Product grid settings
$sidebar-width: 185px;

// Product page settings
$color-slider-accent: $color-link;
$color-slider-dot: mix($color-text, $color-background, 23%);
$quantity-width: rem(115px);

// Featured blog post
$color-featured-post-background: $color-link;
$color-featured-post-foreground: $color-background;

// Swatch settings
$swatches-size-product-page: {{ settings.swatches_product_page_size }}px;
$swatches-size-product-card: {{ settings.swatches_product_card_size }}px;
$swatches-size-sidebar-filter: 28px;
$swatches-shape: {{ settings.swatches_shape }};
$swatches-variant-image-border-radius: 0;
$swatches-variant-image-selected-border-radius: 1px;

@mixin media($max: false, $min: false) {
  @if $max {
    @if $min {
      @media screen and (max-width: $max - 1) and (min-width: $min) { @content; }
    } @else {
      @media screen and (max-width: $max - 1) { @content; }
    }
  } @else {
    @media screen and (min-width: $min) { @content; }
  }
}

// Reusable button style for changing button sizes at different break points
@mixin button-size($button-size) {
  $padding: false;

  @if $button-size == small {
    @include font-size-button-small($font-button-capitalize);
    $padding: (10px, 16px);
  } @else if $button-size == medium {
    @include font-size-button-medium;
    $padding: (12px, 18px);
  } @else if $button-size == large {
    @include font-size-button-large;
    $padding: (14px, 28px);
  } @else if $button-size == x-large {
    @include font-size-button-x-large;
    $padding: (14px, 28px);
  }

  @include capitalize($font-button-capitalize);
  padding: rem(nth($padding, 1)) rem(nth($padding, 2));
  letter-spacing: $font-button-spacing;
}

@mixin header-shadow {
  @if ($color-header-background == $color-background) {
    box-shadow: 0 1px 4px transparentize($color-border, 0.75);
  }
}

@mixin grid-gutter($size) {
  margin-right: -$size;
  margin-left: -$size;

  > * {
    margin-right: $size;
    margin-left: $size;
  }
}

@mixin mobile-scrolling() {
  overflow-x: scroll;
  white-space: nowrap;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;

  &::-webkit-scrollbar {
    display: none;
  }
}

// ! Font mixins

@mixin capitalize($capitalize) {
  @if $capitalize == true {
    text-transform: uppercase;
  }
}


@function capitalize_adjustment($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  @if $use_capitalize_adjustment {
    @return $adjustment_amount;
  } @else {
    @return 0;
  }
}

@mixin font-size-heading-large($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -3) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 2.125 * $font-heading-sizing + $adjustment); // 34px

  @include media($bp-small) {
    font-size: rem($font-size-base-mobile * 2.125 + $adjustment);
  }
}

@mixin font-size-heading-medium($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -3) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.875 * $font-heading-sizing + $adjustment); // 32px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.875 + $adjustment);
  }
}

@mixin font-size-heading-1($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -3) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.75 * $font-heading-sizing + $adjustment); // 28px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.75 + $adjustment);
  }
}

@mixin font-size-heading-2($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.625 * $font-heading-sizing + $adjustment); // 26px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.625 + $adjustment);
  }
}

@mixin font-size-heading-3($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount: -2);

  font-size: rem($font-size-base * 1.5 * $font-heading-sizing + $adjustment); // 24px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.5 + $adjustment);
  }
}

@mixin font-size-heading-4($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.25 * $font-heading-sizing + $adjustment); // 20px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.25 + $adjustment);
  }
}

@mixin font-size-heading-5($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);
	font-type: bold;
  font-size: rem($font-size-base * 1.125 + $adjustment); // 18px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.125 + $adjustment);
  }
}

@mixin font-size-heading-6($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.125 + $adjustment); // 16px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.125 + $adjustment);
  }
}

@mixin font-size-body-larger($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.375 + $adjustment); // 22px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.375 + $adjustment);
  }
}

@mixin font-size-body-large($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.25 + $adjustment); // 20px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.25 + $adjustment);
  }
}

@mixin font-size-body-medium($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.125 + $adjustment); // 18px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.125 + $adjustment);
  }
}

@mixin font-size-body($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base + $adjustment); // 16px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile + $adjustment);
  }
}

@mixin font-size-body-small($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 0.9375 + $adjustment); // 15px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 0.9375 + $adjustment);
  }
}

@mixin font-size-body-smaller($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 0.875 + $adjustment); // 14px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 0.875 + $adjustment);
  }
}

@mixin font-size-body-smallest($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 0.8125 + $adjustment); // 13px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 0.8125 + $adjustment);
  }
}

@mixin font-size-body-tiny($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 0.75 + $adjustment); // 12px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 0.75 + $adjustment);
  }
}

@mixin font-size-button-small($use_capitalize_adjustment: $font-button-capitalize, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 0.875 + $adjustment); // 14px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 0.875);
  }
}

@mixin font-size-button-medium($use_capitalize_adjustment: $font-button-capitalize, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base + $adjustment); // 16px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile + -1);
  }
}

@mixin font-size-button-large($use_capitalize_adjustment: $font-button-capitalize, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.125 + $adjustment); // 18px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.125 + -1);
  }
}

@mixin font-size-button-x-large($use_capitalize_adjustment: $font-button-capitalize, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.3125 + $adjustment); // 21px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.3125 + -1);
  }
}

@mixin font-size-menu-large($use_capitalize_adjustment: false, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.0625 + $adjustment); // 17px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.0625 + -1);
  }
}

@mixin font-size-menu($use_capitalize_adjustment: $font-menu-capitalize, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base + $adjustment); // 16px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile + $adjustment);
  }
}

@mixin font-size-input {
  font-size: rem($font-size-base); // 16px

  @include media($bp-medium) {
    font-size: rem(16px); // Force 16px regardless of base size
  }
}

// Typography

%heading {
  @include font($font-heading);
  @include capitalize($font-heading-capitalize);
  letter-spacing: $font-heading-spacing;

  b,
  strong {
    font-weight: font-weight($font-heading, $font-weight: bolder);
  }

  em {
    font-style: font-style($font-heading, $font-style: italic);
  }

  b em,
  strong em,
  em b,
  em strong {
    font-style: font-style($font-heading, $font-weight: bolder, $font-style: italic);
  }
}

%h1 {
  @extend %heading;
  @include font-size-heading-1($font-heading-capitalize, -3);
}

%h2 {
  @extend %heading;
  @include font-size-heading-2($font-heading-capitalize, -2);
}

%h3 {
  @extend %heading;
  @include font-size-heading-3($font-heading-capitalize, -2);
}

%h4 {
  @extend %heading;
  @include font-size-heading-4($font-heading-capitalize, -2);
}

%h5 {
  @extend %heading;
  @include font-size-heading-5($font-heading-capitalize, -2);
}

%h6 {
  @extend %heading;
  @include font-size-heading-6($font-heading-capitalize, -2);
}

%menu {
  @include font($font-menu);
  @include font-size-body($font-menu-capitalize);
  @include capitalize($font-menu-capitalize);
  letter-spacing: $font-menu-spacing;
}

%section-heading {
  @include font($font-section);
  @include font-size-heading-4($font-section-capitalize);
  text-transform: none;
  @include capitalize($font-section-capitalize);
  letter-spacing: $font-section-spacing;
}

%button-base {
  @include button-size(small);
  @include font($font-button);
  display: inline-block;
  text-decoration: none;
  cursor: pointer;
  // border-radius: 3px;
  transition:
    background-color $duration--small-600 $ease-in-out--normal,
    width $duration--small-600 $ease-in-out--normal,
    height $duration--small-600 $ease-in-out--normal;
}

%button-disable {
  &,
  &:active,
  &:focus {
    color: $color-button-text;
    cursor: default;
    background-color: $color-button-disable;
    border: 1px solid $color-button-disable;
  }
}

%button-primary {
  @extend %button-base;
  color: $color-button-text !important;
  background-color: $color-button-background;
  border: 1px solid $color-button-background;

  &:not(.disabled):hover {
    background: $color-button-background-hover;
    border: 1px solid $color-button-background-hover;
  }

  &:active,
  &:focus {
    background: $color-button-background-focus;
    border: 1px solid $color-button-background-focus;
  }

  &.disabled { @extend %button-disable; }
}

%button-secondary {
  @extend %button-base;
  color: $color-button-secondary-text;
  background-color: $color-button-secondary-background;
  border: 1px solid $color-button-secondary-border;

  &:not(.disabled):hover {
    background: $color-button-secondary-background-hover;
    border: 1px solid $color-button-secondary-border-hover;
  }

  &.disabled { @extend %button-disable; }
}

// Layout

%layout-container {
  max-width: $max-width;
  padding-right: $gutter-outer-small;
  padding-left: $gutter-outer-small;
  margin-right: auto;
  margin-left: auto;

  @include media($min: $bp-small) {
    padding-right: $gutter-outer-medium;
    padding-left: $gutter-outer-medium;
  }

  @include media($min: $bp-large) {
    padding-right: $gutter-outer;
    padding-left: $gutter-outer;
  }
}

%layout-container--reset {
  max-width: 100%;
  padding-right: 0;
  padding-left: 0;

  @include media($min: $bp-large) {
    padding-right: 0;
    padding-left: 0;
  }
}

%page-content {
  margin-top: $gutter-content * 1.5;
  margin-bottom: $gutter-content * 1.5;

  @include media($min: $bp-large) {
    margin-top: $gutter-content * 2.5;
    margin-bottom: $gutter-content * 2.5;
  }
}

%clearfix {
  &::before,
  &::after {
    display: table;
    content: "";
  }

  &::after {
    clear: both;
  }
}

%link--text {
  color: $color-text;
  text-decoration: none;
  transition: color $duration--small-200 $ease-in-out--normal;

  &:hover {
    color: $color-link;
  }
}

%link--default {
  color: $color-link;
  text-decoration: none;
  transition: color $duration--small-200 $ease-in-out--normal;

  &:hover {
    color: $color-link-hover;
  }
}

%box-shadow {
  border: 1px solid $color-box-shadow-border;
  box-shadow: 0 1px 4px $color-box-shadow-shadow;
}

%inline-chevron {
  display: inline-block;
  margin-left: rem(5px);
  vertical-align: middle;

  svg {
    display: block;
    margin-top: rem(-2px);
    transform: rotate(-90deg);
    fill: currentColor;
  }
}

%icon-checkbox {
  display: inline-block;
  width: nth($checkbox-size, 1);
  height: nth($checkbox-size, 2);
  color: $checkbox-inactive;
  vertical-align: middle;

  svg {
    display: block;
    width: 100%;
    height: 100%;
    background-color: $checkbox-inactive;
    border: 1px solid $checkbox-border;
    border-radius: 2px;
    fill: currentColor;
  }
}

%icon-checkbox--active {
  color: $checkbox-active;

  svg {
    background-color: transparent;
    border: 0;
    border-radius: 0;
    fill: currentColor;
  }
}

%button-reset {
  @include font($font-body, $font-weight: bolder);
  padding: 0;
  cursor: pointer;
  background: transparent;
  border: 0;
  -webkit-appearance: normal;
     -moz-appearance: normal;
          appearance: normal;
}

%atc-button {
  position: relative;

  .atc-button--text {
    opacity: 1;
  }

  .atc-button--icon {
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -13px;
    margin-left: -13px;
    opacity: 0;
    visibility: hidden;
    animation: rotate 0.6s linear infinite;
    transition: opacity $duration--small-200 $ease-in-out--normal $duration--small-200;

    svg {
      display: block;
      width: 26px;
      height: 26px;
    }
  }

  &.processing {
    .atc-button--text {
      opacity: 0;
    }

    .atc-button--icon {
      opacity: 1;
      visibility: visible;
    }
  }
}

%search-button {
  position: relative;

  .search-icon--inactive,
  .search-icon--active {
    display: inline-block;
  }

  svg {
    display: block;
    width: 100%;
    height: 100%;
  }

  .search-icon--inactive {
    width: 20px;
    height: 21px;
    opacity: 1;
    transition: opacity $duration--small-200 $ease-in-out--normal;
  }

  .search-icon--active {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 26px;
    height: 26px;
    margin-top: -13px;
    margin-left: -13px;
    opacity: 0;
    visibility: hidden;
    animation: rotate 0.7s cubic-bezier(0.69, 0.31, 0.56, 0.83) infinite;
  }

  &.search-icon--processing {
    .search-icon--inactive {
      opacity: 0;
      transition-delay: $duration--zero;
    }

    .search-icon--active {
      opacity: 1;
      visibility: visible;
    }
  }
}

%message--base {
  @include font($font-body, $font-weight: bolder, $font-family: false);
  @include font-size-body;

  a {
    color: currentColor;
  }
}

%message--error {
  @extend %message--base;
  color: $color-error;
  background-color: mix($color-error, $color-background, 18%);
}

%message--success {
  @extend %message--base;
  color: $color-success;
  background-color: mix($color-success, $color-background, 18%);
}

%sneak-in {

  &.animating,
  &.visible:not(.animating) {
    display: block;
  }

  &.visible:not(.animating) {
    opacity: 1;
    transform: translate(0);
  }

  &.animating-in {
    animation-delay: $duration--zero;
    animation-duration: $duration--medium-100;
    animation-name: sneak-in;
    animation-timing-function: $ease-in--normal;
    animation-fill-mode: both;
    animation-direction: normal;
  }

  &.animating-out {
    opacity: 0;
    transform: translateY(-5px);
    transition: all $duration--small-300 $ease-out--normal;
  }
}

%fade-in {
  animation-delay: $duration--zero;
  animation-duration: $duration--medium-100;
  animation-name: fade-in;
  animation-timing-function: $ease-in--normal;
  animation-fill-mode: both;
  animation-direction: normal;
}

%no-results--wrapper {
  width: 100%;
  margin-top: $space-xx-large;
  text-align: center;

  @include media($min: $bp-small) {
    margin-top: $space-xx-large - $space-large;
  }
}

%no-results--title {
  @include font($font-body);
  @include font-size-heading-4;
  margin-top: 0;
  margin-bottom: 0;
  color: $color-heading;
}

%no-results--button {
  @extend %button-primary;
  @include button-size(medium);
  margin-top: $space-medium;
}

// Buttons

.button-primary {
  @extend %button-primary;
}

.button-secondary {
  @extend %button-secondary;
}

#messageus_button {
  z-index:9999;
}

.rte,
%rte {
  @include font-size-body;
  line-height: 1.625;

  h1 {
    @include font-size-heading-1;
  }

  h2 {
    @include font-size-heading-2;
  }

  h3 {
    @include font-size-heading-3;
  }

  h4 {
    @include font-size-heading-4;
  }

  h5 {
    @include font-size-heading-5;
  }

  h6 {
    @include font-size-heading-6;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin-top: rem($font-body-size * 2);
    margin-bottom: rem($font-body-size);
    color: $color-heading;
  }

  a {
    @extend %link--default;
  }

  blockquote {
    padding-left: rem($font-body-size);
    margin-left: 0;
    border-left: 2px solid $color-button-background;
  }

  dl,
  ul,
  ol,
  p,
  blockquote,
  img:not([style]) {
    margin-top: rem($font-body-size);
    margin-bottom: rem($font-body-size);
  }

  ul,
  ol {
    padding-left: $gutter-content;
  }

  dl {
    dt {
      margin-top: rem($font-body-size);
    }

    dd {
      margin-left: $gutter-content;
    }
  }

  img {
    max-width: 100%;
    margin-top: rem($font-body-size);
    margin-bottom: rem($font-body-size);

    &[style*="left"] {
      margin-top: 0;
      margin-right: rem($gutter-content);
    }

    &[style*="right"] {
      margin-top: 0;
      margin-left: rem($gutter-content);
    }
  }

  @include media($max: $bp-small) {
    td {
      display: block;
      width: 100%;
    }
  }
}

// Form Spacing
$local-input-padding-horizontal: rem(10px);
$local-input-padding-vertical-base: rem(15px);
$local-input-padding-vertical-bottom: $local-input-padding-vertical-base - rem(9px);
$local-input-padding-vertical-top: $local-input-padding-vertical-base + rem(9px);

%form-label {
  @include font-size-body;
  line-height: 1;
  color: mix($color-input-background, $color-input-text, 40%);
}

%form-control-no-label {
  padding-top: $local-input-padding-vertical-base;
  padding-bottom: $local-input-padding-vertical-base;
}

%form-control-base {
  @include font($font-body);
  @include font-size-body;
  z-index: 1;
  width: 100%;
  padding: $local-input-padding-vertical-top $local-input-padding-horizontal $local-input-padding-vertical-bottom;
  color: $color-input-text;
  background-color: $color-input-background;
  border: 1px solid $color-input-border;
  // border-radius: 3px;

  &:focus {
    border-color: $color-input-border-hover;
    outline: 0;
  }

  &.form-field-error {
    border-color: $color-error;
  }

  .no-label & {
    @extend %form-control-no-label;
  }
}

%form-control-input {
  width: 100%;

  &:-ms-input-placeholder {
    color: currentColor;
    opacity: 0;
    -ms-transition: opacity $duration--small-300 $ease-out--normal;
    transition: opacity $duration--small-300 $ease-out--normal;
  }

  &::-ms-input-placeholder {
    color: currentColor;
    opacity: 0;
    -ms-transition: opacity $duration--small-300 $ease-out--normal;
    transition: opacity $duration--small-300 $ease-out--normal;
  }

  &::placeholder {
    color: currentColor;
    opacity: 0;
    transition: opacity $duration--small-300 $ease-out--normal;
  }

  .no-js &,
  &:focus,
  &.form-field-filled {
    &:-ms-input-placeholder {
      opacity: 0.6;
      transition-delay: $duration--small-300;
    }
    &::-ms-input-placeholder {
      opacity: 0.6;
      transition-delay: $duration--small-300;
    }
    &::placeholder {
      opacity: 0.6;
      transition-delay: $duration--small-300;
    }

    + .form-field-title {
      top: rem(8px);
      font-size: rem(13px);
      transition-delay: $duration--zero;
    }
  }

  .no-label & {
    &:-ms-input-placeholder {
      opacity: 0.4;
    }
    &::-ms-input-placeholder {
      opacity: 0.4;
    }
    &::placeholder {
      opacity: 0.4;
    }
  }
}

// TODO: Find way to prevent content scrolling in paddings
%form-control-textarea {
  line-height: 1.5;
  max-width: 100%;
  max-height: 500px;
  min-width: 100%;
  min-height: 150px;
}

// Form layout
.form-fields-columns {
  @extend %clearfix;

  @include media($min: $bp-small) {
    margin-right: -1 * $gutter-content / 2;
    margin-left: -1 * $gutter-content / 2;

    .form-field {
      float: left;
      margin-right: $gutter-content / 2;
      margin-left: $gutter-content / 2;
    }

    .form-field--half {
      width: calc(50% - #{$gutter-content});
    }
  }

  + .form-field {
    clear: left;
  }
}

.form-action-row {
  margin-top: $space-medium;

  .button-primary,
  .button-secondary {
    + .button-primary,
    + .button-secondary {
      margin-left: $gutter-content;
    }
  }
}

.form-field {
  position: relative;
}

.form-field-input,
.form-field-select {
  @extend %form-control-base;
}

.form-field-input {
  @extend %form-control-input;
}
input[name="address[default]"]:focus ~ .form-icon--checkbox {
  outline: 1px dotted #212121;
  outline: 5px auto -webkit-focus-ring-color;
}

.form-field-title {
  @extend %form-label;
  position: absolute;
  top: $local-input-padding-vertical-base + rem(2px);
  left: $local-input-padding-horizontal;
  z-index: 2;
  pointer-events: none;
  transition: $duration--small-300;
  transition-delay: $duration--small-300;
  transition-timing-function: $ease-out--normal;

  .form-field-textarea + & {
    top: $local-input-padding-vertical-base;
  }
}

.form-field-title--inline {
  @extend %form-label;
  display: inline-block;
  margin-left: $local-input-padding-horizontal;
  vertical-align: middle;

  .form-field-checkbox & {
    color: $color-input-text;
  }
}

.form-field-select-wrapper {
  position: relative;

  .form-field-select {
    z-index: 2;
    width: 100%; // needed for Firefox
    height: 100%; // needed for IE
    padding-right: ($local-input-padding-horizontal * 2) + rem(8px);
    color: $color-input-text;
    cursor: pointer;
    background-color: $color-input-background;
    box-shadow: 0 1px 2px 0 $color-border-soft;
    -webkit-appearance: none;
       -moz-appearance: none;
            appearance: none;

    &::-ms-expand {
      display: none; // Removes default arrow from IE10+
    }
  }

  svg {
    position: absolute;
    top: 50%;
    right: $local-input-padding-horizontal;
    margin-top: -3px;
    pointer-events: none;
    color: $color-input-text;
  }
}

.form-field-textarea {
  @extend %form-control-textarea;
}

.form-fields--qty {
  position: relative;

  .form-field {
    opacity: 0;
    transition: opacity $duration--small-400 $ease-in-out--normal;

    .no-js &.form-field--qty-input {
      z-index: 1;
      opacity: 1;
      visibility: visible;
    }

    .js &.form-field--qty-select {
      z-index: 1;
      opacity: 1;
      visibility: visible;
    }
  }

  .hidden {
    z-index: 0;
    opacity: 0;
    visibility: hidden;
  }

  .visible {
    z-index: 1;
    opacity: 1;
    visibility: visible;
  }

  .form-field--qty-select .form-field-select-wrapper {
    position: absolute;
    width: 100%;
  }
}

.form-field-checkbox {
  position: relative;
  display: block;
  margin-top: $local-input-padding-vertical-base;
  cursor: pointer;

  input {
    position: absolute;
    top: 0;
    bottom: 0;
    z-index: 1;
    width: 100%;
    cursor: pointer;
    opacity: 0;

    &:checked ~ .form-icon--checkbox {
      @extend %icon-checkbox--active;
    }

  }

  .form-icon--checkbox {
    @extend %icon-checkbox;
    margin-top: -2px;
  }
}

%form-message,
.form-message {
  &.message--success {
    @extend %message--success;
    padding: $space-xx-small $space-x-small;
  }

  &.message--error {
    @extend %message--error;
    padding: $space-xx-small $space-x-small;
  }

  ul,
  p {
    @include font($font-body, $font-family: false);
    margin-top: 0;
    margin-bottom: 0;
  }

  li:not(:first-child) {
    margin-top: $space-xx-small;
  }

  ul {
    padding-left: 0;
    list-style-type: none;
  }
}

.accordion--icon {

  svg {
    display: block;
    fill: currentColor;
  }

  .icon-chevron-down-left,
  .icon-chevron-down-right {
    transition:
      transform $duration--medium-100 $ease-out--normal,
      fill $duration--small-400 $ease-out--normal;
    transform-origin: 50% 50%;
  }

  .icon-chevron-down-left {
    transform: rotate(0);
  }

  .icon-chevron-down-right {
    transform: rotate(0);
  }

  .accordion--active & {
    .icon-chevron-down-left {
      transform: rotate(45deg);
    }

    .icon-chevron-down-right {
      transform: rotate(-45deg);
    }
  }
}

.accordion--content {
  //scss-lint:disable SpaceAfterPropertyColon
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transition:
    max-height $duration--medium-100 $ease-in-out--normal,
    padding-bottom $duration--medium-100 $ease-in-out--normal,
    opacity $duration--small-400 $ease-in-out--normal;

  .accordion--active & {
    max-height: 999999px;
    opacity: 1;
  }
}

.placeholder--image {
  display: block;
  background-color: $color-placeholder-background;
  fill: $color-placeholder-fill;
}

.placeholder--content-image {
  fill: $color-placeholder-background;
}

.placeholder--content-text {
  background-color: $color-placeholder-background;
}

// General styling for Shopify Product Reviews
.spr-badge {

  .spr-badge-starrating {
    margin-right: 0;

    .spr-icon {
      @include font-size-body-tiny;
    }
  }

  .spr-badge-caption {
    @include font-size-body-tiny;
    display: inline-block;
    margin-left: $space-xxx-small;
    white-space: nowrap;
  }
}

.spr-starratings,
.spr-starrating {
  display: inline-block;
  font-size: 0;
  vertical-align: middle;

  .spr-icon {
    top: auto;
    display: inline-block;
    width: auto;
    height: auto;
    font-size: rem(14px);
    vertical-align: middle;

    &:before {
      font-size: 100%;
    }
  }
}

.spr-icon {
  color: $color-star !important;

  &:not(:last-child) {
    margin-right: 0.1em;
  }

  &.spr-icon-star-empty {
    color: $color-star-empty;

    &.spr-icon-star-hover,
    &.spr-icon-star-hover:hover {
      color: $color-star;
    }
  }

  .spr-starrating.spr-form-input-error & {
    color: $color-error;
  }
}

#shopify-product-reviews {
  @extend %box-shadow;
}

$swatch-transition-timing: $duration--small-400;
$swatch-easing: $ease-in--strong;
$swatch-selected-border-width: 1.5px;
@mixin swatch-wrapper($size: 20px) {
  position: relative;
  height: $size;
  padding: 0;
  cursor: pointer;
  border: 0;
  box-shadow: 0 0 0 $swatch-selected-border-width rgba(0, 0, 0, 0);
  transition: box-shadow $swatch-transition-timing $swatch-easing;

  @if ($swatches-shape == circle) {
    border-radius: 50%;
  } @else if ($size <= 26px) {
    border-radius: 2px;
  } @else {
    border-radius: 3px;
  }
}

%swatch-wrapper-disabled {
  cursor: not-allowed;
}

%swatch-wrapper-selected {
  // Outer hover outline
  box-shadow: 0 0 0 $swatch-selected-border-width #333;
}

%swatch-wrapper-disabled-selected {
  box-shadow: 0 0 0 $swatch-selected-border-width rgba(51, 51, 51, 0.5);
}

@mixin swatch($size: 20px) {
  height: 100%;
  overflow: hidden;
  pointer-events: none;
  transition: transform $swatch-transition-timing $swatch-easing;

  @if ($swatches-shape == circle) {
    border-radius: 50%;
  } @else if ($size <= 26px) {
    border-radius: 1.5px;
  } @else {
    border-radius: 2px;
  }
}

%swatch-disabled {
  position: relative;

  // Disabled swatch strikethrough
  &::before {
    position: absolute;
    top: 0;
    left: 0;
    display: block;
    width: 100%;
    height: 100%;
    // unencoded BG image: <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" preserveAspectRatio="none"><line x1="0" y1="0" x2="100%" y2="100%" stroke="black" stroke-width="2"></line></svg>
    background-image: url("data:image/svg+xml;base64, PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjxsaW5lIHgxPSIwIiB5MT0iMCIgeDI9IjEwMCUiIHkyPSIxMDAlIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIiPjwvbGluZT48L3N2Zz4=");
    content: "";
    opacity: 0.5;
  }
}

@mixin swatch-selected($swatch-size: 20px) {
  $swatch-selected-border-offset: 2px;
  $swatch-default-scale: ($swatch-size - (2 * $swatch-selected-border-offset))/ $swatch-size;
  // IE11
  transform: scale($swatch-default-scale);

  // Variable based transform for nicer variant image swatches on modern browsers
  transform: scale(var(--swatch-inner-transform-x, $swatch-default-scale), var(--swatch-inner-transform-y, $swatch-default-scale));
}

%swatch-inner {
  height: 100%;
  pointer-events: none;
  background-position: center;
  background-size: cover;
  border: 1px solid rgba(0,0,0,0.15); //gets removed by inline style for variant image swatches
  border-radius: inherit;
  background-origin: border-box;
}

%swatch-inner-disabled {
  opacity: 0.6;
}

%swatch-tooltip {
  position: absolute;
  bottom: 0;
  left: 50%; //IE11
  left: calc(50% + var(--swatch-tooltip-offset, 0px)); // Modern browsers
  z-index: 1;
  padding: 6px 9px;
  font-weight: font-weight($font-body, $font-weight: bolder);
  color: $color-text;
  white-space: nowrap;
  pointer-events: none;
  background: $color-background;
  border-radius: 3px;
  content: attr(data-swatch-tooltip);
  transform: translateX(-50%) translateY(100%) translateY(7px);
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.20);
  animation: slide-swatch-tooltip $duration--small-600 $ease-in--strong;

  @include media($min: $bp-small) {
    @include font-size-body-smaller;
  }
}

.flickity-prev-next-button {
  @extend %button-reset;
  position: absolute;
  top: 50%;
  width: 40px;
  height: 40px;
  padding: 5px;
  transform: translateY(-50%);
  opacity: 0.6;
  cursor: pointer;

  svg {
    top: 5px;
    left: 5px;
    width: 30px;
    height: 30px;
  }

  &:focus {
    outline: none;
    box-shadow: 0 0 0 5px #19F;
  }

  &:hover {
    background-color: transparent;

    &:not([disabled]) {
      opacity: 0.8;
    }
  }

  &.previous {
    left: rem(35px);
  }

  &.next {
    right: rem(35px);
  }
}

.flickity-page-dots {
  position: absolute;
  width: 100%;
  padding: 0;
  margin: 0;
  bottom: $gutter-outer;
  list-style: none;
  text-align: center;
  line-height: 1;


  .dot {
    display: inline-block;
    width: 10px;
    height: 10px;
    margin: 0 8px;
    background-color: rgba($color-black, 0.3);
    border-radius: 50%;
    opacity: 0.25;
    cursor: pointer;
  }

  .dot.is-selected {
    opacity: 1;
  }
}

// Static background placeholders
.promo-block,
.navmenu-meganav--image {
  background: $color-placeholder-background;
}

.article-image,
.article--excerpt-image {
  background: $color-placeholder-background;

  .article--excerpt-wrapper--featured & {
    background-color: transparent;
  }
}

// img element fade in
[data-rimg="lazy"],
[data-rimg="loading"],
[data-rimg="loaded"] {
  transition: opacity $duration--small-200 $ease-in--normal;
}

img[data-rimg="lazy"],
img[data-rimg="loading"] {

  // Only target specific elements
  &.slideshow-image,
  .product-gallery--image & {
    opacity: 0;
  }
}

[data-rimg="loaded"] {
  opacity: 1;
}

.promo-block--content-wrapper {
  @include media($min: $bp-small) {
    position: relative;
    z-index: 1;
  }
}

// Sibling placeholder
[data-rimg-canvas] {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  animation: shimmer-background $duration--large-400 $ease-in-out--normal infinite;
  animation-fill-mode: forwards;
  transition: (
    opacity $duration--small-200 $ease-out--normal,
    visibility $duration--zero $ease-out--normal $duration--small-200
  );
  animation-direction: alternate;

  [data-rimg="loaded"] + &,
  [data-rimg="loaded"] > &,
  .no-js & {
    opacity: 0;
    visibility: hidden;
  }

  .no-js & {
    display: none;
  }
}

//scss-lint:disable QualifyingElement
// Hide neighbouring lazy-loading image if javascript is disabled, so img in noscript tags will display
.no-js noscript + img[data-rimg="lazy"] {
  display: none;
}

//scss-lint:enable QualifyingElement

.article--excerpt-image {
  img {
    display: block;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    visibility: hidden;
    object-fit: cover;

    .no-js & {
      visibility: visible;
    }
  }
}

.promo-block,
.video-cover,
.featured-collection--title-card,
.search-section-background,
.search-section-overlay,
.article-image {
  img {
    position: absolute;
    width: 1px;
    height: 1px;
    opacity: 0;

    &[data-rimg="noscript"] {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 1;
      object-fit: cover;
    }
  }
}

.slideshow-image {
  width: 100%;
  height: 100%;
  opacity: 0;

  .slideshow-slide:not(.slideshow-height-original) &[data-rimg="noscript"] {
    opacity: 1;
    object-fit: cover;
  }
}


// Global styles
html {
  box-sizing: border-box;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}

* {
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;
  -webkit-text-size-adjust: none; // Prevent webkit from resizing text
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0); // Prevent tap highlight color / shadow
}

html,
body {
  background-color: $color-background;
}

html {
  height: 100%;

  &::before {
    display: none;
    content: "XXXS,XXS,XS,S,M,L,XL,XXL,XXXL";
  }

  &::after {
    display: none;
    content: "XXXS";

    @include media($min: $bp-xxs) {
      content: "XXS";
    }

    @include media($min: $bp-xs) {
      content: "XS";
    }

    @include media($min: $bp-small) {
      content: "S";
    }

    @include media($min: $bp-medium) {
      content: "M";
    }

    @include media($min: $bp-large) {
      content: "L";
    }

    @include media($min: $bp-xl) {
      content: "XL";
    }

    @include media($min: $bp-xxl) {
      content: "XXL";
    }

    @include media($min: $bp-xxxl) {
      content: "XXXL";
    }
  }
}

body {
  @include font($font-body);
  @include font-size-body;
  width: 100%;
  color: $color-text;

  @include media($bp-small) {
    @include font-size-body-small;
  }

  &.scroll-lock {
    height: 100vh;
    overflow: hidden;
    touch-action: manipulation;
  }
}

th,
b,
strong {
  font-weight: font-weight($font-body, $font-weight: bolder);
}

em {
  font-style: font-style($font-body, $font-style: italic);
}

th em,
b em,
strong em,
em b,
em strong {
  font-style: font-style($font-body, $font-weight: bolder, $font-style: italic);
}

// Headings

h1 {
  @extend %h1;
}

h2 {
  @extend %h2;
}

h3 {
  @extend %h3;
}

h4 {
  @extend %h4;
}

h5 {
  @extend %h5;
}

h6 {
  @extend %h6;
}

%show-for-sr,
.visually-hidden {
  //scss-lint:disable ImportantRule
  position: absolute !important;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px);
  border: 0;
}

.skip-to-main {
  @include font-size-body;
  position: absolute;
  top: 0;
  left: -9999px;
  color: $color-link;
  background: $color-background;
  text-decoration: none;
  padding: 1em;

  &:focus,
  &:active {
    left: 0;
    z-index: 900;
  }
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.001s !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001s !important;
    scroll-behavior: auto !important;
  }
}

@keyframes fade-in {
  0% {
    opacity: 0;
    animation-timing-function: $ease-in-out--normal;
  }

  76.92% {
    opacity: 1;
    animation-timing-function: linear;
  }

  to {
    opacity: 1;
  }
}

@keyframes sneak-in {
  0% {
    opacity: 0;
    transform: translateY(-10px);
    animation-timing-function: $ease-in-out--normal;
  }

  76.92% {
    opacity: 1;
    transform: translateY(0);
    animation-timing-function: linear;
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes overlay-fade-in {
  0% {
    opacity: 0;
    animation-timing-function: $ease-in-out--normal;
  }

  76.92% {
    opacity: 1;
    animation-timing-function: linear;
  }

  to {
    opacity: 1;
  }
}

@keyframes overlay-fade-out {
  0% {
    opacity: 1;
    animation-timing-function: $ease-in-out--normal;
  }

  76.92% {
    opacity: 0;
    animation-timing-function: linear;
  }

  to {
    opacity: 0;
  }
}

@keyframes sneak-in-mobilenav {
  0% {
    transform: translateX(-100px);
    opacity: 0;
    animation-timing-function: $ease-in-out--normal;
  }

  76.92% {
    transform: translate3d(0, 0, 0);
    opacity: 1;
    animation-timing-function: linear;
  }

  to {
    left: 0;
    opacity: 1;
  }
}

@keyframes sneak-out-mobilenav {
  0% {
    transform: translate3d(0, 0, 0);
    opacity: 1;
    animation-timing-function: $ease-out--strong;
  }

  to {
    transform: translateX(-100px);
    opacity: 0;
  }
}

@keyframes rotate {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(360deg);
  }
}

@keyframes shimmer {
  from {
    opacity: 1;
  }

  to {
    opacity: 0.5;
  }
}

@keyframes shimmer-background {
  from {
    background-color: mix($color-text, $color-background, 8%);
  }

  to {
    background-color: mix($color-text, $color-background, 4%);
  }
}

@keyframes loading-video {
  0% {
    transform: translate(-50%, -50%) rotate(0deg);
  }

  100% {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}

@keyframes hide-zoom {
  0% {
    pointer-events: all;
    opacity: 1;
  }

  100% {
    pointer-events: none;
    opacity: 0;
  }
}

@keyframes slide-swatch-tooltip {
  0% {
    opacity: 0;
    transform: translateX(-50%) translateY(110%) translateY(7px);
  }

  100% {
    opacity: 1;
    transform: translateX(-50%) translateY(100%) translateY(7px);
  }
}


// Sections
$local-header-icon-padding: 10px;
$local-header-menu-icon-width: 42px;
$local-header-mobile-search-icon-width: 35px;
$local-header-cart-icon-width: 53px;
$local-header-icon-height: $header-content-height;
$local-header-main-space: (50px, 125px); // Space left, right between logo/search and icons

.site-header {
  position: relative;
  top: 0;
  left: 0;
  width: 100%;
  z-index: $index-header;

  .site-header-sticky & {
    position: -webkit-sticky;
    position: sticky;
    top: 0;
  }
}

.site-header-wrapper {
  @include header-shadow;
  width: 100%;
  color: $color-header-text;
  background-color: $color-header-background;
  transition: top $duration--small-400 $ease-in-out--normal;

  .search-takeover-active & {
    display: none;
  }
}

.site-header-main {
  @extend %layout-container, %clearfix;
  position: relative;
  z-index: $index-header-internal-main;
  padding-top: $header-padding-vertical-mobile;
  padding-bottom: $header-padding-vertical-mobile;
  background-color: $color-header-background;
  transition: padding $duration--small-400 $ease-in-out--normal;

  @include media($min: $bp-large) {
    display: flex;
    align-items: center;
    padding-top: $header-padding-vertical;
    padding-bottom: $header-padding-vertical / 2;

    .site-header-sticky--scrolled & {
      padding-top: $header-padding-vertical-sticky;
      padding-bottom: $header-padding-vertical-sticky;
    }
  }

  &.site-header--full-width  {
    width: 100%;
    max-width: 100%;
  }

  @include media($max: $bp-small) {
    &[data-site-header-mobile-search-button] {
      .live-search:not(.live-search--takeover) {
        display: none;
      }
    }
  }
}

.site-header-main-content {
  margin-right: auto;
  margin-left: auto;
  font-size: 0;
  transition: margin $duration--small-400 $ease-out--normal;

  @include media($min: $bp-large) {
    display: flex;
    align-items: center;
    flex-basis: auto;
    flex-grow: 1;
    flex-shrink: 1;
    justify-content: center;
    margin-right: nth($local-header-main-space, 2);
    margin-left: 0;

    .site-header-sticky--scrolled & {
      margin-left: nth($local-header-main-space, 1);
    }
  }
}

.site-header-logo {
  margin-right: auto;
  margin-left: auto;
  text-align: center;
  vertical-align: middle;

  @include media($max: $bp-small) {
    [data-site-header-mobile-search-button] & {
      // To maximize our logo width, we take half the total width and subtract
      // the larger of the two sets of icons and multiply it by two
      max-width: calc(
        calc(50% - #{max($local-header-menu-icon-width + $local-header-mobile-search-icon-width, + $local-header-cart-icon-width)})
        * 2
      );
    }
  }

  @include media($max: $bp-large) {
    display: table;
    max-width: calc(calc(50% - #{max($local-header-menu-icon-width, + $local-header-cart-icon-width)}) * 2);
    min-height: $header-content-height;
  }

  @include media($min: $bp-large) {
    display: inline-block;
    height: auto;
    margin-right: 25px;
    margin-left: 0;
    text-align: left;
  }
}

.site-logo {
  display: block;
  max-width: 100%;
  color: currentColor;
  text-decoration: none;

  @include media($max: $bp-large) {
    display: table-cell;
    vertical-align: middle;
  }

  @include media($min: $bp-large) {
    display: inline-block;
    margin-left: 0;
  }
}

.site-logo-image {
  display: block;
  max-width: 100%;
  margin-right: auto;
  margin-left: auto;

  @include media($min: $bp-large) {
    display: inline-block;
    margin-left: 0;
  }
}

.site-logo-text {
  @include font($font-body, $font-weight: bolder);
  @include font-size-body;
  display: block;
  width: 100%;
  letter-spacing: 0;
  text-decoration: none;
  text-transform: none;
}

.site-header-menu-toggle,
.site-header-mobile-search-button,
.site-header-cart {
  position: absolute;
  top: 10px;
  bottom: auto;
  z-index: $index-header-internal-icons;
  display: inline-block;
  height: $local-header-icon-height;
  cursor: pointer;
  background-color: transparent;
  border: 0;

  @include media($min: $bp-large) {
    top: 50%;
    bottom: ($header-padding-vertical-mobile * 2) + $header-content-height;
    // Bottom padding is shorter, we need to subtract 1/4 of that to balance it
    margin-top: (-1 * $local-header-icon-height / 2) + ($header-padding-vertical / 4);

    .site-header-sticky--scrolled & {
      // Top and bottom padding are equal
      margin-top: -1 * $local-header-icon-height / 2;
    }
  }
}

.site-header-menu-toggle--button,
.site-header-mobile-search-button--button,
.site-header-cart--button {
  display: inline-block;
  padding: $local-header-icon-padding;
  color: black;

  svg {
    display: block;
  }
}

.site-header-menu-toggle {
  left: $gutter-outer-small - $local-header-icon-padding;
  padding: 0;

  @include media($min: $bp-small) {
    left: $gutter-outer-medium - $local-header-icon-padding;
  }

  @include media($min: $bp-large) {
    left: $gutter-outer - $local-header-icon-padding;
    opacity: 0;
    visibility: hidden;
    transition: opacity $duration--small-300 $ease-out--normal $duration--small-200;

    .animating & {
      visibility: visible;
    }

    .site-header-sticky--scrolled & {
      opacity: 1;
      visibility: visible;
    }
  }

  &.active {
    .toggle-icon--bar-top {
      transform: rotate(45deg);
    }

    .toggle-icon--bar:nth-child(2) {
      opacity: 0;
    }

    .toggle-icon--bar-bottom {
      transform: rotate(-45deg);
    }
  }
}

.site-header-menu-toggle--button {
  padding-top: 15px;
  padding-bottom: 15px;
  background-color: transparent;

  &:focus {
    outline: none;
  }

  .toggle-icon--bar {
    display: block;
    width: 22px;
    height: 2px;
    background-color: black;
    transition: transform $duration--small-200 $ease-in-out--normal;
    transform-origin: 1px;

    + .toggle-icon--bar {
      margin-top: 5px;
    }

    &.toggle-icon--bar-middle {
      transition: opacity $duration--small-200 $ease-in-out--normal;
    }
  }
}

.site-header-mobile-search-button {
  left: $gutter-outer-small - $local-header-icon-padding + $local-header-menu-icon-width;
  padding: 0;

  @include media($min: $bp-small) {
    display: none;
  }
}

.site-header-mobile-search-button--button {
  padding-top: 11px;
  padding-right: 6px;
  padding-bottom: 11px;
  padding-left: 6px;
  background-color: transparent;

  svg {
    width: 23px;
    height: 24px;
  }

  &:focus {
    outline: none;
  }
}

.site-header-cart {
  right: $gutter-outer-small - $local-header-icon-padding;
  transition:
    right $duration--small-400 $ease-in-out--normal,
    top $duration--small-400 $ease-in-out--normal;

  @include media($min: $bp-small) {
    right: $gutter-outer-medium - $local-header-icon-padding;
  }

  @include media($min: $bp-large) {
    right: $gutter-outer - $local-header-icon-padding;
  }

  svg {
    transition: margin $duration--small-400 $ease-in-out--normal;
  }
}

.site-header-cart--count {
  position: absolute;
  top: 0;
  right: 0;
  display: block;
  opacity: 0;
  transition: opacity $duration--small-400 $ease-in--normal;

  &.visible {
    opacity: 1;

    + svg {
      margin-right: 5px;
    }
  }

  &:after {
    display: block;
    height: 22px;
    min-width: 22px;
    padding: 3px;
    font-size: rem(11px);
    line-height: 12px;
    color: $color-button-text;
    text-align: center;
    text-decoration: none;
    background-color: $color-button-background;
    border: 2px solid $color-header-background;
    border-radius: 50%;
    content: attr(data-header-cart-count);
  }
}

.small-promo-enabled {
  @include media($min: $bp-large) {
    margin-right: $space-xxx-large;
  }
}

.small-promo {
  @include font-size-body-smaller;
  position: relative;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  order: 1;
  color: black;
  text-decoration: none;
  transform: translate3d(0, 0, 0) scale(1);

  @include media($max: $bp-small) {
    [data-site-header-mobile-search-button] & {
      margin-top: 10px;
      border-top: 1px solid rgba($color-header-text, 0.2);
    }
  }

  @include media($max: $bp-large) {
    padding: {
      top: 0.675rem;
      right: $gutter-outer-small;
      bottom: 0.15rem;
      left: $gutter-outer-small;
    }
  }

  @include media($min: $bp-large) {
    align-items: center;
    justify-content: flex-start;
    margin-left: rem(35px);
  }
}

.small-promo-icon {
  flex-shrink: 0;
  height: rem(16px);
  margin-right: $gutter-outer-small;
  background-position: center;
  background-repeat: no-repeat;
  background-size: contain;

  svg {
    width: 100%;
    height: 100%;
    max-width: rem(60px);
    max-height: rem(60px);
  }

  img {
    height: 100%;
  }

  @include media($min: $bp-large) {
    width: auto;
    height: rem(28px);
  }
}

.small-promo-icon--svg {
  @include media($max: $bp-large) {
    width: rem(16px);
  }
}

.small-promo-icon--custom {
  @include media($max: $bp-large) {
    width: auto;
  }
}

.small-promo-text-desktop,
.small-promo-text-mobile {
  @include media($max: $bp-large) {
    @include font-size-body-smaller;
    display: inline;
    p {
      display: inline;
    }
  }
}

.small-promo-heading {
  @include font($font-heading);
  @extend %h5;
  display: inline;
  margin: 0;
  font-weight: 700;

  @include media($max: $bp-large) {
    @include font-size-body-smaller($font-heading-capitalize, -2);
  }

  @include media($min: $bp-large) {
    @include font-size-body-small($font-heading-capitalize, -2);
    display: block;
  }
}

.small-promo-content {
  line-height: 1.3;
  text-align: center;

  @include media($min: $bp-large) {
    max-width: 200px;
    text-align: left;
  }

  p {
    margin: 0;
  }

  a {
    position: relative;
    z-index: 1;
    font-size: inherit;
    color: inherit;
  }
}

.small-promo-text-desktop {
  display: inline;

  @include media($min: $bp-large) {
    display: block;
  }

  .small-promo-text-mobile + & {
    @include media($max: $bp-large) {
      display: none;
    }
  }
}

.small-promo-text-mobile {
  @include media($min: $bp-large) {
    display: none;
  }
}

.announcement-bar--link,
.small-promo--link {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}

.announcement-bar-text,
.announcement-bar-text-mobile {
  a {
    position: relative;
    z-index: 1;
  }
}

$local-font-size-small: rem(13px);

.site-footer-wrapper {
  z-index: $index-footer;
  padding-top: $space-x-small;
  padding-bottom: $space-large;
  margin-top: $space-xx-large;
  color: $color-footer-text;
  background: $color-footer-background;

  a {
    color: currentColor;
    text-decoration: none;
    transition: color $duration--small-200 $ease-in-out--normal;

    &:hover {
      color: $color-footer-link;
    }
  }

  .rte a {
    text-decoration: underline;
  }

  @include media($min: $bp-large) {
    padding-top: ($space-xxx-large - $space-small);
    padding-bottom: $space-xx-large;
  }
}

.site-footer-item {
  @extend %layout-container;
}

.site-footer-information {
  @extend %clearfix;
  margin-top: $space-xx-large;

  a {
    color: $color-footer-color-alt;

    &:hover {
      color: $color-footer-link;
    }
  }

  @include media($min: $bp-large) {
    margin-top: 70px;
  }

  .navmenu {
    padding: 0;
    margin: 0;
    font-size: 0;
    list-style: none;

    .navmenu-item {
      display: inline-block;
      margin-bottom: 6px;
      font-size: $local-font-size-small;

      &:not(:last-child) {
        padding-right: 11px;
        margin-right: 10px;
        border-right: 1px solid $color-additional-accent;
      }
    }
  }
}

.site-footer-left,
.site-footer-right {
  width: 100%;

  @include media($min: $bp-large) {
    float: left;
  }
}

.site-footer-left {
  font-size: $local-font-size-small;
  text-align: left;

  &:not(:only-child) {
    @include media($min: $bp-large) {
      width: 60%;
      padding-right: $gutter-outer / 2;
    }
  }
}

.site-footer-credits {
  margin-bottom: 0;
  color: $color-footer-color-alt;

  &:not(:first-child) {
    margin-top: 6px;
  }
}

.site-footer-right {
  @include media($min: $bp-large) {
    // width: 40%;
    padding-left: $gutter-outer / 2;
  }
}

.payment-icons {
  width: 100%;
  padding-left: 0;
  margin-top: $gutter-content;
  margin-bottom: -1 * ($gutter-content / 2);
  margin-left: 0;
  font-size: 0;
  list-style: none;

  @include media($min: $bp-large) {
    margin-top: 0;
    text-align: right;
  }
}

.payment-icons-item {
  @include font-size-body;
  display: inline-block;
  margin-right: $gutter-content / 2;
  margin-bottom: $gutter-content / 2;
  vertical-align: top;

  @include media($min: $bp-large) {
    margin-right: 0;
    margin-left: $gutter-content / 2;
  }

  svg {
    width: 48px;
    height: 30px;
  }
}

.fourohfour--container {
  @extend %layout-container;
  margin-top: $space-xx-large * 2;
  margin-bottom: $space-xxx-large * 3;
  text-align: center;

  .fourohfour-title h1 {
    margin-top: 0;
    color: $color-heading;
  }
}

.fourohfour--inner {

  p {
    margin-bottom: $space-large;
    color: $color-text;

    &:last-child {
      margin-bottom: 0;
    }
  }

  .button-primary {
    @include button-size(large);
  }
}

.announcement-bar {
  @include font($font-body, $font-family: false, $font-weight: bolder);
  @include font-size-body-smaller;
  display: block;
  padding: $gutter-outer-medium 0;
  line-height: 1.3;
  color: $color-header-text;
  text-align: center;
  text-decoration: none;
  transform: translate3d(0, 0, 0) scale(1);

  &.only-mobile {
    @include media($min: $bp-small) {
      display: none;
    }
  }

  p {
    margin: 0;
  }

  a {
    color: currentColor;
  }

  @include media($min: $bp-small) {
    @include font-size-body-small;
  }
}

.announcement-bar-text {
  @extend %layout-container;
  display: none;

  @include media($min: $bp-small) {
    display: block;
  }
}

.announcement-bar-text-mobile {
  @extend %layout-container;

  @include media($min: $bp-small) {
    display: none;
  }
}

.announcement-bar-link {
  position: absolute;
  // Leave space for the outline while using keyboard
  top: 2px;
  right: 2px;
  bottom: 2px;
  left: 2px;
}

.announcement-bar-text a,
.announcement-bar-text-mobile a {
  position: relative;
  z-index: 1;
}

$local-max-width: 700px;

.article-image {
  position: relative;
  width: 100%;
  height: 250px;
  margin: 0;
  overflow: hidden;
  background-position: 50% 50%;
  background-size: cover;

  @include media($min: $bp-xs) {
    height: 350px;
  }

  @include media($min: $bp-medium) {
    height: 400px;
  }

  @include media($min: $bp-large) {
    height: 500px;
  }
}

.article--container {
  @extend %layout-container;
  position: relative;
  margin-top: $space-x-large;

  @include media($max: $bp-large) {
    @extend %layout-container;
    margin-right: auto;
    margin-left: auto;
  }

  @include media($min: $bp-xs, $max: $bp-large) {
    display: flex;
  }

  @include media($min: $bp-large) {
    padding-right: 0;
    padding-left: 0;
  }
}

.article--sidebar {
  padding-right: $space-medium;

  @include media($max: $bp-xs) {
    display: none;
  }

  @include media($min: $bp-xs, $max: $bp-large) {
    width: 18%;
  }

  @include media($min: $bp-large) {
    position: absolute;
    left: $space-large;
  }

  .share-buttons {
    margin-top: 0;

    .share-buttons--button {
      @include media($min: $bp-xs, $max: $bp-xxl) {
        display: block;
        margin-bottom: $space-xx-small;
        margin-left: 0 !important; //scss-lint:disable ImportantRule
      }
    }
  }
}

.article--share-buttons {
  margin-top: $space-x-large;

  @include media($min: $bp-xs) {
    display: none;
  }
}

.article--inner {
  margin-right: auto;
  margin-left: auto;

  @include media($max: $bp-xs) {
    width: 100%;
  }

  @include media($min: $bp-xs, $max: $bp-large) {
    width: 82%;
  }

  @include media($min: $bp-large) {
    @extend %layout-container;
    max-width: $local-max-width;
  }
}

.article--meta {
  font-size: 0;
  color: $color-text-light;
}

.article--meta-item {
  @include font-size-body;
  display: inline-block;

  @include media($max: $bp-small) {
    @include font-size-body-small;
  }

  &:nth-child(2) {
    padding-left: 11px;
    margin-left: 10px;
    border-left: 1px solid transparentize($color-border, 0.65);

    @include media($max: $bp-small) {
      padding-left: 6px;
      margin-left: 5px;
    }
  }
}

.article--title {
  @include font-size-heading-1;
  margin-top: 0;
  margin-bottom: $space-x-large;
  color: $color-heading;

  .article--meta + & {
    margin-top: $space-x-small;
  }
}

.article--tags {
  @include font($font-body, $font-family: false);
  @include font-size-body-smaller;
  margin-top: $space-xx-large;
  color: $color-text-light;

  .article--tags-title {
    color: $color-text;
  }

  a {
    @extend %link--default;
    margin-left: $space-xxx-small;
    color: $color-text-light;

    &:hover {
      color: transparentize($color-text, 0.4);
    }
  }
}

.article--pagination {
  @extend %clearfix;
  width: 100%;
  margin-top: $space-xxx-large;
  font-size: 0;

  .article--pagination-item-left,
  .article--pagination-item-right {
    position: relative;
    display: inline-block;
    max-width: 40%;
    width: 100%;

    > a {
      @extend %link--default;
    }
  }

  .article--pagination-item-right {
    float: right;
    text-align: right;
  }

  .article--pagination-chevron-right,
  .article--pagination-chevron-left {
    @extend %inline-chevron;
    margin-top: rem(8px);
  }

  .article--pagination-chevron-left {
    margin-right: rem(5px);
    margin-left: 0;

    svg {
      transform: rotate(90deg);
    }

    @include media($min: $bp-xs) {
      position: absolute;
      left: calc(-8px - #{rem(5px)});
    }
  }

  .article--pagination-text {
    @include font($font-body, $font-family: false, $font-weight: bolder);
    @include font-size-body;
    display: inline-block;
    width: calc(100% - (8px + #{rem(5px)}));
    vertical-align: top;
  }

  .article--pagination-title {
    @include font($font-body, $font-family: false, $font-style: italic);
    @include font-size-body-small;
    display: none;
    margin-top: $space-xxx-small;
    line-height: 1.46;
    color: $color-text;

    @include media($min: $bp-xs) {
      display: block;
    }
  }
}

.listcollections--container {
  @extend %layout-container;
  margin-top: $space-medium;

  @include media($min: $bp-small) {
    margin-top: $space-large;
  }
}

.listcollections--inner {
  @extend %clearfix;
  list-style-type: none;
  padding-left: 0;
}

$local-xs-tween: 480px;
$local-cart-sidebar-width: 280px;

.cart--section {
  @extend %layout-container;
}

.cart-title {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: $space-large;
  margin-bottom: $space-large;
  color: $color-heading;

  @include media($min: $bp-small) {
    margin-bottom: $space-x-large;
  }

  @include media($min: $bp-large) {
    margin-top: $space-xx-large;
    margin-bottom: $space-xx-large;
  }

  h1 {
    margin-top: 0;
    margin-bottom: 0;
  }
}

.cart-title-right {
  display: flex;
  align-items: center;
  flex-basis: auto;
  flex-grow: 0;
  flex-shrink: 0;
}

.cart-title-button {
  @include button-size(small);
  display: flex;
  align-items: center;

  @include media($min: $local-xs-tween) {
    @include button-size(medium);
  }

  svg {
    display: block;
    width: 19px;
    height: 18px;
    margin-right: 10px;
  }
}

.cart-title-total {
  @include font-size-body-smaller;
  margin-top: $space-xxx-small;
  color: $color-text-light;

  span {
    display: inline-block;
    margin-left: $space-xxx-small;
    color: $color-heading;
  }
}

.cart-title-total--small {
  width: 100%;
}

.cart-title-total--large {

  .cart-title-total {
    margin-top: 0;
    margin-right: $space-medium;
    text-align: right;
  }

  span {
    @include font-size-heading-4;
    display: block;
    margin-top: $space-xxx-small;
    margin-left: 0;
  }
}

.cartitems--container {
  @include media($min: $bp-medium) {
    &.has-sidebar {
      display: flex;
    }
  }

  &.has-sidebar .cartitems {
    @include media($min: $bp-medium) {
      width: calc(100% - (#{$local-cart-sidebar-width} + #{$space-medium}));
      margin-right: $space-medium;
    }

    @include media($min: $bp-large) {
      width: calc(100% - (#{$local-cart-sidebar-width} + #{$space-x-large}));
      margin-right: $space-x-large;
    }

    @include media($min: $bp-xxl) {
      width: calc(100% - (#{$local-cart-sidebar-width} + #{$space-xx-large}));
      margin-right: $space-xx-large;
    }
  }
}

.cartitems {
  .cartitems--list {
    padding-left: 0;
  }
}

.cartitems-empty {
  @include font-size-body;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 358px;
  padding: $space-medium;
  text-align: center;
  border: 1px solid $color-border-soft;
  box-shadow: 0 1px 4px 0 rgba($color-black, 0.06);
}

.cartitems-empty--inner {

  p {
    margin-top: 0;
    margin-bottom: $space-medium;
  }

  .button-primary {
    @include button-size(medium);
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;

    svg {
      display: block;
      width: 19px;
      height: 18px;
      margin-right: 6px;
      margin-bottom: 1px;
    }
  }
}

.cart-total {
  margin-top: $space-x-large;
}

.cart-ordernote {

  .form-field {
    max-width: 450px;
  }

  textarea {
    min-height: 118px;
  }
}

.cart-ordernote-heading {
  display: block;
  margin-bottom: $space-x-small;
  color: $color-text;
}

.cart-final-total {
  padding-top: $space-large;
  margin-top: $space-x-large;
  margin-bottom: $space-small;
  border-top: 1px solid $color-border-soft;

  .discount-list-item {
    svg {
      height: rem(12px);
      width: rem(12px);
    }
  }
}

.cart-discount,
.cart-subtotal {
  display: table;
  width: 100%;

  > span {
    display: table-cell;
    vertical-align: middle;
  }

  .money,
  .cart-discount-price {
    min-width: 7rem;
    text-align: right;
    vertical-align: top;
  }
}

.cart-discount {
  @include font-size-body;

  > span {
    margin-bottom: $space-xxx-small;
  }
}

.cart-subtotal {
  font-size: rem(22px);
  color: $color-heading;

  .money {
    font-size: rem(28px);
  }
}

.cart-shipping {
  @include font-size-body;
  margin-bottom: $space-large;
  color: $color-text;
  line-height: 1.56;

  .cart-shipping-toggle {
    @extend %button-reset, %link--default;
    display: block;
    line-height: 1.56;
  }
}

.cart-shippingcalc--container {
  display: none;
  margin-bottom: $space-xxx-large;

  &.open {
    display: block;
  }
}

.cart-shippingcalc-form {
  margin-top: $space-large;
  margin-bottom: $space-large;

  .cart-shippingcalc--inner {
    margin-bottom: $space-small;

    @include media($min: $local-xs-tween) {
      display: flex;
    }
  }

  .form-field {
    width: 100%;

    @include media($max: $local-xs-tween) {
      margin-bottom: $space-small;

      &:last-child {
        margin-bottom: 0;
      }
    }

    @include media($min: $local-xs-tween) {
      width: calc(#{percentage(1 / 3)} - #{$space-small / 2} - 2px);
      margin-right: $space-small;

      &:last-child {
        margin-right: 0;
      }
    }
  }

  .button-primary {
    @include button-size(medium);
  }
}

.cart-shippingcalc-none {
  margin-top: 0;
}

.cart-shippingcalc-response {
  display: none;
  padding: $space-medium;
  color: $color-text;
  background-color: $color-background-light;

  &.visible {
    display: block;
  }

  > *:first-child {
    margin-top: 0;
  }

  > *:last-child {
    margin-bottom: 0;
  }
}

.cart-shippingcalc-rates {
  margin-top: $space-medium;

  &:empty {
    display: none;
  }
}

.cart-checkout {
  text-align: center;

  .button-primary {
    @include button-size(x-large);
    width: 100%;

    svg {
      display: inline-block;
      width: 21px;
      height: 21px;
      margin-right: 5px;
      margin-bottom: 2px;
      vertical-align: top;
    }
  }

  .cart-continue {
    margin-top: $space-medium;
  }
}

.additional-checkout-buttons {
  margin-top: $space-medium;
  margin-bottom: $space-medium;
}

// Adds style to the dynamic checkout buttons according to the Shopify spec
[data-shopify-buttoncontainer] {
  justify-content: center;
}

.cart-continue {
  @include font-size-body;
  @extend %link--default;
  display: block;

  svg {
    position: relative;
    top: -1px;
    margin-left: 2px;
    transform: rotate(-90deg);
  }
}

.cart-sidebar {
  width: 100%;

  @include media($max: $local-xs-tween) {
    margin-top: $space-large;
  }

  @include media($min: $local-xs-tween, $max: $bp-medium) {
    display: flex;
    margin-top: $space-xx-large;
  }

  @include media($min: $bp-medium) {
    width: $local-cart-sidebar-width;
  }
}

.cart-sidebar-item {
  position: relative;
  margin-bottom: $space-medium;

  @include media($max: $local-xs-tween) {
    width: 100%;
  }

  @include media($min: $local-xs-tween, $max: $bp-medium) {
    width: calc(50% - #{$space-medium / 2});

    &:first-child {
      margin-right: $space-medium;
    }
  }

  @include media($min: $bp-medium) {
    &:last-child {
      margin-bottom: 0;
    }
  }

  .cart-sidebar-item-image {
    display: block;
    width: 100%;
    max-width: 100%;
  }
}

.cart-sidebar-item--text {
  padding: $space-medium;
  background-color: $color-background-light;

  > *:first-child {
    margin-top: 0;
  }
  > *:last-child {
    margin-bottom: 0;
  }
}

.collection--section {
  margin-top: $space-medium;

  @include media($min: $bp-small) {
    margin-top: $space-large;
  }
}

.collection--image {
  position: relative;
  margin: 0;

  img {
    display: block;
    max-width: 100%;
  }
}

.collection--information {
  margin-top: $space-large;

  &:first-child {
    margin-top: 0;
  }
}

.collection--title {
  @include font-size-heading-large;
  margin-top: 0;
  margin-bottom: 0;
  line-height: 1.3;
  color: $color-heading;
}

.collection--description {
  margin-top: $space-xx-small;

  > *:first-child {
    margin-top: 0;
  }
}


$local-max-width: 600px;
$local-header-height: $header-content-height + ($header-padding-vertical-mobile * 2);

.template-password {

  &,
  .site-main,
  .password--section {
    height: 100%;
  }
}

.password--section {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.password-page-header,
.password-page-content,
.password-page-footer {
  flex-basis: auto;
  flex-grow: 0;
  flex-shrink: 0;
}

.password-mailinglist--container,
.password-social--container {
  margin-top: $space-x-large;

  @include media($min: $bp-small) {
    margin-top: $space-xxx-large;
  }
}

// Header
.password-page-header {
  width: 100%;
  min-height: $local-header-height;
  padding: $header-padding-vertical-mobile $gutter-outer-small;
  font-size: 0;
  color: $color-header-text;
  background-color: $color-header-background;

  @include media($min: $bp-small) {
    padding-right: $gutter-outer-medium;
    padding-left: $gutter-outer-medium;
  }

  @include media($min: $bp-large) {
    padding-right: $gutter-outer;
    padding-left: $gutter-outer;
  }
}

.password-header-logo {
  display: inline-block;
  width: 50%;
  padding-right: $gutter-content / 2;
  line-height: 1.1;
  color: currentColor;
  text-decoration: none;
  vertical-align: middle;
}

.password-header-logo-image {
  display: block;
  max-width: $header-logo-image-max-width;
  max-height: 100%;
}

.password-header-logo-text {
  @include font-size-body;
  display: block;
  width: 100%;
  text-decoration: none;
}

.password-header-login {
  display: inline-block;
  width: 50%;
  height: $header-content-height;
  padding-left: $gutter-content / 2;
  text-align: right;
  vertical-align: middle;
}

.password-header-lock {
  display: inline-block;
  padding: 8px 10px;
  margin-top: 4px;
  margin-right: -10px;
  color: currentColor;
  cursor: pointer;
  background-color: transparent;
  border: 0;

  svg {
    display: block;
    fill: currentColor;
  }
}

// Main content
.password-page-content--inner {
  @extend %layout-container;
  display: flex;
  flex-direction: column;
  justify-content: center;
  max-width: $local-max-width;
  padding-top: $space-x-large;
  padding-bottom: $space-x-large;
  text-align: center;

  @include media($min: $bp-small) {
    padding-top: $space-xxx-large;
    padding-bottom: $space-xxx-large;
  }
}

.password-title {
  margin-top: 0;
  margin-bottom: $space-medium;
  color: $color-heading;
}

.password-message {
  margin-bottom: 0;
  line-height: 1.56;
  color: $color-text;
}

// Newsleter Signup
.password-mailinglist--container {

  .password-mailinglist-title {
    @include font-size-heading-4;
    margin-top: 0;
    margin-bottom: $space-medium;
    color: $color-heading;

    h1 {
      margin-top: 0;
      margin-bottom: 0;
    }
  }

  .password-mailinglist-text {
    @include font-size-body-small;
  }

  .form-fields-inline {
    display: table;
    width: 100%;
    max-width: calc(#{$local-max-width} * 2 / 3);
    margin-right: auto;
    margin-left: auto;
  }

  .newsletter .newsletter-input {
    display: table-cell;
    width: 100%;
    max-width: none;
    padding-right: $space-x-small;
    vertical-align: middle;
  }

  .newsletter .newsletter-submit {
    display: table-cell;
    width: auto;
    margin-left: 0;
    white-space: nowrap;
    vertical-align: middle;
  }

  .button-primary {
    @include button-size(large);
    display: block;
    width: 100%;

    @include media($max: $bp-small) {
      padding-right: $space-small;
      padding-left: $space-small;
    }
  }
}

.password-social--title {
  @include font($font-body, $font-family: false);
  @include font-size-body;
}

// Footer
.password-page-footer {
  @extend %layout-container;
  padding-top: $space-small;
  padding-bottom: $space-small;
  text-align: center;
}

.password-page-footer--item {
  display: block;

  a {
    @extend %link--default;
  }

  &:not(:first-child) {
    margin-top: $space-xx-small;
  }

  @include media($min: $bp-xs) {
    display: inline-block;
    margin-top: 0;
  }
}

// Password modal
.passwordentry-container {
  display: none;
}

.passwordentry-title {
  @include font-size-heading-4;
  margin-top: 0;
  margin-bottom: $space-large;
  color: $color-heading;
}

.passwordentry-contents {

  .passwordentry-message {
    @extend %form-message;
    margin-bottom: $space-medium;
  }

  .form-fields-inline {
    display: table;
    width: 100%;
  }

  .passwordentry-input {
    display: table-cell;
    width: 100%;
    padding-right: $space-x-small;
    vertical-align: middle;
  }

  .passwordentry-submit {
    display: table-cell;
    vertical-align: middle;
  }

  .button-primary {
    @include button-size(large);
    display: block;
    width: 100%;
    white-space: nowrap;

    @include media($max: $bp-small) {
      padding-right: $space-small;
      padding-left: $space-small;
    }
  }

  a {
    @extend %link--default;
  }
}

.passwordentry-owner {
  margin-top: $space-large;
  margin-bottom: 0;
  color: $color-text;
}

.modal--passwordentry {

  .modal-inner {
    max-width: 450px;
    padding: $space-large $space-medium;
    text-align: center;
    white-space: normal;

    @include media($min: $bp-xs) {
      padding: $space-xx-large;
    }
  }
}

.product--container {
  @extend %layout-container;
  margin-top: $space-medium;

  @include media($min: $bp-small) {
    margin-top: $space-large;
  }

  @include media($max: $bp-small) {
    padding-right: 0;
    padding-left: 0;
  }
}

.product--outer {
  display: block;
  font-size: 0;

  @include media($min: $bp-small) {
    display: flex;
  }
}

// Column structure
.product-gallery,
.product-main,
.product-readmore {
  @include media($max: $bp-small) {
    padding-right: $gutter-outer-small;
    padding-left: $gutter-outer-small;
  }
}

.product-gallery,
.product-form--alt,
.product-main {
  @include font-size-body;
  display: inline-block;
  width: 100%;
  vertical-align: top;
  transition: opacity $duration--small-600 $ease-in-out--normal;

  &.product-gallery--fade {
    opacity: 0.3;
  }
}

.product-gallery {
  @include media($min: $bp-small) {
    width: 51.5%;
  }

  @include media($min: $bp-large) {
    .layout--three-col & {
      width: 35%;
    }
  }
}

.product-main {
  @include media($min: $bp-small) {
    width: 46%;
    margin-left: 2.5%;
  }

  @include media($min: $bp-large) {
    .layout--three-col & {
      width: 36.5%;
      margin-left: 2.5%;
    }
  }
}

.product-description {
  margin-top: $space-large;
}

.product-form--alt {
  @include font-size-body;
  display: none;

  @include media($min: $bp-large) {
    display: block;
    width: 23.5%;
    margin-left: 2.5%;
  }

  @include media($min: $bp-xxl) {
    width: 22%;
    margin-left: 4%;
  }
}

.product-link {
  @extend %link--default;
  display: inline-block;
  margin-top: $gutter-outer;
}

$local-space-small: 10px;
$local-space-large: 20px;

.blog-title {
  margin-top: $space-x-small;
  margin-bottom: $space-small;
  color: $color-heading;

  @include media($min: $bp-large) {
    margin-top: $space-large;
    margin-bottom: $space-small;
  }

  h1,
  a {
    display: inline-block;
  }

  a {
    padding: rem(2px) rem(10px);
  }

  svg {
    display: block;
    fill: $color-link;
  }
}

.blog--container {
  @extend %layout-container;
}

.blog--inner {
  display: flex;
  flex-wrap: wrap;
  justify-content: flex-start;
  padding: 0;
  list-style-type: none;

  .article--excerpt-wrapper {

    @include media($max: $bp-xs) {
      width: 100%;
      margin-right: 0;
    }

    @include media($min: $bp-xs) {
      width: calc(#{percentage(1 / 2)} - #{$local-space-small * 1 / 2});
      margin-right: $local-space-small;
    }

    @include media($min: $bp-xs, $max: $bp-medium) {
      &:nth-child(2n) {
        margin-right: 0;
      }
    }

    @include media($max: $bp-small) {
      margin-bottom: $space-large;
    }

    @include media($min: $bp-small) {
      margin-bottom: $space-xx-large;
    }

    @include media($min: $bp-medium) {
      &:nth-child(3n) {
        margin-right: 0;
      }
    }

    @include media($min: $bp-medium, $max: $bp-xl) {
      width: calc(#{percentage(1 / 3)} - #{$local-space-small * 2 / 3});
    }

    @include media($min: $bp-xl) {
      width: calc(#{percentage(1 / 3)} - #{$local-space-large * 2 / 3});
      margin-right: $local-space-large;
    }
  }
}

.blog--no-results {
  @extend %no-results--wrapper;
}

.blog--no-results-title {
  @extend %no-results--title;
}

.search--section {
  margin-top: $space-medium;

  @include media($min: $bp-small) {
    margin-top: $space-large;
  }
}
.highlights-banners-container {
  @include media($max: $bp-large) {
    overflow-x: hidden;
  }
}

.highlights-banners {
  @extend %layout-container;
  position: relative;
  display: flex;
  justify-content: center;
  outline: 0;

  .flickity-slider {
    height: 100%;
    display: flex;
    align-items: center;
  }

  @include media($max: $bp-large) {
    padding: $space-small $gutter-outer-small;

    &:not(.flickity-enabled) {
      justify-content: flex-start;
      overflow-x: auto;
      scrollbar-width: none; // Firefox

      &::-webkit-scrollbar {
        display: none;
      }

      .highlights-banners-block {
        flex-shrink: 0;
      }
    }
  }

  &:before,
  &:after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: calc(100% - #{$gutter-content});
    bottom: 0;
    z-index: 2;
  }

  &:after {
    left: calc(100% - #{$gutter-content});
    right: 0;
  }

  @include media($min: $bp-large) {
    height: auto;
    padding: {
      top: $gutter-content * 1.8;
      bottom: $gutter-content * 1.8;
    };

    &:before,
    &:after {
      display: none;
    }
  }
}

.highlights-banners-block {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  color: $color-text;
  text-decoration: none;

  .highlight-banners-count-2 & {
    width: rem(500px);

    @include media($min: $bp-large) {
      width: 33%;
    }
  }

  .highlight-banners-count-3 & {
    width: rem(333px);

    @include media($min: $bp-large) {
      width: 25%;
    }
  }

  .highlight-banners-count-4 & {
    width: rem(250px);

    @include media($min: $bp-large) {
      width: 25%;
    }
  }
}

.highlights-banners-icon {
  width: auto;
  max-width: 35%;
  height: rem(36px);
  flex: 1 0 auto;
  margin-right: $gutter-content;
  background-position: center;
  background-size: contain;
  background-repeat: no-repeat;
  overflow: hidden;

  @include media($min: $bp-xs) {
    height: rem(40px);
  }

  @include media($min: $bp-large) {
    height: rem(46px);
  }

  svg {
    width: 100%;
    height: 100%;
    max-width: rem(46px);
    max-height: rem(46px);
  }

  .highlights-banners-custom-icon {
    width: auto;
    height: 100%;
  }
}

.highlights-banners-text {
  @include font-size-body-smaller;
  width: calc(100% - #{rem(30px)});
  min-width: 0;
  padding-right: $gutter-content;
  line-height: 1.4;

  p {
    margin: 0;
  }

  @include media($min: $bp-medium) {
    width: calc(100% - #{rem(50px)});
  }

  @include media($min: $bp-large) {
    @include font-size-body;
  }

  a {
    position: relative;
    z-index: 1;
    color: inherit;
    text-decoration: underline;
  }
}

.highlights-banners-heading {
  @extend %h5;
  margin: 0;
}

.highlights-banners-block-link {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}

.flickity-viewport,
.flickity-slider {
  width: 100%;
}

$local-slideshow-small: 440px;
$local-slideshow-medium: 500px;
$local-slideshow-large: 560px;

.slideshow {
  position: relative;
  overflow: hidden;

  .flickity-viewport {
    transition: height $duration--small-600 $ease-in-out--normal;
  }

  .flickity-slider {
    height: 100%;
  }

  .flickity-page-dots {
    bottom: $gutter-content;

    @include media($max: $bp-small) {
      bottom: auto;
    }

    .dot {
      width: 5px;
      height: 5px;
      margin: 0 4px;
      transition: background $duration--medium-200;

      @include media($min: $bp-small) {
        width: 7px;
        height: 7px;
        margin: 0 7.5px;
      }
    }
  }

  .flickity-prev-next-button {
    opacity: 1;

    svg {
      transform: scale(1);
      transition:
        transform $duration--small-400 $ease-in-out--normal,
        fill $duration--medium-400 $ease-in-out--normal;
    }

    @include media($max: $bp-small) {
      display: none;
    }

    &:disabled {
      cursor: default;
      opacity: 0.25;
    }

    &:hover {
      &:not([disabled]) {
        opacity: 1;

        svg {
          transform: scale(1.2);
        }
      }
    }

    &:active {
      &:not([disabled]) {
        opacity: 0.5;
      }
    }
  }

  &.flickity-enabled:focus {
    outline: none;
  }
}

.slideshow-height-small {
  height: 42vw;

  @include media($min: $bp-large) {
    height: $local-slideshow-small;
  }
}

.slideshow-height-medium {
  height: 48vw;

  @include media($min: $bp-large) {
    height: $local-slideshow-medium;
  }
}

.slideshow-height-large {
  height: 54vw;

  @include media($min: $bp-large) {
    height: $local-slideshow-large;
  }
}

.slideshow-height-fullscreen {
  height: 100vh;
}

.slideshow-slide:not(.slideshow-height-original) {
  height: auto;
}

.slideshow-slide {
  width: 100%;
  display: none;

  .flickity-enabled &,
  &:nth-of-type(1) {
    display: block;
  }

  &.slideshow-height-fullscreen {
    height: 100%;
  }

  &:focus {
    .slideshow-background {
      box-shadow: inset 0 0 0 3px #19F;
    }
  }
}

.slideshow-background {
  position: relative;
  width: 100%;
  font-size: 0;
  background-position: center;
  background-size: cover;
}

.slideshow-slide-overlay {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;

  @include media($max: $bp-small) {
    .slideshow-height-small &,
    .slideshow-height-medium &,
    .slideshow-height-large & {
      display: none;
    }
  }
}

.slideshow-slide-content {
  position: relative;
  z-index: 1;
  width: 100%;
  max-width: 100%;
  margin: $gutter-outer * 2 auto;
  text-align: center;

  .slideshow-height-fullscreen + & {
    position: absolute;
    top: 50%;
    left: 50%;
    margin: 0;
    transform: translate(-50%, -50%);
  }

  @include media($max: $bp-small) {
    max-width: 90%;
    text-align: center;
  }
  @include media($min: $bp-small) {
    position: absolute;
    top: 50%;
    left: 50%;
    margin: 0;
    transform: translate(-50%, -50%);
    &.text-align-left {
      padding-right: 40%;
      padding-left: 6.25em;
      text-align: left;
    }
    &.text-align-left .slideshow-button {
      margin-left: 0;
    }
    &.text-align-center {
      max-width: 60%;
      text-align: center;
    }
    &.text-align-right {
      padding-right: 6.25em;
      padding-left: 40%;
      text-align: right;
    }
    &.text-align-right .slideshow-button {
      margin-right: 0;
    }
  }
}

.slideshow-link {
  color: $color-heading;
  text-decoration: none;
}

.slideshow-background-link {
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: 1;
  cursor: pointer;
}

.slideshow-slide-heading {
  @extend %h1;
  margin-top: 0;
  margin-bottom: 0;
  line-height: 1.2;

  @include media($min: $bp-small) {
    @include font-size-heading-large($font-heading-capitalize, -2);
  }
}

.slideshow-slide-text {
  @include font-size-body-medium;
  margin-top: $space-x-small;
  margin-bottom: 0;
  line-height: 1.4;

  @include media($min: $bp-large) {
    @include font-size-body-large;
  }
}

.slideshow-button {
  margin: $space-medium $gutter-outer-small / 2 0;

  @include media($min: $bp-small) {
    @include button-size(medium);
  }

  @include media($min: $bp-large) {
    margin-top: $font-heading-medium;
    @include button-size(large);
  }
}

// Minimum tile heights for each layout (Small, Medium, Large)
$local-mosaic-heights-layout: (
  (440px, 540px, 640px),
  (440px, 540px, 640px),
  (280px, 330px, 380px),
  (430px, 480px, 530px),
  (280px, 330px, 380px)
);

$local-space-small: 10px;
$local-space-large: 20px;

.promo-mosaic--container {
  @extend %layout-container;
}

.promo-mosaic--inner {
  transition: height $duration--small-600 $ease-out--normal;

  @include media($min: $bp-small) {
    display: grid;
    grid-gap: $local-space-small;
  }

  @include media($min: $bp-xl) {
    grid-gap: $local-space-large;
  }

  .promo-block {
    height: 100%;
  }

  // The extra selectors are to beat out specificity rules :P
  html body .home-section--content & {
    &.promo-mosaic--compressed {
      .promo-block,
      .promo-block--content {
        @include media($max: $bp-small) {
          min-height: 120px; // IE 11
          min-height: unset; // Everything else
        }
      }
    }
  }

  @for $i from 1 through 5 {
    &.promo-mosaic--layout-#{$i} {
      .promo-mosaic--height-small & {
        .promo-block,
        .promo-block--content {
          min-height: nth(nth($local-mosaic-heights-layout, $i), 1) * 0.85;

          @include media($min: $bp-medium) {
            min-height: nth(nth($local-mosaic-heights-layout, $i), 1);
          }
        }

        &.promo-mosaic--maintain-aspect-ratio {
          @include media($min: $bp-small, $max: $max-width) {
            .promo-block,
            .promo-block--content {
              min-height: vw(nth(nth($local-mosaic-heights-layout, $i), 1));
            }
          }
        }
      }

      .promo-mosaic--height-medium & {
        .promo-block,
        .promo-block--content {
          min-height: nth(nth($local-mosaic-heights-layout, $i), 2) * 0.85;

          @include media($min: $bp-medium) {
            min-height: nth(nth($local-mosaic-heights-layout, $i), 2);
          }
        }

        &.promo-mosaic--maintain-aspect-ratio {
          @include media($min: $bp-small, $max: $max-width) {
            .promo-block,
            .promo-block--content {
              min-height: vw(nth(nth($local-mosaic-heights-layout, $i), 2));
            }
          }
        }
      }

      .promo-mosaic--height-large & {
        .promo-block,
        .promo-block--content {
          min-height: nth(nth($local-mosaic-heights-layout, $i), 3) * 0.85;

          @include media($min: $bp-medium) {
            min-height: nth(nth($local-mosaic-heights-layout, $i), 3);
          }
        }

        &.promo-mosaic--maintain-aspect-ratio {
          @include media($min: $bp-small, $max: $max-width) {
            .promo-block,
            .promo-block--content {
              min-height: vw(nth(nth($local-mosaic-heights-layout, $i), 3));
            }
          }
        }
      }
    }
  }

  @include media($min: $bp-xl) {
    .promo-block--header {
      @include font-size-heading-2;
    }

    .promo-block--text {
      @include font-size-body-medium;
    }

    .promo-block--button {
      @include button-size(medium);
      margin-top: $font-heading-medium;
    }
  }

  &.promo-mosaic--layout-1 {
    @include media($min: $bp-small) {
      .promo-block--header {
        @include font-size-heading-medium;
      }

      .promo-block--text {
        @include font-size-body-medium;
      }

      .promo-block--button {
        @include button-size(medium);
      }
    }

    @include media($min: $bp-xl) {
      .promo-block--header {
        @include font-size-heading-large;
      }

      .promo-block--text {
        @include font-size-body-large;
      }

      .promo-block--button {
        @include button-size(large);
      }
    }
  }

  &.promo-mosaic--layout-2 {
    @include media($min: $bp-small) {
      grid-template-columns: 2fr 1fr;

      .promo-block--index-1 {
        .promo-block--header {
          @include font-size-heading-medium;
        }

        .promo-block--text {
          @include font-size-body-medium;
        }

        .promo-block--button {
          @include button-size(medium);
        }
      }

      .promo-block--index-2 {
        .promo-block--header,
        .promo-block--text {
          max-width: 70%;
        }
      }
    }

    @include media($min: $bp-xl) {
      .promo-block--index-1 {
        .promo-block--header {
          @include font-size-heading-large;
        }

        .promo-block--text {
          @include font-size-body-large;
        }

        .promo-block--button {
          @include button-size(large);
        }
      }
    }
  }

  &.promo-mosaic--layout-3 {
    @include media($min: $bp-small) {
      grid-template-columns: 2fr 1fr;

      .promo-block--index-1 {
        grid-row-start: span 2;

        .promo-block--header {
          @include font-size-heading-medium;
        }

        .promo-block--text {
          @include font-size-body-medium;
        }

        .promo-block--button {
          @include button-size(medium);
        }
      }

      .promo-block--index-2,
      .promo-block--index-3 {
        .promo-block--header,
        .promo-block--text {
          max-width: 70%;
        }
      }
    }

    @include media($min: $bp-xl) {
      .promo-block--index-1 {
        .promo-block--header {
          @include font-size-heading-large;
        }

        .promo-block--text {
          @include font-size-body-large;
        }

        .promo-block--button {
          @include button-size(large);
        }
      }
    }
  }

  &.promo-mosaic--layout-4 {
    @include media($min: $bp-small) {
      grid-template-columns: 1fr 1fr 1fr;

      .promo-block--index-1,
      .promo-block--index-4 {
        grid-column-start: span 2;

        .promo-block--header {
          @include font-size-heading-medium;
        }

        .promo-block--text {
          @include font-size-body-medium;
        }

        .promo-block--button {
          @include button-size(medium);
        }
      }

      .promo-block--index-2,
      .promo-block--index-3 {
        .promo-block--header,
        .promo-block--text {
          max-width: 70%;
        }
      }
    }

    @include media($min: $bp-xl) {
      .promo-block--index-1,
      .promo-block--index-4 {
        .promo-block--header {
          @include font-size-heading-large;
        }

        .promo-block--text {
          @include font-size-body-large;
        }

        .promo-block--button {
          @include button-size(large);
        }
      }
    }
  }

  &.promo-mosaic--layout-5 {
    @include media($min: $bp-small) {
      grid-template-columns: 2fr 1fr;

      .promo-block--index-1,
      .promo-block--index-4 {
        grid-row-start: span 3;

        .promo-block--header {
          @include font-size-heading-medium;
        }

        .promo-block--text {
          @include font-size-body-medium;
        }

        .promo-block--button {
          @include button-size(medium);
        }
      }

      .promo-block--index-2,
      .promo-block--index-3,
      .promo-block--index-5 {
        grid-row-start: span 2;

        .promo-block--header,
        .promo-block--text {
          max-width: 70%;
        }
      }
    }

    @include media($min: $bp-xl) {
      .promo-block--index-1,
      .promo-block--index-4 {
        .promo-block--header {
          @include font-size-heading-large;
        }

        .promo-block--text {
          @include font-size-body-large;
        }

        .promo-block--button {
          @include button-size(large);
        }
      }
    }
  }

  // This is the fallback for IE11 because display: grid does not work there
  @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
    @include media($min: $bp-small) {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      align-items: stretch;
      justify-content: space-between;
    }

    &.promo-mosaic--layout-1 {
      .promo-block {
        @include media($min: $bp-small) {
          width: 100%;
          margin: 0;
        }
      }
    }

    .promo-block {
      @include media($min: $bp-small) {
        width: calc(50% - #{$local-space-small / 2});
        flex: 0 1 auto;
        margin-top: $local-space-small;

        &:nth-child(1),
        &:nth-child(2) {
          margin-top: 0;
        }

        &:nth-child(2n - 1) {
          margin-right: $local-space-small / 2;
        }

        &:nth-child(2n) {
          margin-left: $local-space-small / 2;
        }

        .promo-block--header {
          @include font-size-heading-medium;
        }

        .promo-block--text {
          @include font-size-body-medium;
        }

        .promo-block--button {
          @include button-size(medium);
        }
      }

      @include media($min: $bp-xl) {
        width: calc(50% - #{$local-space-large / 2});
        margin-top: $local-space-large;

        &:nth-child(2n - 1) {
          margin-right: $local-space-large / 2;
        }

        &:nth-child(2n) {
          margin-left: $local-space-large / 2;
        }
      }
    }
  }
}

// Block heights (Small, Medium, Large)
$local-grid-block-heights: (300px, 375px, 450px);

$local-space-small: 10px;
$local-space-large: 20px;

.promo-grid--container {
  @extend %layout-container;
}

.promo-grid--inner {
  width: 100%;

  @include media($min: $bp-small) {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-gap: $local-space-small;
    grid-row-start: span 1;
  }

  @include media($min: $bp-xl) {
    grid-gap: $local-space-large;
  }

  .promo-block {
    @include media($min: $bp-small) {
      &.promo-grid--full-width {
        grid-column-start: span 2;
      }

      height: 100%;
    }

    .promo-grid--height-small & {
      @include media($min: $bp-small) {
        min-height: nth($local-grid-block-heights, 1) * 0.85;
      }

      @include media($min: $bp-medium) {
        min-height: nth($local-grid-block-heights, 1);
      }

      &.promo-mosaic--maintain-aspect-ratio {
        @include media($min: $bp-small, $max: $max-width) {
          min-height: vw(nth($local-grid-block-heights, 1));
        }

        .promo-block--content.promo-block--expanded,
        .promo-block--content.animating-in {
          @include media($max: $bp-small) {
            min-height: calc(#{vw(nth($local-grid-block-heights, 1))} * 2);
          }
        }
      }
    }

    .promo-grid--height-medium & {
      @include media($min: $bp-small) {
        min-height: nth($local-grid-block-heights, 2) * 0.85;
      }

      @include media($min: $bp-medium) {
        min-height: nth($local-grid-block-heights, 2);
      }

      &.promo-mosaic--maintain-aspect-ratio {
        @include media($min: $bp-small, $max: $max-width) {
          min-height: vw(nth($local-grid-block-heights, 2));
        }

        .promo-block--content.promo-block--expanded,
        .promo-block--content.animating-in {
          @include media($max: $bp-small) {
            min-height: calc(#{vw(nth($local-grid-block-heights, 2))} * 2);
          }
        }
      }
    }

    .promo-grid--height-large & {
      @include media($min: $bp-small) {
        min-height: nth($local-grid-block-heights, 3) * 0.85;
      }

      @include media($min: $bp-medium) {
        min-height: nth($local-grid-block-heights, 3);
      }

      &.promo-mosaic--maintain-aspect-ratio {
        @include media($min: $bp-small, $max: $max-width) {
          min-height: vw(nth($local-grid-block-heights, 3));
        }

        .promo-block--content.promo-block--expanded,
        .promo-block--content.animating-in {
          @include media($max: $bp-small) {
            min-height: calc(#{vw(nth($local-grid-block-heights, 3))} * 2);
          }
        }
      }
    }
  }
  // This is the fallback for IE11 because display: grid does not work there
  @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
    @include media($min: $bp-small) {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      align-items: stretch;
      justify-content: space-between;
    }

    &.promo-mosaic--layout-1 {
      .promo-block {
        @include media($min: $bp-small) {
          width: 100%;
          margin: 0;
        }
      }
    }

    .promo-block {
      @include media($min: $bp-small) {
        width: calc(50% - #{$local-space-small / 2});
        flex: 0 1 auto;
        margin-top: $local-space-small;

        &:nth-child(1),
        &:nth-child(2) {
          margin-top: 0;
        }

        &:nth-child(2n - 1) {
          margin-right: $local-space-small / 2;
        }

        &:nth-child(2n) {
          margin-left: $local-space-small / 2;
        }

        .promo-block--header {
          @include font-size-heading-medium;
        }

        .promo-block--text {
          @include font-size-body-medium;
        }

        .promo-block--button {
          @include button-size(medium);
        }
      }

      @include media($min: $bp-xl) {
        width: calc(50% - #{$local-space-large / 2});
        margin-top: $local-space-large;

        &:nth-child(2n - 1) {
          margin-right: $local-space-large / 2;
        }

        &:nth-child(2n) {
          margin-left: $local-space-large / 2;
        }
      }
    }
  }
}

$local-max-width: rem(520px);
$local-space: rem(20px);
$local-title-spacing: rem(24px);
$local-mobile-image: rem(48px);
$local-chevron-width: rem(14px);

.menulist--container {
  @extend %layout-container;
}

.menulist--inner {
  @extend %box-shadow;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  justify-content: flex-start;
}

.menulist--item {
  position: relative;
  flex-grow: 0;
  flex-shrink: 0;
  width: 100%;
  border-bottom: 1px solid $color-border-soft;

  &:last-child {
    border-bottom: 0;
  }

  @include media($min: $bp-small) {
    padding: $space-large $local-space;
  }

  @include media($min: $bp-small, $max: $bp-medium) {
    width: 50%;
    font-size: 0;

    &:nth-last-child(2):nth-child(odd), // Second to last, only when even blocks
    .menulist--blocks-count-1 &,
    .menulist--blocks-count-2 & {
      border-bottom: 0;
    }

    &:nth-child(2n + 1) {
      border-right: 1px solid $color-border-soft;
    }
  }

  @include media($min: $bp-medium) {
    width: percentage(1 / 3);
    font-size: 0;

    .menulist--blocks-count-1 &,
    .menulist--blocks-count-2 & {
      width: 50%;
    }

    .menulist--blocks-count-1 &,
    .menulist--blocks-count-2 &,
    .menulist--blocks-count-3 & {
      border-right: 1px solid $color-border-soft;
      border-bottom: 0;

      &:last-child {
        border-right: 0;
      }
    }

    .menulist--blocks-count-4 &,
    .menulist--blocks-count-5 & {
      border-right: 1px solid $color-border-soft;

      &.menulist--item-4,
      &.menulist--item-5 {
        width: 50%;
        border-bottom: 0;
      }

      &.menulist--item-3,
      &.menulist--item-5 {
        border-right: 0;
      }
    }

    .menulist--blocks-count-6 & {
      border-right: 1px solid $color-border-soft;

      &:nth-child(3n) {
        border-right: 0;
      }

      &:nth-child(n + 4) {
        border-bottom: 0;
      }
    }
  }
}

.menulist--item--inner {
  @include media($min: $bp-small) {
    width: 100%;
    max-width: $local-max-width;
    margin-right: auto;
    margin-left: auto;
  }
}

.menulist--image {
  position: relative;

  @include media($max: $bp-small) {
    position: absolute;
    top: rem(10px);
    right: $local-chevron-width + ($local-space * 1.5);
    width: $local-mobile-image;
    height: $local-mobile-image;
  }

  @include media($min: $bp-small) {
    @include font-size-body;
    display: inline-block;
    width: 35%;
    vertical-align: top;
  }

  img,
  svg {
    max-width: 100%;
  }
}

.menulist--content {

  @include media($min: $bp-small) {
    @include font-size-body;
    display: inline-block;
    width: 55%;
    margin-left: 10%;
    vertical-align: top;
  }
}

.menulist--title {
  @include font($font-heading, $font-weight: false, $font-style: false);
  @include font-size-heading-5;
  position: relative;
  padding: $local-title-spacing $local-space;
  margin: 0;
  color: $color-heading;
  cursor: pointer;

  @include media($max: $bp-small) {
    padding-right: $local-mobile-image + $local-chevron-width + ($local-space * 1.5);
  }

  @include media($min: $bp-small) {
    padding: 0;
    cursor: inherit;
  }
}

.menulist-title-icon {
  position: absolute;
  top: 50%;
  right: $local-space * 0.75;
  display: block;
  width: $local-chevron-width;
  height: 8px;
  margin-top: -4px;
  opacity: 0.5;

  @include media($min: $bp-small) {
    display: none;
  }

  .icon-chevron-down-left,
  .icon-chevron-down-right {
    transition-duration: $duration--zero;
  }
}

.menulist--menu {
  @include font-size-body-small;
  padding: 0;
  margin-top: 0;
  margin-bottom: 0;
  line-height: 1.5;
  list-style: none;

  .accordion--active & {
    padding-bottom: $local-space + rem(10px);
  }

  @include media($min: $bp-small) {
    max-height: inherit;
    padding: 0;
    margin-top: rem(8px);
    opacity: 1;
  }
}

.menulist--menu-item {
  padding-right: $local-space;
  padding-left: $local-space;

  &:not(:first-child) {
    margin-top: rem(2px);
  }

  @include media($min: $bp-small) {
    padding-right: 0;
    padding-left: 0;
  }

  &.menulist--menu-item-hidden {
    display: none;
  }

  &.menulist--menu-item-trigger {
    margin-top: rem(8px);
  }
}

.menulist--menu-link {
  @extend %link--text;
  display: inline-block;
  text-decoration: none;

  @include media($max: $bp-small) {
    display: block;
    padding-top: rem(4px);
    padding-bottom: rem(4px);
  }

  .menulist--menu-item-trigger & {
    @extend %link--default;
  }
}

$local-space-small: 10px;
$local-space-large: 20px;

$local-blog-width-xs: 260px;
$local-blog-width-small: 280px;
$local-blog-width-medium: 323px;

$local-2-up-max: ($local-blog-width-small * 2) + ($local-space-small * 2);

.blogposts--container {
  @extend %layout-container;
  position: relative;

  @include media($max: $bp-large) {
    overflow: hidden;
  }
}

.blogposts--inner {
  padding: 0;
  list-style-type: none;
  outline: 0;

  &:not(.flickity-enabled),
  .flickity-slider {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    justify-content: space-between;
    transition: width $duration--small-200 $ease-in-out--normal;
  }

  &.flickity-enabled {
    display: block;
    width: 100%;
    cursor: grab;
  }

  &:not(.flickity-enabled) {
    @include media($max: $bp-medium) {
      flex-direction: column;

      .article--excerpt-wrapper:not(:first-child) {
        @include media($max: $bp-large) {
          margin-top: $space-large;
        }
      }
    }
  }

  .article--excerpt-wrapper {
    @include font-size-body;
    width: rem($local-blog-width-xs);
    min-height: 100%;

    &:not(:last-child) {
      margin-right: $local-space-small;
    }

    .blogposts--count-1 &,
    .blogposts--count-3 & {
      @include media($min: $bp-xxxs) {
        width: rem($local-blog-width-small);
      }

      @include media($min: $bp-small, $max: $bp-large) {
        width: rem($local-blog-width-medium);
      }

      @include media($min: $bp-large) {
        width: calc(#{percentage(1 / 3)} - #{$local-space-small * 2 / 3});
      }

      @include media($min: $bp-xl) {
        width: calc(#{percentage(1 / 3)} - #{$local-space-large * 2 / 3});
      }
    }

    .blogposts--count-2 & {
      width: rem($local-blog-width-small);

      @include media($min: $local-2-up-max) {
        width: calc(50% - #{$local-space-small / 2});
      }

      @include media($min: $bp-xl) {
        width: calc(50% - #{$local-space-large / 2});
      }
    }
  }
}

.blogposts--footer {
  margin-top: $space-medium;
  text-align: center;
}

.blogposts--footer-link {
  @extend %link--default;
  line-height: 1;
}

.blogposts--footer-icon {
  @extend %inline-chevron;
  margin-left: rem(1px);
}

$local-space-small: rem(10px);
$local-space-medium: rem(15px);
$local-space-large: rem(20px);

$logo-size-small: 90px;
$logo-size-medium: 120px;
$logo-size-large: 160px;

.logolist--container {
  @extend %layout-container;
}

.logolist--inner {
  @include grid-gutter($local-space-small);
  font-size: 0;
  text-align: center;

  @include media($min: $bp-small) {
    @include grid-gutter($local-space-medium);
  }

  @include media($min: $bp-xxl) {
    @include grid-gutter($local-space-large);
  }
}

.logolist--item {
  @include font-size-body;
  position: relative;
  display: inline-block;
  width: $logo-size-small;
  margin-top: $local-space-small * 2;
  margin-right: $local-space-small;
  margin-left: $local-space-small;
  vertical-align: middle;
  transition:
    width $duration--small-200 $ease-in-out--normal,
    margin $duration--small-200 $ease-in-out--normal;

  &:nth-child(-n + 2) {
    @include media($max: 345px) {
      margin-top: 0;
    }
  }

  &:nth-child(-n + 3) {
    @include media($min: 345px, $max: 455px) {
      margin-top: 0;
    }
  }

  &:nth-child(-n + 4) {
    @media screen and (min-width: 455px) and (max-width: (565px - 1px)),
      screen and (min-width: $bp-small) and (max-width: (755px - 1px)) {
      margin-top: 0;
    }
  }

  &:nth-child(-n + 5) {
    @media screen and (min-width: 565px) and (max-width: (675px - 1px)),
      screen and (min-width: 755px) and (max-width: (905px - 1px)),
      screen and (min-width: $bp-large) and (max-width: (1175px - 1px)) {
      margin-top: 0;
    }
  }

  &:nth-child(-n + 6) {
    @media screen and (min-width: 675px) and (max-width: ($bp-small - 1px)),
      screen and (min-width: 905px) and (max-width: ($bp-large - 1px)),
      screen and (min-width: 1175px) {
      margin-top: 0;
    }
  }

  @include media($min: $bp-small) {
    width: $logo-size-medium;
    margin-top: $local-space-medium * 2;
    margin-right: $local-space-medium;
    margin-left: $local-space-medium;
  }

  @include media($min: $bp-large) {
    width: $logo-size-large;
  }

  @include media($min: $bp-xxl) {
    margin-top: $local-space-large * 2;
    margin-right: $local-space-large;
    margin-left: $local-space-large;

    &:nth-child(-n + 6) {
      margin-top: 0;
    }
  }
}

.logolist--link {
  display: block;
}

.logolist--image {
  display: block;
  max-width: 100%;
  max-height: $logo-size-small;
  margin: 0 auto;

  @include media($min: $bp-small) {
    max-height: $logo-size-medium;
  }

  @include media($min: $bp-large) {
    max-height: $logo-size-large;
  }
}

$local-avatar-size: rem(45px);
$local-tweet-width: 276px;

$local-padding-small: rem(20px);
$local-padding-large: rem(25px);

.twitter--container {
  @extend %layout-container;
  position: relative;
  overflow: hidden;
}

.twitter--inner {
  outline: 0;

  &:not(.flickity-enabled),
  .flickity-slider {
    @extend %box-shadow;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    justify-content: flex-start;
    transition: width $duration--small-200 $ease-in-out--normal;
  }

  &:not(.flickity-enabled) {
    @include media($max: $bp-medium) {
      flex-direction: column;
    }
  }

  &.flickity-enabled {
    display: block;
    width: 100%;
    cursor: grab;
  }

  .flickity-slider {
    @include media($max: $bp-medium) {
      @for $i from 1 through 3 {
        .tweet--count-#{$i} & {
          width: rem($local-tweet-width * $i);
        }
      }
    }
  }
}

.tweet--wrapper {
  display: flex;
  align-items: flex-start;
  flex-direction: column;
  flex-grow: 0;
  flex-shrink: 0;
  justify-content: flex-start;
  min-width: $local-tweet-width;
  min-height: 100%;
  padding: $local-padding-small;
  overflow: hidden;
  white-space: normal;
  border-right: 1px solid $color-border-soft;
  transition:
    width $duration--small-400 $ease-in-out--normal,
    padding $duration--small-400 $ease-in-out--normal;

  // Mobile styling before flickity kicks in
  .twitter--inner:not(.flickity-enabled) &{
    @include media($max: $bp-medium) {
      display: block;
      width: 100%;
      border-right: 0;

      &:not(:first-child) {
        border-top: 1px solid $color-border-soft;
      }
    }
  }

  @include media($min: $bp-xl) {
    padding: $local-padding-large;
  }

  .tweet--count-1 & {
    width: 100%;
  }

  .tweet--count-2 & {
    width: 50%;
  }

  .tweet--count-3 & {
    width: percentage(1 / 3);
  }

  &:last-child {
    border-right: 0;
  }

  a {
    text-decoration: none;
    word-wrap: break-word;
  }
}

.tweet--header {
  display: block;
  flex-grow: 0;
  flex-shrink: 0;
  font-size: 0;
}

.tweet--header-image,
.tweet--header-authorinfo {
  display: inline-block;
  vertical-align: middle;
}

.tweet--header-image {
  display: none;
}

.tweet--header-authorinfo {
  max-width: 100%;
  margin-top: 1px;
  margin-bottom: 0;
}

.tweet--header-name {
  @include font-size-heading-5;
  display: block;
  color: $color-heading;
  text-decoration: none;
}

.tweet--header-screenname {
  @extend %link--text;
  @include font($font-body);
  @include font-size-heading-6;
  display: block;
  color: $color-text-light;
  line-height: 1.5;
  letter-spacing: 0;
  text-transform: none;
}

.tweet--content {
  flex-grow: 0;
  flex-shrink: 0;
  max-width: 100%;
  max-height: 100%;
  margin-top: $space-large;

  a {
    @extend %link--default;
    display: inline-block;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: normal;
    vertical-align: top;
  }

  // offset content vertically by the difference of the line-height minus font size
  .tweet {
    @include font-size-body;
    margin-top: -1px * ((1.6 * $font-body-size) - $font-body-size) / 2;
    margin-bottom: 0;
    line-height: 1.6;
    text-overflow: ellipsis;
    word-wrap: break-word;

    img {
      display: inline-block;
      height: rem($font-body-size + 6px);
      margin-top: -1 * rem(5px);
      vertical-align: baseline;
    }
  }

  .media {
    display: inline-block;
    float: left;
    width: 35%;
    max-width: 140px;
    margin-right: rem(25px);
    margin-bottom: rem(7px);

    img {
      display: block;
      max-width: 100%;
    }
  }
}

.tweet--footer {
  @extend %link--text;
  padding-top: $space-small;
  margin-top: auto;
  clear: left;
  font-size: 0;
}

.tweet--footer--posted,
.tweet--footer--icon {
  @include font-size-body-small;
  display: inline-block;
  vertical-align: middle;
}

.tweet--footer--posted {
  margin-left: rem(8px);
  color: $color-text-light;

  &:hover {
    color: $color-link;
  }
}

.tweet--footer--icon {

  svg {
    display: block;
    color: $color-twitter;
  }
}

.twitter--placeholder-posted,
.twitter--placeholder-name,
.twitter--placeholder-screenname {
  display: inline-block;
  vertical-align: middle;
}

.twitter--placeholder-name {
  width: 100px;
  height: $font-h5-size;
}

.twitter--placeholder-screenname {
  width: 100px;
  height: $font-h6-size;
}

.twitter--placeholder-tweet {
  width: 100%;
}

.twitter--placeholder-tweet-line {
  display: block;
  height: 1em;
  max-width: 100%;
  margin-top: 0.44em;

  &:nth-child(1) {
    width: 204px;
  }

  &:nth-child(2) {
    width: 180px;
  }

  &:nth-child(3) {
    width: 160px;
  }
}

.twitter--placeholder-posted {
  width: 80px;
  height: 1em;
}

$local-space-small: 10px;
$local-space-large: 15px;

.collection-list--container {
  @extend %layout-container;
}

.collection-list--inner {
  @extend %clearfix;
  list-style-type: none;
  padding-left: 0;
}

$local-padding-small: 15px;
$local-padding-medium: 20px;

$local-space-small: 10px;
$local-space-large: 20px;

$local-item-width: 220px;

.featured-collection--container {
  @extend %layout-container;
  position: relative;
  text-align: center;

  // This is to allow the absolutely positioned inner
  // elements to appear above any sibling elements
  &:hover {
    z-index: 2;
  }
}

.featured-collection--content {
  position: relative;
  display: flex;
  width: 100%;
  padding: 0;
  text-align: initial;
  outline: none;

  .productgrid--item {
    width: calc(214px - #{$local-space-small});
    margin-right: $local-space-small;
  }

  &[data-layout="grid"] {
    flex-wrap: nowrap;

    @include media($max: $bp-xl) {
      &:not(.flickity-enabled) {
        overflow: hidden;
      }
    }

    @include media($min: $bp-xl) {
      flex-wrap: wrap;

      .productgrid--item {
        flex-grow: 1;
        width: calc(100% / 5 - #{$local-space-large});
        margin-right: $local-space-large;

        &:nth-child(n + 6) {
          margin-top: $local-space-large;
        }

        &:nth-child(5n) {
          margin-right: 0;
        }
      }

      @supports(display: grid) {
        display: grid;
        padding: 0;
        grid-template-columns: repeat(5, 1fr);
        grid-column-gap: $local-space-large;
        column-gap: $local-space-large;
        grid-row-gap: $local-space-large;
        row-gap: $local-space-large;

        .productgrid--item {
          width: 100%;
          margin-right: 0;

          &:nth-child(n + 6) {
            margin-top: 0;
          }
        }
      }
    }
  }

  &[data-layout="slideshow"] {
    @include media($min: $bp-xl, $max: $bp-xxxl) {
      padding-right: 60px;
      padding-left: 60px;
    }

    .productgrid--item {
      width: calc(214px - #{$local-space-small});

      @include media($min: $bp-xl) {
        // Calculate the approximate spacing between where x equals $local-space-large
        // -x subtracts the margin from the width and x/5 adds the 5th items margin back
        // (-x + x/4) = -4x/4 + x/4 = (-4x + x)/4 = (x(-4 + 1))/4 = -3x/4
        width: calc(100% / 4 - #{(3 * $local-space-large) / 4});
        margin-right: $local-space-large;
      }

      @include media($min: $bp-xxl) {
        // Calculate the approximate spacing between where x equals $local-space-large
        // -x subtracts the margin from the width and x/5 adds the 5th items margin back
        // (-x + x/5) = -5x/5 + x/5 = (-5x + x)/5 = (x(-5 + 1))/5 = -4x/5
        width: calc(100% / 5 - #{(4 * $local-space-large) / 5});
      }
    }

    &:not(.flickity-enabled) {
      overflow: hidden;
    }
  }

  &.flickity-enabled {
    cursor: grab;

    .productgrid--item {
      height: inherit;
    }
  }

  .flickity-viewport {
    position: relative;
  }

  .flickity-slider--wrapper {
    position: absolute;
    top: 0;
    left: 0;
    // Because the overflow is on this element, but this element is within ancestors that have
    // padding that we must exceed, we need to accomodate that in both the width, margin, and padding.
    // These values are taken from the extends %layout-container.
    width: calc(100% + #{2 * $gutter-outer-small});
    // By inheriting the height, and then expecting a minimum of twice that amount
    // we can successfully hide the overflow in the horizontal axis without impacting
    // the overflow over the vertical axis. This is because this element is absolutely positioned
    // and only available when Flickity is visible, which means we do not get elements breaking
    // onto a new line when the additional height is set.
    height: inherit;
    min-height: 200%;
    // See note about the width, to understand the usage of these paddings and margins.
    padding-right: $gutter-outer-small;
    padding-left: $gutter-outer-small;
    margin-left: -$gutter-outer-small;
    overflow: hidden;
    pointer-events: none;

    @include media($min: $bp-small) {
      width: calc(100% + #{2 * $gutter-outer-medium});
      padding-right: $gutter-outer-medium;
      padding-left: $gutter-outer-medium;
      margin-left: -$gutter-outer-medium;
    }

    @include media($min: $bp-large) {
      width: calc(100% + #{2 * $gutter-outer});
      padding-right: $gutter-outer;
      padding-left: $gutter-outer;
      margin-left: -$gutter-outer;
    }

    @include media($min: $bp-xl) {
      width: calc(100% + 10px); // Add 5px to each side to ensure shadows arent clipped
      padding-right: 5px;
      padding-left: 5px;
      margin-left: -5px;
    }
  }

  .flickity-slider {
    height: inherit;
    pointer-events: auto;
  }

  .flickity-button {
    z-index: 2;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    background-color: $color-background;
    border-radius: 24px;
    box-shadow: 0 0 0 1px rgba(127, 127, 127, 0.05), 0 2px 5px rgba(127, 127, 127, 0.5);
    transition: (
      transform $duration--small-400 $ease-in-out--normal,
      box-shadow $duration--small-400 $ease-in-out--normal,
      opacity $duration--small-400 $ease-in-out--normal
    );

    @include media($max: $bp-xl) {
      display: none;
    }

    &:disabled {
      cursor: initial;
      opacity: 0.5;

      svg {
        opacity: 0.3;
      }
    }

    &:not(:disabled) {
      &:hover {
        transform: translateY(-50%) scale(1.125);
        box-shadow: 0 0 0 1px rgba(127, 127, 127, 0.05), 0 3px 10px rgba(127, 127, 127, 0.5);
      }
    }

    &.previous {
      left: -17px;

      @include media($min: $bp-xl) {
        left: -5px;
      }

      @include media($min: $bp-xxxl) {
        left: -64px;
      }

      svg {
        left: -1px;
      }
    }

    &.next {
      right: -17px;

      @include media($min: $bp-xl) {
        right: -5px;
      }

      @include media($min: $bp-xxxl) {
        right: -64px;
      }

      svg {
        right: -1px;
      }
    }
  }

  .flickity-button-icon {
    position: relative;
    top: initial;
    left: initial;
  }
}

.featured-collection--title-card {
  height: auto;
  background-position: 50% 50%;
  background-repeat: no-repeat;
  background-size: cover;

  &.featured-collection--title-card--placeholder {
    background-color: $color-placeholder-background;

    svg {
      position: absolute;
      top: 50%;
      left: 50%;
      z-index: -1;
      transform: translate(-50%, -50%);
      fill: $color-placeholder-fill;
    }
  }
}

.featured-collection--title-card--outer {
  position: relative;
  display: flex;
  align-items: center;
  flex-grow: 1;
  width: 100%;
  height: 100%;
  padding: $local-padding-small;
  color: currentColor;
  text-decoration: none;

  @include media($min: $bp-medium) {
    padding: $local-padding-medium;
  }

  &::before {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: -1;
    width: 100%;
    height: 100%;
    content: "";
  }
}

.featured-collection--title-card--inner {
  flex-grow: 0;
  width: 100%;
  text-align: center;
  vertical-align: middle;
}

.featured-collection--title-card--pre-heading {
  @include font($font-body);
  @include font-size-body-smaller;
  display: block;
  line-height: 1.2;
}

.featured-collection--title-card--heading {
  @extend %h3;
  display: block;
  margin-top: $space-x-small;
  margin-bottom: 0;
  white-space: normal;
}

.featured-collection--button {
  @include button-size(medium);
  align-self: center;
  margin-top: $space-medium;
  margin-bottom: $space-xxx-small;
}

.search-section {
  position: relative;
  width: 96%;
  max-width: calc(#{$max-width - $gutter-outer * 2});
  margin: 0 auto;
}

.search-section-background,
.search-section-overlay {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  background-size: cover;
}

.search-section-position-top-left {
  background-position: left top;
}

.search-section-position-top-center {
  background-position: center top;
}

.search-section-position-top-right {
  background-position: right top;
}

.search-section-position-center-left {
  background-position: left center;
}

.search-section-position-center-center {
  background-position: center;
}

.search-section-position-center-right {
  background-position: right center;
}

.search-section-position-bottom-left {
  background-position: left bottom;
}

.search-section-position-bottom-center {
  background-position: center bottom;
}

.search-section-position-bottom-right {
  background-position: right bottom;
}

.search-section-content {
  position: relative;
  max-width: 85%;
  padding: 50px 0;
  margin: 0 auto;

  @include media($min: $bp-xl) {
    max-width: 65%;
  }

  .search-section-overlay + & {
    &,
    .search-section-heading {
      color: inherit;
    }
  }
}

.search-section-header {
  margin: 0 auto;
  text-align: center;

  @include media($min: $bp-xs) {
    max-width: 80%;
  }

  p {
    margin-top: 0;
  }
}

.search-section-heading {
  @include font-size-heading-3;
  margin-top: 0;
  margin-bottom: $space-x-small;
  color: $color-heading;
}

.search-section-text {
  margin-top: 0;
  margin-bottom: $space-x-large;
  line-height: 1.5625;
}

.rich-text--container {
  @extend %layout-container;
  margin-top: $gutter-outer * 2;

  @include media($min: $bp-medium) {
    margin-top: $gutter-outer * 3;
  }
}

.rich-text-regular {
  max-width: rem(650px);
}

.rich-text-wide {
  max-width: rem(850px);
}

.rich-text-block {
  margin-bottom: $space-xx-large;

  &:last-child {
    margin-bottom: 0;
  }

  @include media($min: $bp-medium) {
    margin-bottom: $space-xx-large * 1.5;
  }
}

.rich-text-alignment-left {
  text-align: left;
}

.rich-text-alignment-center {
  text-align: center;
}

.rich-text-alignment-right {
  text-align: right;
}

.rich-text-heading {
  @include font-size-heading-4;
  margin-bottom: $space-medium;
  line-height: 1.5;
  color: $color-heading;
}

.rich-text-heading-medium {
  @include font-size-heading-3;
}

.rich-text-heading-large {
  @include font-size-heading-1;
}

.rich-text-content {
  line-height: 1.5;
}

.featured-product--container {
  @extend %layout-container;

  .featured-product--inner {
    @extend %box-shadow;
    padding: $gutter-outer;
  }

  .product-gallery {
    padding: 0;
  }

  .product-main {
    text-align: center;
    padding: 0;
  }

  .product-pricing {
    justify-content: center;
  }

  .product--outer {
    @include media($min: $bp-small) {
      display: flex;
      align-items: center;
    }
  }
}

.custom-html--container {
  @extend %layout-container;
  margin-top: $space-xx-large;

  @include media($min: $bp-large) {
    margin-top: $space-xxx-large;
  }

  .home-section--title {
    @extend %section-heading;
  }
}



$pxs-map-height-small: 400px !default;
$pxs-map-height-medium: 500px !default;
$pxs-map-height-large: 600px !default;

$pxs-map-breakpoint-small: 680px !default;
$pxs-map-breakpoint-large: 1024px !default;

$pxs-map-space-small: 10px !default;
$pxs-map-space-medium: 20px !default;
$pxs-map-space-large: 25px !default;
$pxs-map-space-larger: 50px !default;

$pxs-map-split-map-width: calc(50% - #{$pxs-map-space-small}) !default;
$pxs-map-split-content-width: calc(50% - #{$pxs-map-space-small}) !default;

$pxs-map-content-max-width: 40% !default;
$pxs-map-content-min-width: 280px !default;

$pxs-map-content-background-color: #fff !default;

$pxs-map-heading-margin: 26px !default;

.pxs-map {
  position: relative;
  display: flex;
  justify-content: space-between;
  margin-top: $pxs-map-space-larger;

  @media (max-width: $pxs-map-breakpoint-small) {
    flex-wrap: wrap;
  }
}

.pxs-map-wrapper {
  position: relative;
  width: 100%;
  height: $pxs-map-height-small * 0.7;
  padding: 0;
  background-size: cover;

  @media (min-width: $pxs-map-breakpoint-small) {
    height: $pxs-map-height-small;

    .pxs-map-section-layout-x-outside-left &,
    .pxs-map-section-layout-x-outside-right & {
      width: $pxs-map-split-map-width;
    }
  }

  &.pxs-map-wrapper-height-medium {
    height: $pxs-map-height-medium * 0.7;

    @media (min-width: $pxs-map-breakpoint-small) {
      height: $pxs-map-height-medium;
    }
  }

  &.pxs-map-wrapper-height-large {
    height: $pxs-map-height-large * 0.7;

    @media (min-width: $pxs-map-breakpoint-small) {
      height: $pxs-map-height-large;
    }
  }

  .pxs-map-image {
    position: absolute;
    width: 1px;
    height: 1px;
    overflow: hidden;
    opacity: 0;

    &[data-rimg="noscript"] {
      position: relative;
      width: 100%;
      height: 100%;
      opacity: 1;
      object-fit: cover;
    }
  }
}

.pxs-map-overlay {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;

  .pxs-map-section-layout-x-outside-left &,
  .pxs-map-section-layout-x-outside-right & {
    display: none;
  }

  @media (max-width: $pxs-map-breakpoint-small) {
    display: none;
  }
}

.pxs-map-container {
  position: relative;
  width: 100%;
  height: 100%;
}

.pxs-map-error-message {
  display: flex;
  align-items: center;
  flex-direction: column;
  justify-content: center;
  width: 100%;
  height: 100%;
  padding: $pxs-map-space-medium;

  p {
    margin: 0;
    text-align: center;
  }

  a {
    color: inherit;
  }
}

.pxs-map-card-wrapper {
  width: 100%;

  @media (max-width: $pxs-map-breakpoint-small) {
    .pxs-map-section-layout-mobile-above & {
      order: -1;
      margin-bottom: $pxs-map-space-medium;
    }

    .pxs-map-section-layout-mobile-below & {
      margin-top: $pxs-map-space-medium;
    }
  }

  @media (min-width: $pxs-map-breakpoint-small) {
    position: absolute;
    top: $pxs-map-space-medium;
    right: $pxs-map-space-medium;
    bottom: $pxs-map-space-medium;
    left: 0;
    display: flex;
    align-items: flex-start;
    justify-content: flex-start;
    padding: 0 $pxs-map-space-medium;

    .pxs-map-section-layout-x-outside-left &,
    .pxs-map-section-layout-x-outside-right & {
      position: static;
      width: $pxs-map-split-content-width;
      padding: 0;
      background-color: $pxs-map-content-background-color;
    }

    .pxs-map-section-layout-x-outside-left & {
      order: -1;
    }

    .pxs-map-section-layout-y-outside-center &,
    .pxs-map-section-layout-y-overlay-center & {
      align-items: center;
    }

    .pxs-map-section-layout-y-outside-bottom &,
    .pxs-map-section-layout-y-overlay-bottom & {
      align-items: flex-end;
    }

    .pxs-map-section-layout-x-overlay-center & {
      justify-content: center;
    }

    .pxs-map-section-layout-x-overlay-right & {
      justify-content: flex-end;
    }
  }

  @media (min-width: $pxs-map-breakpoint-large) {
    top: $pxs-map-space-large;
    bottom: $pxs-map-space-large;
    padding: 0 $pxs-map-space-large;
  }
}

.pxs-map-card {
  width: 100%;
  padding: $pxs-map-space-large;
  background-color: $pxs-map-content-background-color;

  @media (max-width: $pxs-map-breakpoint-small) {
    max-width: 100%;
  }

  @media (min-width: $pxs-map-breakpoint-small) {
    right: auto;
    bottom: $pxs-map-space-large;
    left: $pxs-map-space-large;
    width: auto;
    max-width: $pxs-map-content-max-width;
    min-width: $pxs-map-content-min-width;

    .pxs-map-section-layout-x-outside-left &,
    .pxs-map-section-layout-x-outside-right & {
      width: 100%;
      max-width: 100%;
    }
  }
}

.pxs-map-card-text-alignment-left {
  text-align: left;
}

.pxs-map-card-text-alignment-center {
  text-align: center;
}

.pxs-map-card-text-alignment-right {
  text-align: right;
}

.pxs-map-card-heading {
  margin: 0 0 $pxs-map-heading-margin;
}

.pxs-map-card-content p:last-child {
  margin-bottom: 0;
}

// Newsletter variables
$pxs-newsletter-section-width: 100% !default;

$pxs-newsletter-content-width-small: 65% !default;
$pxs-newsletter-content-width-large: 100% !default;

$pxs-newsletter-header-width: 80% !default;

$pxs-newsletter-breakpoint-small: 680px !default;
$pxs-newsletter-breakpoint-large: 1080px !default;

$pxs-newsletter-space-smaller: 12px !default;
$pxs-newsletter-space-small: 20px !default;
$pxs-newsletter-space-medium: 36px !default;
$pxs-newsletter-space-large: 50px !default;
$pxs-newsletter-space-larger: 68px !default;

.pxs-newsletter-section {
  position: relative;
  width: $pxs-newsletter-section-width;

  .newsletter-success {
    font-weight: bold;
    text-align: center;
  }
}

.pxs-newsletter {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  max-width: $pxs-newsletter-content-width-large;
  padding: $pxs-newsletter-space-large 0 $pxs-newsletter-space-small;
  margin: 0 auto;

  @media screen and (max-width: $pxs-newsletter-breakpoint-small) {
    flex-direction: column;
  }

  @media (min-width: $pxs-newsletter-breakpoint-large) {
    max-width: $pxs-newsletter-content-width-small;
    padding-top: $pxs-newsletter-space-larger;
  }
}

.pxs-newsletter-figure {
  position: relative;
  flex-shrink: 1;
  order: 0;
  margin: 0;
  background-size: cover;

  @media screen and (max-width: $pxs-newsletter-breakpoint-small) {
    .pxs-newsletter-mobile-alignment-bottom & {
      order: 1;
    }
  }

  @media screen and (min-width: $pxs-newsletter-breakpoint-small) {
    .pxs-newsletter-desktop-alignment-right & {
      order: 1;
    }
  }
}

.pxs-newsletter-content {
  display: flex;
  align-items: center;
  flex-direction: column;
  justify-content: center;
  order: 0;
  padding: $pxs-newsletter-space-small;

  @media screen and (min-width: $pxs-newsletter-breakpoint-small) {
    padding: $pxs-newsletter-space-large;
  }
}

.pxs-newsletter-image {
  display: block;
  width: 100%;
  opacity: 0;

  &[data-rimg="noscript"] {
    opacity: 1;
  }
}

.pxs-newsletter-header {
  margin: 0 auto;
  text-align: center;

  @media (min-width: $pxs-newsletter-breakpoint-small) {
    max-width: $pxs-newsletter-header-width;
  }
}

.pxs-newsletter-heading {
  margin-top: 0;
  margin-bottom: $pxs-newsletter-space-smaller;
}

.pxs-newsletter-text {
  margin-top: 0;
  margin-bottom: $pxs-newsletter-space-medium;
}

.pxs-newsletter-form {
  .contact-form {
    margin: 0;
  }
}

.pxs-newsletter-form-fields {
  display: flex;
  align-items: stretch;
  justify-content: center;
}

.pxs-newsletter-form-label {
  display: none;
}

.pxs-newsletter-form-input {
  height: 100%;
  margin: 0;
}

.pxs-newsletter-form-button {
  height: 100%;
}

$pxs-image-with-text-space-smallest: 4px !default;
$pxs-image-with-text-space-smaller: 8px !default;
$pxs-image-with-text-space-small: 12px !default;
$pxs-image-with-text-space-medium: 20px !default;
$pxs-image-with-text-space-large: 28px !default;
$pxs-image-with-text-space-larger: 36px !default;

$pxs-image-with-text-breakpoint-small: 480px !default;
$pxs-image-with-text-breakpoint-medium: 720px !default;
$pxs-image-with-text-breakpoint-large: 1024px !default;

$pxs-image-with-text-content-width-small: 60% !default;
$pxs-image-with-text-content-width-large: 85% !default;

$pxs-image-with-text-section-height-small: 100px !default;
$pxs-image-with-text-section-height-medium: 150px !default;
$pxs-image-with-text-section-height-large: 200px !default;
$pxs-image-with-text-section-height-original: 0 !default;

$local-section-height-small: "small";
$local-section-height-medium: "medium";
$local-section-height-large: "large";
$local-section-height-original: "original";

$pxs-image-original-aspect-mobile-color: #000 !default;

$local-heights:
  $local-section-height-small,
  $local-section-height-medium,
  $local-section-height-large,
  $local-section-height-original;

$local-height-values:
  $pxs-image-with-text-section-height-small,
  $pxs-image-with-text-section-height-medium,
  $pxs-image-with-text-section-height-large,
  $pxs-image-with-text-section-height-original;

.pxs-image-with-text {
  &:not(.pxs-image-with-text-section-height-original) {
    .pxs-image-with-text-background {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    }

    .pxs-image-with-text-image {
      position: absolute;
      width: 1px;
      height: 1px;
      overflow: hidden;
      opacity: 0;

      &[data-rimg="noscript"] {
        width: 100%;
        height: 100%;
        opacity: 1;
        object-fit: cover;
      }
    }
  }

  &.pxs-image-with-text-section-height-original {
    .pxs-image-with-text-content-wrapper {
      @media (min-width: $pxs-image-with-text-breakpoint-small) {
        position: absolute;
        top: $pxs-image-with-text-space-medium;
        right: $pxs-image-with-text-space-medium;
        bottom: $pxs-image-with-text-space-medium;
        left: $pxs-image-with-text-space-medium;
      }
    }
  }
}

.pxs-image-with-text-wrapper {
  position: relative;
}

.pxs-image-with-text-background {
  background-size: cover;

  svg {
    width: 100%;
    height: 100%;
    max-height: 100%;
  }
}

.pxs-image-with-text-overlay {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;

  @media (max-width: $pxs-image-with-text-breakpoint-small) {
    .pxs-image-with-text-section-height-original & {
      display: none;
    }
  }
}

.pxs-image-with-text-content-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: $pxs-image-with-text-space-medium;
  text-align: center;

  .pxs-image-with-text-section-height-original & {
    @media (max-width: $pxs-image-with-text-breakpoint-small) {
      align-items: center;
      justify-content: center;
      padding: $pxs-image-with-text-space-medium;
      text-align: center;
    }
  }
}

@for $i from 1 through 4 {
  .pxs-image-with-text-section-height-#{nth($local-heights, $i)} {
    .pxs-image-with-text-content-position-y-top {
      align-items: flex-start;
      padding-bottom: #{nth($local-height-values, $i) * 1.2 - $pxs-image-with-text-space-medium};

      @media (min-width: $pxs-image-with-text-breakpoint-medium) {
        padding-bottom: #{nth($local-height-values, $i) * 2 - $pxs-image-with-text-space-medium};
      }
    }

    .pxs-image-with-text-content-position-y-center {
      padding: #{nth($local-height-values, $i) * 0.6} $pxs-image-with-text-space-medium;

      @media (min-width: $pxs-image-with-text-breakpoint-medium) {
        padding: #{nth($local-height-values, $i)} $pxs-image-with-text-space-medium;
      }
    }

    .pxs-image-with-text-content-position-y-bottom {
      align-items: flex-end;
      padding-top: #{nth($local-height-values, $i) * 1.2 - $pxs-image-with-text-space-medium};

      @media (min-width: $pxs-image-with-text-breakpoint-medium) {
        padding-top: #{nth($local-height-values, $i) * 2 - $pxs-image-with-text-space-medium};
      }
    }

    .pxs-image-with-text-content-position-x-left {
      justify-content: flex-start;
      text-align: left;
    }

    .pxs-image-with-text-content-position-x-right {
      justify-content: flex-end;
      text-align: right;
    }
  }
}

.pxs-image-with-text-content {
  width: $pxs-image-with-text-content-width-large;
  padding: $pxs-image-with-text-space-smaller 0;

  @media (min-width: $pxs-image-with-text-breakpoint-medium) {
    width: $pxs-image-with-text-content-width-small;
    padding: $pxs-image-with-text-space-small 0;
  }
}

.pxs-image-with-text-text-alignment-left {
  text-align: left;
}

.pxs-image-with-text-text-alignment-center {
  text-align: center;
}

.pxs-image-with-text-text-alignment-right {
  text-align: right;
}

.pxs-image-with-text-heading,
.pxs-image-with-text-subheading {
  color: inherit;

  @media (max-width: $pxs-image-with-text-breakpoint-small) {
    .pxs-image-with-text-section-height-original & {
      color: $pxs-image-original-aspect-mobile-color;
    }
  }
}

.pxs-image-with-text-heading {
  margin-top: 0;
  margin-bottom: $pxs-image-with-text-space-smallest;

  @media (min-width: $pxs-image-with-text-breakpoint-medium) {
    margin-bottom: $pxs-image-with-text-space-small;
  }
}

.pxs-image-with-text-subheading {
  margin: 0;

  p {
    margin-top: 0;

    &:last-child {
      margin-bottom: 0;
    }
  }
}

.pxs-image-with-text-button {
  margin-top: $pxs-image-with-text-space-medium;

  @media (min-width: $pxs-image-with-text-breakpoint-medium) {
    margin-top: $pxs-image-with-text-space-large;
  }

  @media (min-width: $pxs-image-with-text-breakpoint-large) {
    margin-top: $pxs-image-with-text-space-larger;
  }
}

.pxs-image-with-text-link {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}



// Overrides
.pxs-map-section {
  @extend %layout-container;
  width: 100%;
}

.pxs-map-error-message {
  line-height: 1.5;
}

.pxs-map-wrapper {
  @extend %box-shadow;
  border: 0;
}

.pxs-map-card-wrapper {
  .pxs-map-section-layout-x-outside-left &,
  .pxs-map-section-layout-x-outside-right & {
    @extend %box-shadow;
  }
}

.pxs-map-card {
  @extend %box-shadow;
  border: 0;

  .pxs-map-section-layout-x-outside-left &,
  .pxs-map-section-layout-x-outside-right & {
    box-shadow: none;
  }
}

.pxs-map-card-heading {
  @include font-size-heading-3;
  line-height: 1.2;
  color: $color-heading;
}

.pxs-map-card-item-link {
  text-decoration: none;
}

.pxs-newsletter-section {
  @extend %layout-container;

  .form-fields-inline {
    text-align: center;
  }

  .newsletter-success {
    text-align: center;
  }

  .newsletter {
    @include font-size-body;

    .newsletter-input {
      width: calc(60% - #{$gutter-outer-small});
      max-width: rem(360px);
    }

    .newsletter-submit {
      width: auto;
      max-width: 40%;

      .button-primary {
        padding-right: $space-small;
        padding-left: $space-small;
      }
    }
  }
}

.pxs-newsletter-heading {
  @include font-size-heading-4;
  color: $color-heading;

  @include media ($min: $bp-large) {
    @include font-size-heading-3;
  }
}

.pxs-newsletter-text {
  @extend %rte;
  @include font-size-body;
  line-height: 1.5625;
}

.pxs-newsletter-content {
  width: 100%;
}

.pxs-newsletter {
  width: 100%;
  max-width: 100%;
}

.pxs-newsletter-figure,
.pxs-newsletter-figure + .pxs-newsletter-content {
  @include media ($min: $bp-xs) {
    width: 50%;
  }
}

$local-bp-image-with-text-breakpoint-small: 480px;
$local-bp-center-padding-correction-bp-large: 6px;
$local-bp-center-padding-correction-bp-medium: 4px;
$local-bp-base-padding-section-small: 100px;
$local-bp-base-padding-section-medium: 150px;
$local-bp-base-padding-section-large: 200px;

@mixin top-bottom-padding($medium-padding, $large-padding) {
  @include media($min: $bp-small) {
    padding-top: $medium-padding;
    padding-bottom: $medium-padding;
  }

  @include media($min: $bp-xl) {
    padding-top: $large-padding;
    padding-bottom: $large-padding;
  }
}

.pxs-image-with-text-section {
  @extend %layout-container;
  margin-top: $space-xx-large;

  @include media($min: $bp-small) {
    margin-bottom: $space-large;
  }

  @include media($min: $bp-xl) {
    margin-top: $space-xxx-large;
  }
}

.pxs-image-with-text-background svg {
  //scss-lint:disable PlaceholderInExtend
  @extend .placeholder--image;
  //scss-lint:Enable PlaceholderInExtend
}

// Override padding widths
.pxs-image-with-text-content-wrapper,
.pxs-image-with-text-section-height-original .pxs-image-with-text-content-wrapper {
  padding: $space-medium;

  @include media($min: $bp-small) {
    padding: $space-large;
  }

  @include media($min: $bp-xl) {
    padding: $space-x-large;
  }
}

.pxs-image-with-text-section-height-small .pxs-image-with-text-content-wrapper,
.pxs-image-with-text-section-height-medium .pxs-image-with-text-content-wrapper,
.pxs-image-with-text-section-height-large .pxs-image-with-text-content-wrapper {
  padding-right: $space-medium;
  padding-left: $space-medium;

  @include media($min: $bp-small) {
    padding-right: $space-large;
    padding-left: $space-large;
  }

  @include media($min: $bp-xl) {
    padding-right: $space-x-large;
    padding-left: $space-x-large;
  }
}

// Add correction for new padding to small, medium and large section heights
.pxs-image-with-text-section-height-small .pxs-image-with-text-content-position-y-center {
  @include top-bottom-padding(
    $local-bp-base-padding-section-small + $local-bp-center-padding-correction-bp-medium,
    $local-bp-base-padding-section-small + $local-bp-center-padding-correction-bp-large
  );
}

.pxs-image-with-text-section-height-medium .pxs-image-with-text-content-position-y-center {
  @include top-bottom-padding(
    $local-bp-base-padding-section-medium + $local-bp-center-padding-correction-bp-medium,
    $local-bp-base-padding-section-medium + $local-bp-center-padding-correction-bp-large
  );
}

.pxs-image-with-text-section-height-large .pxs-image-with-text-content-position-y-center {
  @include top-bottom-padding(
    $local-bp-base-padding-section-large + $local-bp-center-padding-correction-bp-medium,
    $local-bp-base-padding-section-large + $local-bp-center-padding-correction-bp-large
  );
}

// Overrides when using original aspect ratio
.pxs-image-with-text.pxs-image-with-text-section-height-original {
  .pxs-image-with-text-content-wrapper {
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;

    @include media($max: $bp-small) {
      position: relative;
      justify-content: center;
      text-align: center;
      padding: $gutter-content;
    }

    @include media($min: $bp-small) {
      position: absolute;
    }
  }

  .pxs-image-with-text-heading,
  .pxs-image-with-text-subheading {
    @include media($max: $bp-small) {
      color: $color-black;
    }
  }

  .pxs-image-with-text-overlay {
    @include media($max: $bp-small) {
      display: none;
    }
  }
}

.pxs-image-with-text-heading {
  @include font-size-heading-3;
  line-height: 1.2;

  @include media($min: $bp-small) {
    font-size: $font-heading-medium;
  }

  @include media($min: $bp-xl) {
    font-size: $font-heading-large;
  }
}

.pxs-image-with-text-subheading {
  @include font-size-body;
  line-height: 1.5625;
}

.pxs-image-with-text-button {
  @extend %button-primary;
  padding: $gutter-outer-small $space-xx-small;
  font-size: rem(14px);

  @include media($min: $bp-small) {
    @include font-size-body;
    padding: $space-x-small $gutter-outer-small;
  }

  @include media($min: $bp-xl) {
    @include font-size-heading-5;
    padding: $gutter-outer-medium;
  }
}


// Templates
$local-account-width-small: 500px;
$local-account-width-medium: 640px;

.account-page,
.account-page-masthead,
.account-page-content {
  @extend %page-content;
}

.account-page-masthead {
  @extend %layout-container;
  text-align: left;
  padding-left: 70px;

}

.account-page-content {
  @extend %layout-container;

  a {
    @extend %link--default;
  }

  .form-field {
    margin-bottom: $space-medium;
  }

  .form-fields-columns {

    @include media($min: $bp-small) {
      margin-bottom: -1 * $space-medium;
    }
  }
}

.account-page--two-column {
  @extend %clearfix;

  .account-page--column-half {
    margin-top: $space-xx-large;

    &:first-child {
      margin-top: 0;
    }

    @include media($min: $bp-large) {
      float: left;
      width: 50%;
      margin-top: 0;

      &:nth-child(2) {
        padding-left: $gutter-content * 2;
      }
    }
  }

  .account-page--column-large {
    @include media($min: $bp-large) {
      float: left;
      width: 75%;
      padding-left: 100px;
     
    }
  }

  .account-page--column-small {
    margin-top: $space-x-large + $space-xx-small;

    @include media($min: $bp-large) {
      float: left;
      width: 25%;
      margin-top: 0;
      padding-left: $gutter-content * 2;
    }
  }
}

// Account titles
.account-page-title {
  @include font-size-heading-1;
  margin-top: 0;
  margin-bottom: 0;
  color: $color-heading;

  @include media($min: $bp-large) {
    font-size: $font-heading-medium;
  }
}

.account-page-subtitle {
  @include font-size-heading-5;
  margin-top: 0;
  margin-bottom: $space-x-small;
  color: $color-heading;

  &:not(:first-child) {
    margin-top: $space-x-large;
  }
}

// Account messages
.account-message {
  @extend %form-message;
  margin-bottom: $space-medium;
}

// Login page
.account-login,
.account-recovery {
  display: none;

  &.visible {
    display: block;
  }
}

.account-page-login {

  .account-page-content {
    max-width: $local-account-width-small;
  }

  .account-register {
    margin-top: $space-large;
  }
}

.account-page-login,
.account-page-register {

  .form-action--submit {
    vertical-align: middle;
  }

  .form-action-row--helper {
    margin-top: $space-small;

    a{
      text-decoration: underline;
    }

    @include media($min: $bp-small) {
      display: inline-block;
      margin-top: 0;
      margin-left: $gutter-content;
      vertical-align: middle;
    }
  }

  .form-action-row--helper-item {
    @include font-size-body-small;
    display: block;

    &:not(:first-child) {
      margin-top: $space-xx-small;
    }
  }
}

// Account registration
.account-page-register {
  .account-page-content {
    max-width: $local-account-width-medium;
  }
}

// Account challenges
.shopify-challenge__container {
  margin-top: $space-large;
  text-align: center;

  .btn {
    @extend %button-primary;
  }
}

.account-table {
  width: 100%;
  border-collapse: collapse;

  th,
  td {
    border: 1px solid $color-border-soft;
  }

  th {
    @include font($font-heading);
    @include font-size-body;
    padding-bottom: $space-small;
    text-align: center;
    color: $color-heading;
    background-color: lightgray;
    padding-top: $space-small;
  }

  td {
    @include font-size-body;
    padding-top: $space-medium;
    padding-bottom: $space-medium;
  }
}

// Account overview
.account-order-history {
  .account-page-subtitle {
    @include font-size-heading-5;
    margin-bottom: 0;
  }
}

.account-order-list {
  td:not(:last-child) {
    padding-right: $gutter-content;
  }

  th:first-child {
    width: 40%;
  }

  th:last-child,
  td:last-child {
    text-align: right;
  }
}

// Account address
.account-address-wrapper {
  display: flex;
  flex-wrap: wrap;
  padding-left: 0;
  justify-content: flex-start;
  list-style-type:none;
}

.account-address {
  @extend %box-shadow;
  @include font-size-body;
  flex-grow: 0;
  flex-shrink: 0;
  width: 100%;
  padding: $space-medium;
  margin-top: $gutter-content;

  &:first-child {
    margin-top: 0;
  }

  @include media($min: $bp-xs) {
    width: calc(#{percentage(1 / 2)} - #{$gutter-content / 2});
    margin-right: $gutter-content;

    &:nth-child(2) {
      margin-top: 0;
    }

    &:nth-child(2n) {
      margin-right: 0;
    }
  }
}

.account-info {
  .account-info-block {
    margin-bottom: $space-x-large + $space-xx-small;
    background-color: lightgray;
    padding: 10px;
  }

  @include media($min: $bp-xxs) {
    display: flex;

    .account-info-block {
      flex: 1 0 auto;
      margin-bottom: 0;
    }
  }

  @include media($min: $bp-large) {
    display: block;

    .account-info-block {
      margin-bottom: $space-x-large + $space-xx-small;
    }
  }
}

.account-info-item,
.account-address-item {
  margin-top: $space-small;
  margin-bottom: $space-small;
}

.account-address-item--default {
  font-style: font-style($font-body, $font-style: italic);
}

.account-address-list {
  padding-left: 0;
  margin-top: $space-x-small;
  list-style: none;

  li {
    margin-top: $space-xx-small;
  }
}

.account-address-list-footer {
  margin-top: $space-medium / 2;

  button {
    margin-top: $space-medium / 2;

    &:first-child {
      margin-right: $gutter-content;

      @include media($min: $bp-medium, $max: $bp-large) {
        margin-right: $gutter-content / 2;
      }
    }
  }
}

.account-address-form {
  display: none;

  &.visible {
    display: block;
  }
}

// Account activation + Password reset
.account-page-activate,
.account-page-reset-password {
  .account-page-content {
    max-width: $local-account-width-small;
  }
}

$local-max-width: 680px;

.contact-page-content {
  @extend %layout-container, %page-content;
  max-width: $local-max-width;

  .form-field {
    margin-bottom: $space-medium;
  }

  .form-fields-columns {

    @include media($min: $bp-small) {
      margin-bottom: -1 * $space-medium;
    }
  }

  .contact-message {
    @extend %form-message;
    margin-bottom: $space-medium;
  }

  .contact-form-button {
    @include button-size(medium);
  }
}


// Components
.account-order,
.order-footer {
  text-align: left;

  tr {
    &:first-child {
      .order-item {
        border-top: none;
        border-bottom: none;
      }
    }

    @include media($min: $bp-xs) {
      border-bottom: 1px solid transparentize(border-mix($color-background, $color-black, $color-white), 0.95);

      &:last-child {
        border-bottom: 1px solid $color-border-soft;
      }
    }
  }

  th {
    &.order-item-price,
    &.order-item-quantity,
    &.order-item-total {
      padding-top: 0;
    }
  }

  tbody {
    display: block;
    border-top: 1px solid $color-border-soft;
    border-bottom: 1px solid $color-border-soft;

    @include media($min: $bp-xs) {
      display: table-row-group;
      border-top: none;
      border-bottom: none;
    }
  }

  td {
    padding-left: $gutter-content;
    border-bottom: none;

    &:first-child {
      padding-left: 0;
    }
  }

  .order-footer-value {
    width: 40%;
    text-align: right;

    @include media($min: $bp-xs) {
      width: 20%;
    }
  }

  .order-item {
    display: flex;
    position: relative;
    clear: both;
    align-items: center;
    border-top: 1px solid transparentize(border-mix($color-background, $color-black, $color-white), 0.95);

    @include media($min: $bp-xs) {
      border-top: none;
    }
  }

  .order-item-placeholder {
    display: block;
  }

  .order-item--cell-label {
    @include font($font-heading);
    @include font-size-body-small;
    margin-top: 0;
    margin-bottom: $space-xxx-small;

    @include media($min: $bp-xs) {
      display: none;
    }
  }

  .order-image {
    flex: 0 0 75px;
    margin-right: $gutter-outer-medium;
    align-self: flex-start;

    @include media($min: $bp-xs) {
      flex: 0 0 50px;
      margin-right: $gutter-content;
    }

    img,
    svg {
      display: block;
      width: 75px;
      height: auto;
      max-width: 100%;

      @include media($min: $bp-xs) {
        width: 50px;
      }
    }
  }

  .order-item-title {
    @include font($font-heading);
    @include font-size-heading-5;

    @include media($min: $bp-xs) {
      @include font-size-body;
      display: inline-block;
    }

    a {
      display: inline-block;
      color: $color-heading;
    }

    .order-item-options {
      @include font-size-body-smaller;
      display: block;
      margin-top: $space-xxx-small;
      font-weight: normal;
      color: $color-text-light;
    }
  }

  .discount-list {
    clear: both;
    margin-top: $space-xx-small;
    margin-bottom: 0;
    padding-left: 0;
    font-weight: normal;

    svg {
      height: rem(10px);
      width: rem(10px);
    }
  }

  .order-item-price,
  .order-item-quantity,
  .order-item-total {
    float: left;
    width: 50%;
    text-align: left;
    padding-top: 0;
    padding-left: 0;

    @include media($min: $bp-xxs) {
      float: none;
      clear: none;
      display: inline-block;
      width: 32%;
      vertical-align: top;
    }

    @include media($min: $bp-xs) {
      display: table-cell;
      padding-top: $space-small;
      padding-bottom: $space-small;
      padding-left: $gutter-content;
      text-align: right;
      vertical-align: middle;
    }
  }

  .order-item-price {
    clear: both;

    @include media($min: $bp-xs) {
      width: 20%;
    }
  }

  .order-item-quantity {
    .order-quantity-value {
      margin: 0;
    }

    @include media($min: $bp-xs) {
      width: 14%;
    }
  }

  .order-item-original-price {
    display: block;
    margin-bottom: $space-xxx-small;
    color: $color-text-light;
  }

  .order-item-discount-price {
    display: block;
    color: $color-sale;
  }

  .order-item-total {
    float: none;
    clear: both;
    padding-bottom: $space-large;

    @include media($min: $bp-xs) {
      width: 20%;
      padding-bottom: $space-small;
    }
  }
}

.account-order {
  display: block;

  thead {
    display: none;
  }

  tr {
    display: block;
  }

  td {
    display: block;
  }

  @include media($min: $bp-xs) {
    display: table;

    thead {
      display: table-header-group;
    }

    tr {
      display: table-row;
    }

    td {
      display: table-cell;
    }
  }
}

.order-footer {
  display: table;
  width: 100%;
  margin-top: $space-x-small;

  .order-footer-item {
    display: table-row;

    .order-footer-label,
    .order-footer-value {
      display: table-cell;
      padding-top: $space-xx-small;
      padding-bottom: $space-xx-small;
      line-height: 1.4;
    }

    &:nth-last-child(2) {
      .order-footer-label {
        padding-bottom: $space-small;
      }
    }
  }

  .discount-list-item {
    svg {
      height: rem(12px);
      width: rem(12px);
    }
  }

  .order-footer-total {
    display: table-row;
    border-top: 1px solid $color-border-soft;
    font-weight: bold;

    .order-footer-label,
    .order-footer-value {
      display: table-cell;
      padding-top: $space-small;
    }
  }
}

.account-order-attributes {
  padding-left: 0;
  list-style: none;

  li:not(:first-child) {
    margin-top: $space-xx-small;
  }
}

.account-order-attribute-title {
  @include font($font-body, $font-weight: bolder, $font-family: false);
}

.article--comments-item {
  margin: 0 0 $space-xx-large;
  line-height: 1.6;

  cite {
    @include font-size-body-small;
    font-style: font-style($font-body, $font-style: italic);
    color: $color-text-light;

    strong {
      @include font-size-heading-5;
      color: $color-heading;
    }
  }

  .rte {
    margin-top: $space-xx-small;

    > *:first-child {
      margin-top: 0;
    }

    > *:last-child {
      margin-bottom: 0;
    }
  }
}

.article--comments {
  margin-top: $space-xxx-large;
}

.article--comments-title {
  @include font-size-heading-3;
  margin-top: 0;
  margin-bottom: $space-x-large;
  color: $color-heading;

  .article--comments-form & {
    margin-bottom: $space-medium;
  }
}

.article--comments-form {
  margin-top: $space-xxx-large;

  .form-field--half {
    margin-bottom: $space-medium;
  }

  .form-field-textarea {
    display: block;
    min-height: 200px;
  }

  .button-primary {
    @include button-size(large);
    margin-top: $space-large;
  }
}

.article--comments-moderated {
  @include font($font-body, $font-family: false, $font-style: italic);
  margin-bottom: $space-x-large;
  line-height: 1.6;
}

.article--comments-message {
  margin-bottom: $space-medium;

  &.message--success {
    @extend %message--success;
    padding: $space-xx-small $space-x-small;
  }

  &.message--error {
    @extend %message--error;
    padding: $space-xx-small $space-x-small;
  }

  ul {
    @include font($font-body, $font-family: false);
    padding-left: $space-medium;
    margin-top: 0;
    margin-bottom: 0;
  }

  p {
    @extend %message--base;
    @include font($font-body, $font-family: false);
    margin-top: 0;
    margin-bottom: 0;

    + .article--comments-error {
      margin-top: 0.67em;
    }
  }
}

.article--comments-required {
  @include font-size-body-smallest;
  margin-top: $space-medium;
  margin-bottom: 0;
  color: $color-text-light;
}

.article--excerpt-wrapper {
  @extend %box-shadow;
  flex-grow: 0;
  flex-shrink: 0;
  text-align: center;
  transition: width $duration--small-200 $ease-in-out--normal;

  &.article--excerpt-wrapper--centered {
    display: flex;
    justify-content: center;
    text-align: center;
    & .article-list-item {
      display: flex;

      & .article--excerpt-content {
        vertical-align: middle;
      }
    }
  }

}

.article--excerpt-image {
  position: relative;
  display: block;
  height: rem(200px);
  background-position: 50% 50%;
  background-repeat: no-repeat;
  background-size: cover;

  @include media($min: $bp-small) {
    height: rem(250px);
  }

  @include media($min: $bp-large) {
    .blogposts--count-2 & {
      height: rem(300px);
    }
  }
}

.article--excerpt-content {
  width: 100%;
  padding: $space-medium;
  white-space: normal;

  .article--excerpt-wrapper--centered & {
    align-self: center;
    padding-top: $space-xx-large;
    padding-bottom: $space-xx-large;

    @include media($min: $bp-large) {
      padding-top: $space-xxx-large;
      padding-bottom: $space-xxx-large;
    }
  }
}

.article--excerpt-meta {
  font-size: 0;
  color: $color-text-light;
}

.article--excerpt-meta-item {
  display: inline-block;
  @include font-size-body-small;

  @include media($max: $bp-small) {
    @include font-size-body-smallest;
  }

  &:nth-child(2) {
    padding-left: 11px;
    margin-left: 10px;
    border-left: 1px solid $color-text-light;

    @include media($max: $bp-small) {
      padding-left: 6px;
      margin-left: 5px;
    }
  }
}

.article--excerpt-title {
  @include font-size-heading-4;
  margin-top: $space-xx-small;
  margin-bottom: $space-small;
  line-height: 1.3;
  color: $color-heading;

  &:first-child {
    margin-top: 0;
  }

  a {
    color: currentColor;
    text-decoration: none;
  }
}

.article--excerpt-text {
  margin-bottom: $space-small;
}

.article--excerpt-readmore {
  @extend %link--default;
  margin-top: $space-small;
  line-height: 1;
}

.article--excerpt-readmore--icon {
  @extend %inline-chevron;
  margin-left: rem(1px);
}

.article--excerpt-wrapper--featured {
  position: relative;
  width: 100%;
  margin-right: 0;
  margin-bottom: $space-xx-large;
  color: $color-featured-post-foreground;
  background-color: $color-featured-post-background;
  border: 0;
  box-shadow: none;

  @include media($min: $bp-medium) {
    margin-bottom: $space-xxx-large;
    font-size: 0;
  }

  .article--excerpt-image {
    height: rem(250px);

    @include media($min: $bp-xs) {
      height: rem(360px);
    }

    @include media($min: $bp-small) {
      height: rem(430px);
    }

    @include media($min: $bp-medium) {
      height: rem(467px);
    }

    @include media($min: $bp-large) {
      height: rem(526px);
    }

    .no-js & {
      height: auto;
    }
  }

  .article--excerpt-content {
    @include font-size-body;
    padding: $space-x-large;

    @include media($min: $bp-large) {
      padding: $space-xx-large;
    }
  }

  .article--excerpt-meta {
    color: transparentize($color-featured-post-foreground, 0.4);
  }

  .article--excerpt-meta-item {
    @include font-size-body;

    &:nth-child(2) {
      border-left-color: transparentize($color-featured-post-foreground, 0.5);
    }
  }

  .article--excerpt-title {
    @include font-size-heading-1;
    margin-top: $space-xx-small;
    margin-bottom: $space-medium;
    color: currentColor;

    &:first-child {
      margin-top: 0;
    }

    @include media($min: $bp-xs) {
      margin-bottom: 0;
    }
  }

  .article--excerpt-text {
    margin-top: $space-medium;
    margin-bottom: $space-large;
    line-height: 1.56;

    a {
      color: currentColor;
      text-decoration: underline;

      &:hover {
        color: currentColor;
      }
    }
  }

  .article--excerpt-button {
    @extend %button-secondary;
    border-color: transparent;

    &:not(.disabled):hover {
      border-color: transparent;
    }
  }

  &.article--excerpt-wrapper--no-image {

    .article--excerpt-content {
      @include media($min: $bp-xs) {
        width: 70%;
        text-align: right;
      }
    }

    .article--excerpt-meta,
    .article--excerpt-title,
    .article--excerpt-meta-item,
    .article--excerpt-text {
      max-width: rem(700px);

      @include media($min: $bp-xs) {
        text-align: left;
      }
    }

    .article--excerpt-text {
      @include media($min: $bp-xs) {
        margin-bottom: 0;
      }
    }

    .article--excerpt-button {
      @include media($min: $bp-xs) {
        position: absolute;
        right: $space-large;
        bottom: $space-large;
      }

      @include media($min: $bp-large) {
        right: $space-xx-large;
        bottom: $space-xx-large;
      }
    }
  }

  &.article--excerpt-wrapper--has-image {

    @include media($min: $bp-medium) {
      .article--excerpt-image,
      .article--excerpt-content {
        position: relative;
        display: inline-block;
        width: 50%;
        text-align: left;
        vertical-align: middle;
      }

      .article--excerpt-image {
        right: 0;
        left: 50%;
      }

      .article--excerpt-content {
        right: 50%;
        left: auto;
      }
    }
  }
}

$local-image-width: rem(100px);

// Outer banner styles
.atc-banner--container {
  @extend %sneak-in;
  position: fixed;
  top: 0;
  z-index: $index-banner;
  display: none;
  width: 100%;
  background-color: $color-background;
  outline: 0;
  box-shadow: 0 2px 5px transparentize($color-border, 0.75);
  transition: text-shadow $duration--small-500 $ease-in--normal; // animation duration + delay

  .site-header-sticky & {
    position: absolute;
    top: 100%;
  }
}

.atc-banner--outer {
  @extend %layout-container;
  position: relative;
  padding: $space-medium;
}

.atc-banner--inner {
  width: 100%;
  max-width: 920px;
  padding-top: $space-medium;
  padding-bottom: $space-medium;
  margin-right: auto;
  margin-left: auto;
  table-layout: fixed;
  text-align: center;

  @include media($min: $bp-small) {
    display: table;
    text-align: left;
  }
}

// Banner columns
.atc-banner--product {
  @include font-size-body;
  vertical-align: middle;

  @include media($min: $bp-small) {
    display: table-cell;
    width: 52%;
    padding-right: $space-x-large;
  }

  @include media($min: $bp-large) {
    padding-right: $space-x-large;
  }
}

.atc-banner--cart {
  margin-top: $space-xx-large;
  vertical-align: middle;

  @include media($min: $bp-small) {
    display: table-cell;
    width: 48%;
    padding-left: $space-large;
    margin-top: 0;
    border-left: 1px solid $color-border-soft;
  }

  @include media($min: $bp-large) {
    padding-left: $space-xx-large;
  }
}

// Product column
.atc-banner--product-title {
  @include font-size-heading-4;
  margin-top: 0;
  color: $color-heading;
}

.atc-banner--product-title--icon {
  display: inline-block;
  width: 18px;
  height: 13px;
  margin-top: -3px;
  margin-right: 5px;
  vertical-align: middle;

  svg {
    display: block;
    width: 100%;
    height: 100%;
  }
}

.atc--product {
  max-width: rem(310px);
  margin: $space-x-large auto 0;
  font-size: 0;
  text-align: left;
  vertical-align: middle;

  @include media($min: $bp-small) {
    display: block;
    max-width: 100%;
    margin-top: $space-large;
  }
}

.atc--product-image {
  display: inline-block;
  width: 100px;
  vertical-align: middle;

  svg,
  img {
    max-width: 100%;
  }
}

.atc--product-details {
  @include font-size-body;
  display: inline-block;
  width: calc(100% - #{$space-large + $local-image-width});
  margin-left: $space-large;
  vertical-align: middle;

  .discount-list {
    margin-bottom: 0;

    svg {
      height: rem(10px);
      width: rem(10px);
    }
  }
}

.atc--product-details--title {
  @include font($font-body);
  @include font-size-body;
  margin-top: 0;
  margin-bottom: 0;
  line-height: 1.3125;
  text-transform: inherit;
  letter-spacing: inherit;
}

.atc--product-details--options {
  @include font-size-body-smaller;
  display: block;
  margin-top: $space-xxx-small;
  line-height: 1.4;
  color: $color-text-light;
}

.atc--product-details--price {
  display: block;
  margin-top: $space-xxx-small;
  line-height: 1.2;

  .original-price {
    color: $color-text-light;
    text-decoration: line-through;
  }
}

// Cart column
.atc-banner--cart-subtotal {
  @include font-size-heading-4;
}

.atc-subtotal--label {
  color: $color-text-light;
}

.atc-subtotal--price {
  display: inline-block;
  margin-left: $space-xx-small;
  color: $color-heading;
}

.atc-banner--cart-footer {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  margin-top: $space-large;
  margin-bottom: -#{$space-xx-small};
  margin-left: -#{$space-xx-small};
  font-size: 0;

  @include media($min: $bp-small) {
    justify-content: flex-start;
  }
}

.atc-button--viewcart,
.atc-button--checkout {
  @include button-size(medium);
  margin-bottom: $space-xx-small;
  margin-left: $space-xx-small;
}

.atc-button--checkout {
  display: flex;
  align-items: center;
  justify-content: center;

  svg {
    margin: -10px 10px -10px 0;
  }
}

// Close button
.atc-banner--close {
  @extend %button-reset;
  position: absolute;
  top: $gutter-outer-medium;
  right: $gutter-outer-medium;
  color: $color-text;

  @include media($min: $bp-large) {
    right: $gutter-outer;
  }
}

.breadcrumbs-container {
  @extend %layout-container;
  margin-top: $space-medium;
  margin-bottom: $space-medium;
  font-size: 0;

  @include media($min: $bp-small) {
    margin-top: $space-large;
    margin-bottom: $space-large;
  }

  a,
  span {
    @include font-size-body;
    display: inline-block;
    vertical-align: middle;
  }

  a {
    @extend %link--default;
  }

  span {
    color: $color-text-light;

    &.breadcrumbs-tag:not(:last-child) {
      margin-right: 2px;
    }
  }
}

.breadcrumbs-delimiter {
  @extend %inline-chevron;
  margin-right: rem(7px);
  margin-left: rem(7px);

  svg {
    margin-top: 0;
  }
}

$local-bp-xs-tween: 480px;
$local-bp-xs-tween-large: 560px;
$local-padding-small: rem(15px);
$local-padding-large: $space-medium;

$local-cart-image-width-small: 75px;
$local-cart-image-width-large: 120px;

$local-icon-remove: rem(20px);
$local-quantity-width: $quantity-width + $local-padding-large;
$local-total-width: rem(120px);

.cart-item {
  @extend %box-shadow;
  position: relative;
  display: flex;
  padding: $local-padding-small;
  margin-bottom: $space-medium;
  overflow: hidden;
  transition: all $duration--small-600 $ease-out--normal;

  @include media($min: $bp-small) {
    padding: $local-padding-large;
  }

  @include media($min: $bp-large) {
    align-items: center;
  }
}

// Image
.cart-item--image-wrapper {
  width: $local-cart-image-width-small;
  margin: 0;

  @include media($min: $local-bp-xs-tween) {
    width: $local-cart-image-width-large;
  }

  svg,
  img {
    display: block;
    max-width: 100%;
    margin: 0 auto;
  }
}

// Inner (wraps non-image content)
.cart-item--inner {
  width: calc(100% - #{$local-cart-image-width-small});

  @include media($min: $local-bp-xs-tween) {
    width: calc(100% - #{$local-cart-image-width-large});
  }

  .cartitems--container:not(.has-sidebar) & {
    @include media($min: $bp-small) {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: calc(100% - #{$local-cart-image-width-large});
    }

    @include media($max: $local-bp-xs-tween) {
      width: calc(100% - #{$local-cart-image-width-small});
    }
  }

  .cartitems--container.has-sidebar & {
    @include media($max: $local-bp-xs-tween) {
      width: calc(100% - #{$local-cart-image-width-small});
    }

    @include media($min: $bp-small, $max: $bp-medium) {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: calc(100% - #{$local-cart-image-width-large});
    }

    @include media($min: $bp-large) {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: calc(100% - #{$local-cart-image-width-large});
    }
  }
}

// Title, Price, Variants
.cart-item--content {
  padding-left: $local-padding-large;

  .cartitems--container.has-sidebar & {
    @include media($min: $bp-medium, $max: $bp-large) {
      margin-bottom: $space-large;
    }
  }

  .discount-list-item {
    svg {
      height: rem(10px);
      width: rem(10px);
    }
  }
}

.cart-item--content-title {
  @include font-size-heading-5;
  margin-top: 0;
  margin-bottom: $space-xx-small;
  color: $color-heading;

  a {
    color: currentColor;
    text-decoration: none;
  }
}

.cart-item--product-options,
.cart-item--content-price {
  @include font-size-body-smaller;
  line-height: 1.5;
  color: transparentize($color-text, 0.2);
}

.cart-item--option-name,
.cart-item--price-title {
  @include font($font-body, $font-weight: bolder, $font-family: false);
}

.cart-item--sale-price {
  color: $color-text-light;
  text-decoration: line-through;
}

.cart-item--discount-price {
  color: red;
}

// Quantity select, line price, remove
.cart-item--info {
  position: relative;
  padding-right: 0;
  padding-left: $local-padding-large;
  margin-top: $space-large - $space-x-small;

  @include media($min: $local-bp-xs-tween-large) {
    display: flex;
    align-items: center;
  }

  @include media($min: $bp-small) {
    margin-top: 0;
  }
}

.cart-item--sku {
  font-size: rem(13px);
  line-height: 1.5;
  color: $color-text-light;
}

.cart-item--sku-empty {
  display: none;
}

.cart-item--quantity,
.cart-item--total,
.cart-item--remove {
  flex-basis: auto;
  flex-grow: 1;
  flex-shrink: 1;
  margin-top: $space-x-small;
}

.cart-item--quantity {
  width: 100%;
  max-width: $local-quantity-width;
  min-width: $local-quantity-width;
  padding-right: $local-padding-large;
  padding-left: 0;
}

.cart-item--total {
  @include font-size-heading-5;
  padding-right: $local-padding-large + $local-icon-remove;
  color: $color-text;
  text-align: left;
  white-space: nowrap;

  .original-price {
    color: $color-text-light;
  }

  .original-price,
  .cart-item--discount-price {
    line-height: 1.3;
  }

  @include media($min: $local-bp-xs-tween-large) {
    padding-right: 0;
    text-align: right;
  }

  @include media($min: $bp-small) {
    min-width: $local-total-width;
  }
}

.cart-item--remove {
  position: absolute;
  right: 0;
  bottom: 0;
  width: $local-padding-large;
  text-align: right;

  @include media($min: $local-bp-xs-tween-large) {
    position: relative;
    right: auto;
    bottom: auto;
    flex-grow: 0;
    width: ($local-padding-large * 2) + $local-icon-remove;
    max-width: percentage(1 / 3);
    padding-left: $local-padding-large * 2;
  }
}

.cart-item--remove-link {
  @extend %link--text;
  display: inline-block;
  width: $local-icon-remove;
  height: $local-icon-remove;
  padding: 5px;
  background-color: transparentize($color-text, 0.8);
  border-radius: 100%;

  &:hover {
    color: currentColor;
  }

  svg {
    display: block;
    fill: currentColor;
  }
}

$local-bp-xs-tween: 640px;
$local-space-small: 10px;
$local-space-large: 15px;

.collection--item {
  float: left;
  width: calc(50% - 5px);
  margin-left: $local-space-small;
  text-align: center;

  // 2 cols - 10px gutter
  @include media($max: $local-bp-xs-tween) {
    &:nth-child(n + 3) {
      margin-top: $space-xx-large;
    }

    &:nth-child(2n + 1) {
      margin-left: 0;
      clear: left;
    }
  }

  // 3 cols
  @include media($min: $local-bp-xs-tween, $max: $bp-medium) {
    &:nth-child(n + 4) {
      margin-top: $space-xx-large;
    }

    &:nth-child(3n + 1) {
      margin-left: 0;
      clear: left;
    }
  }

  // 3 cols - 10px gutter
  @include media($min: $local-bp-xs-tween, $max: $bp-small) {
    width: calc(#{percentage(1 / 3)} - #{$local-space-small * (2 / 3)});

    &:nth-child(3n + 1) {
      margin-left: 0;
      clear: left;
    }
  }

  // 15px gutter
  @include media($min: $bp-small, $max: $bp-large) {
    margin-left: $local-space-large;
  }

  // 3 cols, 15px gutter
  @include media($min: $bp-small, $max: $bp-medium) {
    width: calc(#{percentage(1 / 3)} - #{$local-space-large * (2 / 3)});
  }

  // 4 cols
  @include media($min: $bp-medium) {
    &:nth-child(n + 5) {
      margin-top: $space-xx-large;
    }

    &:nth-child(4n + 1) {
      margin-left: 0;
      clear: left;
    }
  }

  // 4 cols - 15px gutter
  @include media($min: $bp-medium, $max: $bp-large) {
    width: calc(25% - #{$local-space-large * (3 / 4)});
  }

  // 4 cols - 20px gutter
  @include media($min: $bp-large) {
    width: calc(25% - #{20px * (3 / 4)});
    margin-left: 20px;
  }
}

.collection--item-image {
  position: relative;
  height: auto;
  margin: 0;

  a {
    display: block;
  }

  img,
  svg {
    display: block;
    width: 100%;
    margin: auto 0;
  }
}

.collection--item-info {
  @include font-size-body;
  margin-top: $space-medium;
  margin-bottom: 0;
  text-align: center;
}

.collection--item-title {
  @extend %link--default;
  font-weight: 700;
  display: inline-block;
  line-height: 1.4;
  text-decoration: none;
}

.discount-list {
  @include font-size-body-smaller;
  padding: 0;
  line-height: 1.4;
  list-style-type: none;
}

.discount-list-item {
  margin-top: $space-xxx-small;
  color: red;

  svg {
    height: rem(11px);
    width: rem(11px);
    margin-right: 1px;
  }
}

$local-footer-accent: rgba($color-footer-text, 0.15);

// Footer blocks
.site-footer-blocks {
  @include media($min: $bp-large) {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    justify-content: flex-start;
  }
}

.site-footer-block-item {
  @include font-size-body;
  border-bottom: 1px solid $local-footer-accent;

  @include media($min: $bp-large) {
    flex-basis: auto;
    flex-grow: 0;
    flex-shrink: 0;
    width: calc(25% - #{$space-medium * 3 / 4});
    padding-right: $space-medium;
    margin-right: $space-medium;
    border-bottom: 0;

    &:last-child {
      padding-right: 0;
      margin-right: 0;
    }

    .column-count-5 & {
      width: calc(19% - #{$space-medium * 4 / 5});
    }

    &.site-footer-block-newsletter {
      width: calc(24% - #{$space-medium * 4 / 5});
    }
  }
}

.site-footer-block-title {
  @include font-size-heading-5;
  position: relative;
  padding-top: $space-small;
  padding-bottom: $space-small;
  margin-top: 0;
  margin-bottom: 0;

  @include media($max: $bp-large) {
    padding-top: $space-medium;

    .site-footer-block-menu & {
      padding-top: $space-small;
    }
  }
}

.site-footer-block-icon {
  position: absolute;
  top: 50%;
  right: $gutter-content / 2;
  display: block;
  height: 8px;
  margin-top: -4px;

  svg {
    display: block;
  }

  .icon-chevron-down-left,
  .icon-chevron-down-right {
    transition-duration: $duration--zero;
  }

  @include media($min: $bp-large) {
    display: none;
  }
}

.site-footer-block-content {
  @include font-size-body-small;
  padding-bottom: $space-medium;
  line-height: 1.6;

  .site-footer-block-newsletter & {
    padding-bottom: 0;
    margin-bottom: $space-medium;
  }

  .site-footer-block-newsletter &,
  .site-footer-block-rich-text & {
    > *:first-child {
      margin-top: 0;
    }

    > *:last-child {
      margin-bottom: 0;
    }
  }

  @include media($min: $bp-large) {
    padding-bottom: 0;
  }
}

.site-footer-block-menu {

  .navmenu {
    padding-bottom: 0;
    padding-left: 0;
    margin: 0;
    list-style: none;
  }

  .navmenu-item:not(:first-child) {
    margin-top: rem(8px);

    @include media($min: $bp-small) {
      margin-top: rem(5px);
    }
  }

  .site-footer-block-title {
    @include media($max: $bp-large) {
      cursor: pointer;
    }
  }

  .site-footer-block-content {
    padding-bottom: 0;

    @include media($min: $bp-large) {
      max-height: 1500px;
      opacity: 1;
    }
  }

  &.accordion--active {
    .site-footer-block-content {
      padding-bottom: $space-medium;
    }
  }
}

.site-footer-block-social-accounts {

  .social-icons {
    margin-top: -4px;
    margin-right: -4px;
    margin-left: -4px;
    font-size: 0;
  }

  .social-link {
    @include font-size-body-small;
    display: inline-block;
    width: 36px;
    height: 36px;
    padding: 4px;
    overflow: hidden;
    line-height: 1.8;
    vertical-align: top;

    svg {
      width: 28px;
      height: 28px;
      background-color: rgb(0, 0, 0);
      color: white;
      border-radius: 100%;
      transition: background-color $duration--medium-400 $ease-out--normal;
    }

    &:hover svg {
      background-color: rgba($color-footer-text, 0.05);
    }
  }
}

.site-footer-block-newsletter {

  .newsletter {
    padding-bottom: $space-medium;

    @include media($min: $bp-large) {
      margin-top: $space-medium - $space-small;
    }

    .button-primary {
      padding-right: rem(15px);
      padding-left: rem(15px);
    }

    .form-fields-inline {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: space-between;
      width: calc(100% + #{$gutter-content / 2});
      margin-top: -1 * $space-small;
      margin-right: -1 * $gutter-content / 4;
      margin-left: -1 * $gutter-content / 4;
    }

    .form-field {
      align-items: center;
      flex-grow: 1;
      flex-shrink: 0;
      margin-top: $space-small;
      margin-right: $gutter-content / 4;
      margin-left: $gutter-content / 4;
      white-space: nowrap;
      vertical-align: middle;
    }

    .newsletter-input {
      flex-basis: calc(67% - #{$gutter-content});
      min-width: 190px;
    }

    .newsletter-submit {
      flex-basis: calc(33% - #{$gutter-content});
    }
  }
}

.home-section--title {
  @extend %section-heading;
  margin-top: $space-xx-large;
  margin-bottom: $space-medium;
  color: $color-heading;
  text-align: center;

  @include media($min: $bp-medium) {
    margin-bottom: $space-large;
  }

  @include media($min: $bp-large) {
    margin-top: $space-xxx-large;
  }
}

.home-section--content {
  margin-top: $space-medium;

  @include media($min: $bp-medium) {
    margin-top: $space-large;
  }

  .shopify-section:first-child &:first-child {
    margin-top: rem($gutter-outer-small);

    @include media($min: $bp-small) {
      margin-top: rem($gutter-outer-medium);
    }

    @include media($min: $bp-large) {
      margin-top: rem($gutter-outer);
    }
  }
}

$local-button-width: 53px;
$local-active-background: mix($color-link, $color-background, 8%);
$local-image-width: rem(48px);

.live-search {
  position: relative;
  z-index: $index-header-search;
  display: block;
  height: $header-content-height;
  margin-top: 10px;

  @include media($min: $bp-large) {
    display: flex;
    flex-basis: auto;
    flex-grow: 1;
    flex-shrink: 1;
    margin-top: 0;
    vertical-align: middle;
  }

  &.live-search--takeover {
    position: fixed;
    top: 0;
    right: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    margin-top: 0;
    background-color: $color-background;
  }
}

.live-search-form {
  position: absolute;
  top: -1px;
  right: -1px;
  left: -1px;
  border: 1px solid black;
  border-radius: 0px;
  box-shadow: 0 2px 3px transparentize($color-border, 0.89);
  transition:
    border $duration--small-200 $ease-in-out--normal,
    box-shadow $duration--small-200 $ease-in-out--normal;

  &:hover,
  .live-search--focused & {
    border-color: transparentize($color-border, 0.75);
    box-shadow: 0 3px 7px transparentize($color-border, 0.84);
  }

  .live-search--takeover & {
    border-color: transparent;
    border-radius: 0;
    box-shadow: none;
  }

  .form-field {
    position: relative;
    z-index: 100;
    display: flex;
    height: $header-content-height;

    .live-search--takeover & {
      height: $header-content-height + 6px;
      border-bottom: 1px solid $color-border-soft;
    }
  }
}

.live-search-form-field {
  @include font-size-input;
  flex-basis: auto;
  flex-grow: 0;
  flex-shrink: 1;
  width: calc(100% - #{$local-button-width});
  padding-top: rem(14px);
  padding-bottom: rem(14px);
  vertical-align: top;
  border: 0;
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;

  .form-field-select-wrapper + & {
    border-radius: 0;
  }

  .live-search--active & {
    border-bottom-left-radius: 0;
  }

  .live-search--takeover & {
    z-index: $index-header-search + 50;
    width: 100%;
    padding-right: 100px;
    border-radius: 0;
  }
}

.live-search-filter-wrapper {
  z-index: $index-header-search + 5;
  display: flex;
  flex-shrink: 0;

  @include media($max: $bp-small) {
    display: none;
  }

  &:focus-within {
    box-shadow: 0 0 0 2px rgba(5, 105, 197, 0.55);
  }

  .live-search-filter-label {
    z-index: auto;
    display: flex;
    align-items: center;
    padding-top: 0;
    padding-bottom: 0;
    white-space: nowrap;
    pointer-events: none;
    background: $color-search-category-background;
    border: 0;
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
    box-shadow: none;

    .live-search--active & {
      border-bottom-left-radius: 0;
    }
  }

  .live-search-filter {
    @include font-size-body;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    padding-top: 0;
    padding-bottom: 0;
    opacity: 0;
    -webkit-appearance: none;
  }
}

.live-search-button {
  @extend %search-button;
  flex-basis: auto;
  flex-grow: 0;
  flex-shrink: 0;
  width: $local-button-width;
  vertical-align: top;
  border-bottom-left-radius: 0;
  border-top-left-radius: 0;

  .live-search--active & {
    border-bottom-right-radius: 0;
  }

  .live-search--takeover & {
    display: none;
    visibility: hidden;
  }

  .search-icon--inactive svg {
    margin-top: 2px;
  }
}

.live-search-takeover-cancel {
  @extend %button-reset, %link--default;
  @include font($font-body, $font-family: false, $font-weight: bolder);
  @include font-size-body;
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: $index-header-search + 100;
  display: none;
  padding: rem(15px);
  visibility: hidden;

  .live-search--takeover & {
    display: inline-block;
    visibility: visible;
  }

  &:focus {
    outline: solid transparentize($color-link, 0.5);
    outline-offset: -3px;
  }
}

.search-flydown {
  @include font-size-body;
  position: relative;
  z-index: 50;
  display: none;
  width: 100%;
  background-color: $color-background;
  border-top: 1px solid $color-border-soft;
  border-bottom-right-radius: 3px;
  border-bottom-left-radius: 3px;

  .live-search--active & {
    z-index: 200;
    display: block;
  }

  .live-search--takeover & {
    height: calc(100vh - #{$header-content-height});
    border-top: 0;
  }
}

.search-flydown--placeholder,
.search-flydown--results,
.search-flydown--quicklinks {
  display: none;

  &.visible {
    display: block;
  }
}

// Quicklinks
.search-flydown--quicklinks {
  padding-top: 15px;
  padding-bottom: 10px;
}

.search-flydown--quicklinks-title {
  @include font($font-body, $font-family: false, $font-weight: bolder);
  margin-top: 0;
  margin-bottom: 0;
  margin-left: 15px;
  font-size: rem(17px);
  color: $color-heading;
}

.search-flydown--quicklinks-list {
  padding-left: 0;
  margin-top: $space-xx-small;
  margin-bottom: 0;
  list-style: none;
}

.search-flydown--quicklinks-item {
  display: block;
}

.search-flydown--quicklinks-link {
  display: block;
  padding: 7px 15px;
  color: $color-link;
  text-decoration: none;
  background-color: $color-background;
  transition:
    color $duration--small-200 $ease-in-out--normal,
    background-color $duration--small-200 $ease-in-out--normal;

  &:hover,
  &:focus {
    background-color: $local-active-background;
  }

  &:focus {
    outline: none;
  }
}

// Product results
.search-flydown--product-items--none,
.search-flydown--product-items {
  display: block;

  .search-flydown--results--content-enabled & {
    display: inline-block;
    width: 64%;
    vertical-align: top;

    .live-search-filter-active & {
      width: 100%;
    }

    .live-search--takeover & {
      display: block;
      width: 100%;
    }
  }
}

.search-flydown--product {
  display: block;
  padding: 10px 15px;
  font-size: 0;
  color: $color-text;
  text-decoration: none;
  background-color: $color-background;
  transition:
    color $duration--small-200 $ease-in--normal,
    background-color $duration--small-200 $ease-in--normal;

  &:hover,
  &:focus {
    background-color: $local-active-background;
  }

  &:focus {
    outline: solid transparentize($color-link, 0.5);
  }

  .search-flydown--placeholder & {
    cursor: default;

    &:hover,
    &:focus {
      background-color: $color-background;
    }

    &:last-child {
      border-bottom-right-radius: 3px;
      border-bottom-left-radius: 3px;
    }
  }
}

.placeholder--content-text,
.placeholder--content-image {
  animation: shimmer $duration--large-400 ease-in-out infinite;
  animation-fill-mode: forwards;
  animation-direction: alternate;
}

.search-flydown--product-text,
.search-flydown--product-image {
  display: inline-block;
  vertical-align: middle;
}

.search-flydown--product-swatch-count {
  @include font-size-body-tiny;
  line-height: rem(15px);
  color: transparentize($color-text, 0.4);
}

.search-flydown--product-image {
  @include font-size-body;
  display: inline-block;
  width: $local-image-width;
  height: $local-image-width;

  img,
  svg {
    display: block;
    max-width: 100%;
    max-height: 100%;
    margin: 0 auto;
  }

  + .search-flydown--product-text {
    max-width: calc(100% - (#{$local-image-width + $space-small}));
    margin-left: $space-small;
  }
}

.search-flydown--product-text {
  @include font-size-body;

  .placeholder--content-text {
    height: 0.6em;
    max-width: 100%;
  }
}

.search-flydown--product-title {
  @include font-size-body;
  display: block;
  line-height: 1.3;

  &.placeholder--content-text {
    width: 240px; // Opinionated width -- for pleasantries
  }

  .highlight {
    background-color: $color-highlight;
  }
}

.search-flydown--product-price {
  @include font-size-body-small;
  display: block;
  line-height: 1.5;

  &.placeholder--content-text {
    width: 70px;
    margin-top: 0.44em; // Estimated space above normally derived from line-height
  }
}

.search-flydown--product-price--main {
  display: inline-block;
  color: $color-link;

  .search-flydown--product-price-has-sale & {
    margin-right: rem(7px);
    color: $color-sale;
  }
}

.search-flydown--product-price--compare-at {
  color: transparentize($color-text, 0.4);
  text-decoration: line-through;
}

.search-flydown--product-items--none {
  @include font-size-body;
  padding: $space-medium 15px $space-large;
  color: $color-text;
  vertical-align: top;

  h5 {
    @include font-size-heading-5;
    margin-top: 0;
    margin-bottom: 0;
    color: $color-heading;
  }

  p {
    margin-top: $space-medium;
    margin-bottom: 0;
  }
}

.search-flydown--continue {
  @extend %link--default;

  &:focus {
    outline: solid transparentize($color-link, 0.5);
    outline-offset: 4px;
  }
}

// Content results
.search-flydown--content-items {
  display: inline-block;
  width: 36%;
  padding: $space-medium 25px $space-large;
  vertical-align: top;

  .live-search--takeover &,
  .live-search-filter-active & {
    display: none;
  }
}

.search-flydown--content-title {
  @include font-size-body-smaller;
  margin-top: 0;
  margin-bottom: 0;
  color: transparentize($color-text, 0.4);
}

.search-flydown--content-items-list {
  @include font-size-body;
  padding-left: 0;
  margin-top: $space-x-small;
  list-style: none;
}

.search-flydown--content-item {
  @include font-size-body;
  margin-top: $space-xx-small;
  line-height: 1.56;

  a {
    @extend %link--default;

    &:focus {
      outline: solid transparentize($color-link, 0.5);
      outline-offset: 4px;
    }
  }
}

.search-flydown--content-items-none {
  @include font-size-body;
  margin-top: $space-xx-small;
  margin-bottom: 0;
  color: $color-text;
}

.search-flydown--footer {
  display: block;
  width: 100%;
  padding: 10px 15px 15px;
  text-align: center;
}

.message-banner--container {
  @extend %sneak-in;
  position: fixed;
  top: 0;
  z-index: $index-banner;
  display: none;
  width: 100%;
  transition: text-shadow $duration--medium-100 $ease-in--normal; // animation duration + delay

  &.message--error {
    @extend %message--error;
  }

  .site-header-sticky & {
    position: absolute;
    top: 100%;
  }
}

.message-banner--outer {
  @extend %layout-container;
  position: relative;
}

.message-banner--inner {
  width: 100%;
  max-width: 820px;
  padding-top: $space-x-small;
  padding-bottom: $space-x-small;
  margin-right: auto;
  margin-left: auto;
  text-align: center;
}

// Close button
.message-banner--close {
  @extend %button-reset;
  position: absolute;
  top: 50%;
  right: $gutter-outer-small;
  margin-top: -6.5px;

  @include media($min: $bp-small) {
    right: $gutter-outer-medium;
  }

  @include media($min: $bp-large) {
    right: $gutter-outer;
  }

  .message--error & {
    color: $color-error;
  }
}

.modal {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 0;
  display: none;
  padding: $gutter-outer-small;
  overflow: hidden;
  overflow-y: auto;
  white-space: nowrap;
  background-color: $color-overlay-background;
  content: "";
  opacity: 0;
  visibility: hidden;
  transition: opacity $duration--small-400 $ease-in-out--strong;
  -webkit-overflow-scrolling: touch;
  outline-style: auto; // This is to fix an issue where tapping on modals no iPhone creates a darker background

  @include media($min: $bp-small) {
    padding: $gutter-outer-medium;
  }

  @include media($min: $bp-large) {
    padding: $gutter-outer;
  }

  .modal-loaded & {
    display: block;
  }

  .modal-loaded.modal-visible & {
    z-index: $index-modal - 1;
    opacity: 1;
    visibility: visible;
  }
}

.modal-inner {
  position: relative;
  z-index: -1;
  padding: $gutter-outer-medium;
  margin-right: auto;
  margin-left: auto;
  overflow: hidden;
  background-color: $color-background;
  opacity: 0;
  transform: translateY(-50px);
  transition:
    transform $duration--medium-100 $ease-in-out--normal $duration--small-200,
    opacity $duration--small-400 $ease-in-out--normal $duration--small-400;

  @include media($min: $bp-small) {
    padding: $gutter-outer-medium;
  }

  @include media($min: $bp-large) {
    padding: $gutter-outer;
  }

  .modal-visible & {
    z-index: $index-modal;
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}

.modal-close {
  @extend %button-reset;
  position: absolute;
  top: 0;
  right: 0;
  padding: rem(15px);
  color: $color-text;

  @include media($min: $bp-large) {
    top: $gutter-outer-small;
    right: $gutter-outer-small;
  }

  svg {
    display: block;
    color: currentColor;
  }
}

.newsletter {
  width: 100%;
  font-size: 0;

  .newsletter-success,
  .form-field {
    @include font-size-body;
  }

  .form-field {
    display: inline-block;
    vertical-align: middle;
  }

  .newsletter-input {
    width: calc(67% - #{$gutter-content / 2});
    max-width: 245px;
  }

  .newsletter-submit {
    width: 33%;
    margin-left: $gutter-content / 2;
  }

  .button-primary { @include button-size(large); }
}

$local-max-width: 680px;

.site-page,
.page-masthead,
.page-content {
  @extend %page-content;
}

.page-masthead {
  @extend %layout-container;
  text-align: center;
}

.page-content {
  @extend %layout-container;
  max-width: $local-max-width;

  img {
    height: auto;
  }
}

.page-title {
  @include font-size-heading-1;
  color: $color-heading;

  @include media($min: $bp-large) {
    font-size: $font-heading-medium;
  }
}

.pagination--container {
  @extend %layout-container;
  margin-top: $space-xx-large;
  margin-bottom: $space-large;

  #shopify-section-static-blog & {
    margin-top: 0;
  }
}

.pagination--inner {
  padding-left: 0;
  margin-right: -1 * rem(9px);
  margin-left: -1 * rem(9px);
  font-size: 0;
  color: $color-text;
  text-align: center;

  li {
    @include font-size-body;
    display: inline-block;

    &:not(:last-child) {
      margin-right: rem(5px);
    }
  }

  a {
    @extend %link--default;
  }
}

.pagination--item {
  display: inline-block;
  padding: rem(9px) rem(11px);

  .pagination--active & {
    @include font($font-body, $font-family: false, $font-weight: bolder);
    color: $color-text;

    &:hover {
      color: currentColor;
    }
  }
}

.pagination--chevron-right,
.pagination--chevron-left {
  @extend %inline-chevron;
}

.pagination--chevron-left {
  margin-left: 0;

  svg {
    transform: rotate(90deg);
  }
}

$local-padding-small: rem(15px) - $space-xxx-small;
$local-padding-medium: rem(20px) - $space-xxx-small;

// Z-index stack, highest to lowest
$local-stack: (100, 50);

.productitem {
  @extend %box-shadow;
  position: relative;
  flex-grow: 1;
  width: 100%;
  min-height: 100%;
  padding: $local-padding-small;
  background: $color-background;
  transition: height $duration--medium-100 $ease-in-out--normal;

  @include media($min: $bp-medium) {
    padding: $local-padding-medium;
  }

  @include media($min: $bp-large) {
    .productgrid--item.animating &,
    .productgrid--item.visible & {
      position: absolute;
    }
  }

  &:hover {
    .productitem--image-alternate ~ img {
      visibility: hidden;
    }

    .productitem--image-alternate {
      visibility: visible;
    }
  }
}

.productitem--image-link,
.productitem--info {
  margin: 0 $space-xxx-small;

  @include media($min: $bp-large) {
    margin: 0;
  }
}

.productitem--badge {
  position: absolute;
  bottom: 0;
  left: 0;
  width: auto;
  height: auto;
  font-size: rem(13px);
}

.productitem--info {
  position: relative;
  z-index: nth($local-stack, 1);
  background-color: $color-background;
}

.productitem--price {
  &,
  + .productitem--title {
    margin-top: $space-xxx-small;
  }

  .price--spacer {
    display: block;
    height: rem(13px) * 1.38;
  }

  .price--compare-at.visible + .price--main {
    margin-top: rem(2px);
  }

  .price--main {
    color: $color-link;

    .productitem--emphasis & {
      @include font-size-body-larger; // 22px

      .price--varies & {
        @include font-size-body-large; // 20px
      }

      .price--label {
        @include font-size-body-medium; // 18px
      }
    }

    .productitem--sale & {
      color: $color-sale;
    }
  }
}

.productitem--title {
  @include font($font-body);
  @include font-size-body;
  margin: rem(10px) 0 0;
  line-height: 1.3125;
  letter-spacing: normal;
  text-transform: none;
  white-space: normal;

  a {
    @extend %link--text;
  }
}

.productitem--vendor a {
  @include font($font-body);
  @include font-size-body-smallest;
  margin: $space-xxx-small 0 0;
  line-height: 1.3125;
  color: $color-text-light;
  text-decoration: none;
  text-transform: none;
  letter-spacing: 0;
  white-space: normal;
}

.productitem--vendor a:hover {
  color: $color-link;
}

.productitem--ratings {
  .spr-badge {
    margin-top: rem(6px);
    line-height: 1;
  }
}

.productitem--actions {
  z-index: nth($local-stack, 2);
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  justify-content: flex-start;
  margin: $space-xx-small ($local-padding-medium - $space-xxx-small) 0;
  text-align: center;
  transition: opacity $duration--small-600 $ease-in-out--normal $duration--zero;

  @include media($max: $bp-large){
    width: 100%;
    margin-left: 0;
    margin-right: 0;

    .productgrid--item:not(.show-actions--mobile) & {
      display: none;
    }
  }

  @include media($min: $bp-large) {
    position: absolute;
    right: 0;
    bottom: $local-padding-medium;
    left: 0;
    visibility: hidden;
    opacity: 0;

    .productgrid--item:hover,
    .productgrid--item.animating &,
    .productgrid--item.visible & {
      visibility: visible;
    }

    .productgrid--item.animating-in:not(.animating-out) & {
      transition: opacity $duration--small-600 $ease-in-out--normal 0.05s;
    }

    .productgrid--item.animating-in:not(.animating-out) &,
    .productgrid--item.visible:not(.animating-out) &,
    .productgrid--item.visible.animating-out:hover & {
      opacity: 1;
    }

    // Occurs when user mouses in / out super quick
    .productgrid--item.animating-in.animating-out & {
      opacity: 0;
    }

    .has-touch & {
      position: relative;
      bottom: auto;
      width: 100%;
      visibility: visible;
      opacity: 1;
      margin-left: 0;
    }
  }
}

.productitem--action {
  display: inline-block;
  align-items: center;
  flex: 1 1 auto;
  padding-right: $space-xxx-small;
  padding-left: $space-xxx-small;
  margin-top: $space-xx-small;

  @include media($max: $bp-large) {
    &.productitem-action--desktop {
      display: none;
    }
  }
}

.productitem--action-trigger {
  display: block;
  width: 100%;
  padding-right: $space-xxx-small;
  padding-left: $space-xxx-small;
  text-align: center;
  white-space: nowrap;
  vertical-align: middle;

  &.productitem--action-atc {
    @extend %atc-button;
  }
}

.productitem--swatches {
  position: relative;
  z-index: 1;
  display: flex;
  align-items: start;
  justify-content: flex-start;
  height: $swatches-size-product-card;
  margin-top: $space-x-small;
  margin-bottom: $space-xxx-small;
  overflow: hidden;

  &.processed {
    overflow: visible;
  }
}

$swatch-gap: 6px;
.productitem--swatches-container {
  display: flex;
  flex-wrap: wrap;
  width: 100%;
  padding-right: #{$swatches-size-product-card * 1.5};
  margin-bottom: -$swatch-gap;
  background: $color-background;

  .productitem--swatches-expanded & {
    padding-bottom: $space-x-small;
  }
}

.productitem--swatches-swatch-wrapper {
  @include swatch-wrapper($swatches-size-product-card);
  margin-right: $swatch-gap;
  margin-bottom: $swatch-gap;

  .swatches-variant-images-square & {
    border-radius: $swatches-variant-image-selected-border-radius;
  }

  &:hover::after {
    @extend %swatch-tooltip;
  }

  .productitem--swatches-input:checked + & {
    @extend %swatch-wrapper-selected;

    .productitem--swatches-swatch {
      @include swatch-selected($swatches-size-product-card);
    }
  }
}

.productitem--swatches-count-wrapper {
  display: none;
}

.productitem--swatches-count-wrapper {
  @include font-size-body-smaller;
  @include font($font-body, $font-weight: bolder);
  position: absolute;
  align-items: center;
  justify-content: center;
  min-width: $swatches-size-product-card * 1.5;
  min-height: $swatches-size-product-card;
  color: $color-text;
  cursor: pointer;
  background-color: $color-background;
  border: 1px solid $color-border-soft;
  border-radius: 3px;

  @if ($swatches-shape == circle) {
    border-radius: $swatches-size-product-card * 0.5;
  }
}

.productitem--swatches-count {
  text-align: center;
}

.productitem--swatches-expanded {
  .productitem--swatches-count-wrapper::before {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 8px;
    height: 2px;
    background: $color-text;
    content: "";
    transform: translate(-50%, -50%);
  }

  .productitem--swatches-count {
    display: none;
  }
}

.productitem--swatches-swatch-hidden {
  display: none;

  .productitem--swatches-expanded & {
    display: block;
  }
}

.user-is-tabbing .productitem--swatches-input:focus ~ .productitem--swatches-swatch-wrapper .productitem--swatches-swatch {
  box-shadow: 0 0 0 3px #000;
}

.productitem--swatches-input {
  position: absolute;
  opacity: 0;
}

.productitem--swatches-swatch {
  @include swatch($swatches-size-product-card);

  .swatches-variant-images-square & {
    border-radius: $swatches-variant-image-border-radius;
  }
}

.productitem--swatches-swatch-inner {
  @extend %swatch-inner;
  width: $swatches-size-product-card;
}

.productitem--swatches-input:disabled {
  + .productitem--swatches-swatch-wrapper {
    @extend %swatch-wrapper-disabled;

    .productitem--swatches-swatch {
      @extend %swatch-disabled;
    }

    .productitem--swatches-swatch-inner {
      @extend %swatch-inner-disabled;
    }
  }

  &:checked {
    + .productitem--swatches-swatch-wrapper {
      @extend %swatch-wrapper-disabled-selected;
    }
  }
}

.productitem--image-link {
  display: block;
}

.productitem--image {
  position: relative;
  width: 100%;
  height: auto;
  padding: 0;
  margin: 0;
  overflow: hidden;
  background-size: 0;

  .imagestyle--no-image & {
    height: 0;
    padding-bottom: 100%;
  }

  img {
    display: block;
    width: 100%;
    margin: 0 auto;
    visibility: hidden;
  }

  .productitem--image-alternate,
  .productitem--image-swatch {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  .productitem--image-primary {
    visibility: visible;
  }

  svg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  .imagestyle--small &,
  .imagestyle--medium &,
  .imagestyle--large & {

    .in-theme-editor & {
      background-color: $color-background-light;
    }

    img,
    svg {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
  }

  .imagestyle--small &,
  .imagestyle--medium &,
  .imagestyle--large &,
  .imagestyle--cropped-small &,
  .imagestyle--cropped-medium &,
  .imagestyle--cropped-large & {
    height: 0;
  }

  .imagestyle--small &,
  .imagestyle--cropped-small & {
    padding-bottom: 75%;
  }

  .imagestyle--medium &,
  .imagestyle--cropped-medium & {
    padding-bottom: 100%;
  }

  .imagestyle--large &,
  .imagestyle--cropped-large & {
    padding-bottom: 150%;
  }

  .imagestyle--cropped-small &,
  .imagestyle--cropped-medium &,
  .imagestyle--cropped-large & {
    img,
    svg {
      position: absolute;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    &.product-item-image-no-objectfit {
      background-position: center;
      background-size: cover;

      img {
        display: none;
      }

      [data-rimg-canvas] {
        display: none;
      }
    }
  }
}

.productitem-quickshop {
  display: none;
}

.modal--quickshop-full {
  display: none;
  padding: rem(30px);

  .modal-inner {
    max-width: rem(600px);
    padding: 2.5rem $space-small $space-large;
  }

  .product--outer {
    display: block;

    @include media($min: $bp-large) {
      display: flex;
    }
  }

  .product-gallery,
  .product-main {
    display: block;
    padding: 0;
    white-space: normal;
  }

  .product-gallery--viewer {
    position: relative;
    width: 100%;
    padding: 0;
  }

  .product-gallery--image-background {
    width: 100%;
    position: relative;
  }

  .product-gallery--navigation {
    margin-left: 0;
  }

  @include media($min: $bp-xxxs) {
    .modal-inner {
      padding-left: $space-medium;
      padding-right: $space-medium;
    }
  }

  @include media($min: $bp-xs) {
    .modal-inner {
      padding: 2.5rem $space-x-large $space-large;
    }

    .product-gallery,
    .product-main {
      display: block;
      width: 100%;
    }

    .product-main {
      margin: $space-large 0 0;
    }
  }

  @include media($min: $bp-large) {
    .modal-inner {
      max-width: rem(840px);
      padding: rem(40px);
    }

    &.quickshop-thumbs-left {
      .modal-inner {
        max-width: rem(960px);
      }
    }

    .product-gallery {
      display: inline-block;
      width: 60%;
    }

    .product-main {
      display: inline-block;
      width: 35%;
      margin-top: 0;
      margin-left: 5%;
    }

    .product-title {
      padding-right: 1rem;
    }
  }
}

.modal--quickshop-slim {
  padding: rem(30px);

  .product-ratings,
  .product-vendor,
  .product-gallery,
  .product-description,
  .share-buttons {
    display: none;
  }

  .modal-inner {
    max-width: 500px;
    padding: $space-large $space-small;
  }

  .product-main {
    width: 100%;
    margin-left: 0;
    padding-left: 0;
    padding-right: 0;
    white-space: normal;
  }

  .product-details {
    margin-top: 0;
  }

  .product-title {
    padding-right: 1rem;
  }

  @include media($min: $bp-xxxs) {
    .modal-inner {
      padding: $space-large $space-medium;
    }
  }

  @include media($min: $bp-xs) {
    .modal-inner {
      padding: $space-x-large;
    }
  }

  @include media($min: $bp-large) {
    padding: rem(10px);

    .modal-inner {
      padding: rem(40px);
    }
  }
}

.quickshop-spinner {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 26px;
  height: 26px;
  margin-top: -13px;
  margin-left: -13px;
  animation: rotate 0.7s cubic-bezier(0.69, 0.31, 0.56, 0.83) infinite;
}

$local-link-padding: rem(3px);
$index-filter-link: 100;

.productgrid--sidebar-item.filter-group {
  margin-top: $space-xx-small - $local-link-padding;

  &.productgrid--sidebar-item-swatches-grid,
  &.productgrid--sidebar-item-grid {
    margin: $space-small #{-$space-xx-small} #{-$space-xx-small} 0;

    .modal & {
      margin-top: $space-xx-small;
    }
  }
}

.productgrid--sidebar-item-swatches-grid,
.productgrid--sidebar-item-grid {
  display: flex;
  flex-wrap: wrap;

  .filter-item {
    margin: 0 $space-xx-small $space-xx-small 0;

    .modal & {
      &:first-child {
        margin-top: 0;
      }

      &.filter-item--toggle-more {
        border: 0;
      }
    }
  }

  .filter-item--toggle-more {
    width: 100%;
    margin-top: $space-xxx-small;
  }
}

.productgrid--sidebar-item-swatches-grid {
  line-height: 0;

  .filter-item {
    a {
      padding: 0;
      margin: 0;
    }

    .modal & {
      border-top: 0;

      a {
        padding: 0; // Modal adds padding to standard filter links, so need this here so it gets overridden.
      }

      &:last-child {
        border-bottom: 0;
      }
    }
  }
}

.filter-item--swatch-wrapper {
  @include swatch-wrapper($swatches-size-sidebar-filter);

  .productgrid--sidebar-item-swatches-grid .filter-item--active & {
    @extend %swatch-wrapper-selected;
  }

  .productgrid--sidebar-item-swatches-grid &:hover::after {
    @extend %swatch-tooltip;
  }
}

.filter-item--swatch {
  @include swatch($swatches-size-sidebar-filter);

  .productgrid--sidebar-item-swatches-grid .filter-item--active & {
    @include swatch-selected($swatches-size-sidebar-filter);
  }
}

.filter-item--swatch-inner {
  @extend %swatch-inner;
  width: $swatches-size-sidebar-filter;
}

// Filter
.filter-item {
  @extend %link--text;
  position: relative;
  margin-top: $space-xxx-small;
  transition-duration: $duration--zero;

  .modal & {
    margin-top: 0;
    border-top: 1px solid $color-border-soft;

    &:first-child {
      margin-top: $space-xx-small;
    }

    &:last-child {
      border-bottom: 1px solid $color-border-soft;
    }

    &.filter-item--toggle {
      padding-top: $space-xx-small;
      border-bottom: 0;
    }
  }

  &.filter-item--hidden {
    display: none;
  }

  .filter-icon--checkbox {
    @extend %icon-checkbox;
  }

  a {
    @include font-size-body-small;
    position: relative;
    z-index: $index-filter-link;
    display: inline-block;
    padding: $local-link-padding;
    margin-left: -1 * $local-link-padding;
    line-height: 1.15;
    color: currentColor;
    text-decoration: none;

    @include media($min: $bp-medium) {
      display: block;
    }

    &:hover {
      z-index: $index-filter-link + 1;
    }

    .modal & {
      padding: ($local-link-padding * 3) $local-link-padding;
    }

    &.filter-text--link {
      @extend %link--default;
      font-weight: bold;
      text-decoration: underline;
    }
  }

  .filter-text,
  .filter-icon--checkbox {
    display: inline-block;
    vertical-align: middle;
  }

  .filter-text {
    max-width: calc(100% - (#{$local-link-padding * 3 + rem(nth($checkbox-size, 1))}));
    margin-left: $local-link-padding * 3;

   .modal & {
      white-space: normal;
    }
  }
}

.productgrid--sidebar-item-grid {
  .filter-item:not(.filter-item--toggle-more) {
    @extend %form-control-base;
    width: auto;
    min-width: 40px;
    padding: 0;
    text-align: center;
    cursor: pointer;
    transition: $duration--small-600 $ease-in-out--normal;

    .filter-text {
      max-width: 100%;
      margin-left: 0;
    }

    a {
      width: 100%;
      padding: $gutter-outer-small * 0.9 $gutter-outer-small;
      margin: 0;
    }

    &.filter-item--active {
      color: $color-link;
      background-color: rgba($color-link, 0.1);
      border-color: rgba($color-link, 0.8);
    }
  }
}

.filter-item--inactive {
  a {

    &:hover {
      color: $color-text;
    }
  }
}

.filter-item--active {
  @extend %link--default;
  transition-duration: $duration--zero;

  a {
    @include font($font-body, $font-family: false, $font-weight: bolder);

    &,
    &:hover {
      color: $color-link;
    }

    .filter-icon--checkbox {
      @extend %icon-checkbox--active;
    }
  }
}

.filter-group--grid {
  padding: 0;
  margin: 0;
  font-size: 0;
  white-space: normal;
}

.filter-item--grid-simple,
.filter-item--grid {
  display: inline-block;
  margin-top: $space-xx-small;
  margin-right: $space-xx-small;
  vertical-align: middle;
}

.filter-item--grid {

  a {
    display: block;
    color: $color-background;
    background: $color-link;
  }

  .filter-icon--remove,
  .filter-text {
    @include font-size-body-small;
    display: inline-block;
    color: currentColor;
    vertical-align: middle;
  }

  .filter-text {
    @include font($font-body, $font-family: false, $font-weight: bolder);
    padding: rem(7px) rem(10px);
    border-right: 1px solid currentColor;
  }

  .filter-icon--remove {
    padding: rem(10px);

    svg {
      display: block;
      width: 11px;
      height: 11px;
      fill: currentColor;
    }
  }
}

.filter-item--grid-simple {
  @include media($max: $bp-medium) {
    display: block;
    margin-top: $space-small;
  }

  a {
    @extend %link--default;
    @include font-size-body-small;
    padding: rem(5px);
    background-color: transparent;

    @include media($max: $bp-medium) {
      padding-right: 0;
      padding-left: 0;
    }
  }
}

$local-space-small: 10px;
$local-space-large: 20px;

.productitem--listview-price,
.productitem--listview-badge {
  display: none;
}

.productgrid--outer {
  @extend %layout-container, %clearfix;

  .breadcrumbs-container {
    margin-top: 0;
  }

  .pagination--container,
  .breadcrumbs-container {
    @extend %layout-container--reset;
  }
}

.productgrid--wrapper {

  .layout--has-sidebar & {

    @include media($min: $bp-medium) {
      float: left;
      width: calc(100% - #{$sidebar-width + $gutter-outer});
      margin-left: $gutter-outer;
    }
  }
}

.productgrid--filters {

  @include media ($max: $bp-medium) {
    display: none;
  }

  @include media ($min: $bp-medium) {
    margin-top: $space-large - $space-xx-small;
    margin-bottom: $space-large;
  }
}

.productgrid--utils {
  display: none;
  width: 100%;
  padding-top: $space-xx-small;
  padding-bottom: $space-xx-small;
  margin-top: $space-large;
  margin-bottom: $space-large;
  background-color: $color-background-light;
  table-layout: fixed;

  @include media($max: $bp-medium) {
    &.productgrid--utils--visible-mobile {
      display: table;
    }
  }

  @include media($min: $bp-medium) {
    display: table;

    &.productgrid--utils--hidden-desktop {
      display: none;
    }
  }
}

.productgrid--items {
  display: flex;
  align-items: stretch;
  flex-direction: row;
  flex-wrap: wrap;
  justify-content: flex-start;
  margin-top: $space-large;
  padding: 0;

  .search--section & {
    @include media($max: $bp-small) {
      margin-top: $space-medium;
    }
  }
}

.productgrid--item {
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  flex-grow: 0;
  flex-shrink: 0;
  justify-content: flex-start;
  transition: text-shadow $duration--medium-100 $ease-in--normal; // Sets transition speed for revealer

  @include media($min: $bp-large) {
    &.animating,
    &.visible {
      z-index: 200;
    }

    &:hover {
      z-index: 300;
    }
  }

  .productgrid--items.products-per-row-4 & {
    width: calc(50% - #{$local-space-small / 2});
    margin-top: $local-space-small;
    margin-left: $local-space-small;

    &:nth-child(2n + 1) {
      margin-left: 0;
    }

    &:nth-child(-n + 2) {
      margin-top: 0;
    }

    @include media($min: $bp-xs, $max: $bp-medium) {
      width: calc(#{percentage(1 / 3)} - #{$local-space-small * 2 / 3});
      margin-top: $local-space-small;
      margin-left: $local-space-small;

      &:nth-child(2n + 1) {
        margin-left: $local-space-small;
      }

      &:nth-child(3n + 1) {
        margin-left: 0;
      }

      &:nth-child(-n + 3) {
        margin-top: 0;
      }
    }

    .layout--has-sidebar:not(.productgrid-listview) & {
      @include media($min: $bp-medium, $max: $bp-large) {
        width: calc(#{percentage(1 / 3)} - #{$local-space-large * 2 / 3});
        margin-top: $local-space-large;
        margin-left: $local-space-large;

        &:nth-child(3n + 1) {
          margin-left: 0;
        }

        &:nth-child(-n + 3) {
          margin-top: 0;
        }
      }

      @include media($min: $bp-large) {
        width: calc(25% - #{$local-space-large * 3 / 4});
        margin-top: $local-space-large;
        margin-left: $local-space-large;

        &:nth-child(3n + 1) {
          margin-left: $local-space-large;
        }

        &:nth-child(4n + 1) {
          margin-left: 0;
        }

        &:nth-child(-n + 4) {
          margin-top: 0;
        }
      }
    }

    .layout--no-sidebar:not(.productgrid-listview) & {
      @include media($min: $bp-medium) {
        width: calc(25% - #{$local-space-large * 3 / 4});
        margin-top: $local-space-large;
        margin-left: $local-space-large;

        &:nth-child(4n + 1) {
          margin-left: 0;
        }

        &:nth-child(-n + 4) {
          margin-top: 0;
        }
      }
    }
  }

  .productgrid--items.products-per-row-3 & {
    width: calc(50% - #{$local-space-small / 2});
    margin-top: $local-space-small;
    margin-left: $local-space-small;

    &:nth-child(2n + 1) {
      margin-left: 0;
    }

    &:nth-child(-n + 2) {
      margin-top: 0;
    }

    @include media($min: $bp-xs) {
      width: calc(#{percentage(1 / 3)} - #{$local-space-small * 2 / 3});
      margin-top: $local-space-small;
      margin-left: $local-space-small;

      &:nth-child(3n + 1) {
        margin-left: 0;
      }

      &:nth-child(-n + 3) {
        margin-top: 0;
      }
    }

    .layout--no-sidebar:not(.productgrid-listview) &,
    .layout--has-sidebar:not(.productgrid-listview) & {
      @include media($min: $bp-medium) {
        width: calc(#{percentage(1 / 3)} - #{$local-space-large * 2 / 3});
        margin-top: $local-space-large;
        margin-left: $local-space-large;

        &:nth-child(3n + 1) {
          margin-left: 0;
        }

        &:nth-child(-n + 3) {
          margin-top: 0;
        }
      }
    }
  }
}

.productgrid--no-results {
  @extend %no-results--wrapper;
}

.productgrid--no-results-title {
  @extend %no-results--title;
}

.productgrid--no-results-button {
  @extend %no-results--button;
}

.productgrid--footer {
  @extend %clearfix;
  padding-top: $space-xx-large;
  margin-top: $space-xx-large;
  border-top: 1px solid $color-border-soft;
}

.productgrid--footer-item {
  @include media($max: $bp-small) {
    &:not(:first-child) {
      margin-top: $space-medium;
    }
  }

  @include media($min: $bp-small) {
    float: left;
    width: calc(50% - #{$gutter-content});

    &:not(:first-child) {
      margin-left: $gutter-content * 2;
    }
  }
}

.productgrid--footer-title {
  @include font-size-heading-5;
  margin-top: 0;
  margin-bottom: 0;
  color: $color-heading;
  text-transform: uppercase;
}

.productgrid--footer-results-list {
  padding-left: 0;
  margin-top: $space-medium;
  margin-bottom: 0;
  list-style: none;

  a {
    @extend %link--default;
  }

  li {
    @include font-size-body;
    line-height: 1.56;
    color: $color-text;

    &:not(:first-child) {
      margin-top: $space-xx-small;
    }
  }
}

.productitem--description {
  display: none;
  margin-bottom: $gutter-content;
  line-height: 1.5;
}

.productgrid-listview {
  .productgrid--items .productgrid--item {
    width: 100%;

    &:nth-of-type(n + 1) {
      margin: $gutter-content 0 0;
    }
  }

  .productgrid--items {
    display: block;
  }

  .productgrid--item {
    width: 100%;
    margin: $gutter-content 0 0;
  }

  .productitem--image-link {
    grid-row-end: span 2;
    width: 25%;

    @include media($max: $bp-medium) {
      width: 100%;
    }

    .productitem--badge {
      display: none;
    }
  }

  .no-touch & .productitem--actions,
  .productitem--actions {
    position: static;
    display: flex;
    max-width: 300px;
    margin-top: $space-xx-small;
    padding-left: $gutter-outer;
    opacity: 1;
    visibility: visible;

    .productitem--action {
      display: block;
      width: auto;
      min-width: auto;
      padding: 0;
      margin-top: $space-xx-small;
      margin-right: $space-xx-small;

      &:nth-of-type(2n) {
        order: 1;
      }

      @include media($max: $bp-large) {
        &.productitem-action--desktop {
          display: none;
        }
      }
    }

    .productitem--listview-price {
      display: none;
      width: 100%;
      margin-bottom: $gutter-content;
      text-align: right;
    }

    .productitem--listview-badge {
      display: none;
      justify-content: flex-end;
      width: 100%;
      margin-bottom: rem(12px);

      .productitem--badge {
        position: relative;
        top: rem(-6px);
      }
    }

    @include media($min: $bp-medium) {
      display: block;
      flex: 0 0 200px;

      .productitem--image-link {
        width: 25%;
      }

      .productitem--listview-price {
        display: block;
      }

      .productitem--listview-badge {
        display: flex;
      }

      .productitem--action {
        width: 100%;
        margin-top: 0.5rem;
        margin-right: 0;
        padding: 0;
      }
    }
  }

  .productitem--swatches {
    position: relative;
    order: 1;
    opacity: 1;
    visibility: visible;
  }

  .productitem--description {
    order: 2;
  }

  .productitem {
    display: grid;
    grid-template-columns: 25% 75%;
    grid-template-rows: auto minmax(0, 1fr);

    @include media($min: $bp-medium) {
      display: flex;
      justify-content: space-between;
    }
  }

  .productitem--info {
    display: flex;
    flex-direction: column;
    margin: 0 0 0 $gutter-outer;

    @include media($min: $bp-medium) {
      width: percentage(3/6);
      margin: 0 #{$gutter-outer * 2} 0 $gutter-outer;
    }

    .productitem--price {
      @include media($min: $bp-medium) {
        display: none;
      }

      @include media($min: $bp-xs, $max: $bp-medium) {
        margin-top: $space-xx-small;
      }
    }
  }

  .productitem--title {
    @include media($min: $bp-medium) {
      @include font($font-body, $font-family: false, $font-weight: bolder);
      @include font-size-body-large;
      color: $color-heading;
    }
  }

  .price--compare-at.visible {
    display: block;

    .price--spacer {
      display: none;
    }
  }

  .productitem--description {
    @include media($min: $bp-medium) {
      display: block;
    }
  }

  .productitem--link {
    @extend %link--default;
  }
}

$local-indentation: rem(13px);

.productgrid--sidebar-menu {
  font-size: $font-body-size-small;

  .navmenu-link {
    @extend %link--text;
  }

  .navmenu-link--active {
    @extend %link--default;
    @include font($font-body, $font-family: false, $font-weight: bolder);
  }

  .navmenu-item {
    display: block;
    margin-top: rem(8px);
    line-height: 1.375;
  }

  .navmenu {
    padding-left: 0;
    margin-left: 0;
    list-style: none;

    .navmenu {
      padding-left: $local-indentation;
    }
  }

  .navmenu-depth-3 {
    border-left: 2px solid $color-border-soft;

    .navmenu-item {
      @include font-size-body-smaller;
      margin-top: rem(7px);
    }
  }
}

$local-space-small: 10px;
$local-space-large: 20px;

$local-padding-small: 15px;
$local-padding-medium: 20px;

$local-item-width: 220px;

.product-row--container {
  @extend %layout-container;
  position: relative;

  @include media($max: $bp-large) {
    // Prevent overflow scrolling for Flickity
    // add spacing for shadow
    // then reduce vertical offset
    padding-bottom: $local-space-small;
    margin-bottom: -1 * $local-space-small;
    overflow: hidden;
  }
}

.product-row {
  display: flex;
  align-items: stretch;
  flex-direction: row;
  flex-wrap: nowrap;
  justify-content: flex-start;
  padding: 0;
  outline: 0;

  &.flickity-enabled {
    cursor: grab;
  }

  .flickity-slider .productgrid--item {
    min-height: 100%;
  }

  .productgrid--item {
    width: $local-item-width;
    margin-top: 0;
    margin-right: $local-space-small;

    &:last-child {
      margin-right: 0;
    }

    @include media($min: $bp-large, $max: $bp-xl) {
      width: calc(25% - #{$local-space-large * 3 / 4});
      margin-right: $local-space-large;

      // Within "Featured collection", hide last product when its the 4th
      .featured-collection--container & {
        &:nth-child(4):nth-last-child(2) {
          display: none;
        }
      }

      // Within "Recommended products", hide last product, when its 5th
      .product-recommendations--container & {
        &:nth-child(5) {
          display: none;
        }
      }

      &:last-child {
        margin-right: 0;
      }
    }

    @include media($min: $bp-xl) {
      width: calc(20% - #{$local-space-large * 4 / 5});
      margin-right: $local-space-large;

      &:last-child {
        margin-right: 0;
      }
    }
  }
}

$local-form-height: rem(66px);
$local-form-height-mobile: rem(50px);
$local-input-padding-small: rem(8px);
$local-input-padding-large: rem(16px);
$local-button-size: rem(28px) + (rem(2px) * 2); // size + (padding * 2)
$local-button-size-mobile: rem(26) + (rem(2px) * 2); // size + (padding * 2)

.productgrid--search {
  position: relative;
  z-index: 1;
  display: block;
}

.productgrid--search-form-field {
  height: $local-form-height;
  padding: {
    top: $local-input-padding-small;
    right: $local-button-size + $local-input-padding-large;
    bottom: $local-input-padding-small;
    left: $local-input-padding-large;
  };
  font-size: $font-heading-large;
  line-height: 1;
  color: $color-heading;

  @include media($max: $bp-small) {
    height: $local-form-height-mobile;
    font-size: $font-h4-size;
  }

  &:-ms-input-placeholder {
    color: currentColor;
    opacity: transparentize($color-heading, 0.4);
  }

  &::-ms-input-placeholder {
    color: currentColor;
    opacity: transparentize($color-heading, 0.4);
  }

  &::placeholder {
    color: currentColor;
    opacity: transparentize($color-heading, 0.4);
  }
}

.productgrid--search-button {
  @extend %button-reset, %search-button;
  position: absolute;
  top: 50%;
  right: $local-input-padding-large;
  width: $local-button-size;
  height: $local-button-size;
  padding: rem(2px);
  margin-top: -1 * $local-button-size / 2;

  @include media($max: $bp-small) {
    width: $local-button-size-mobile;
    height: $local-button-size-mobile;
    margin-top: -1 * $local-button-size-mobile / 2;
  }

  .search-icon--inactive {
    width: 100%;
    height: 100%;
    color: $color-button-background;
  }

  .search-icon--active {
    color: transparentize($color-heading, 0.8);
  }
}


$local-link-padding: rem(3px);

.productgrid--sidebar {

  @include media($max: $bp-medium) {
    display: none;
  }

  @include media($min: $bp-medium) {
    float: left;
    width: $sidebar-width;
  }
}

.productgrid--sidebar-section,
.productgrid--sidebar-title {
  margin-top: $space-xx-large;

  &:first-child {
    margin-top: 0;
  }
}

.productgrid--sidebar-title, .productgrid--sidebar-title--small {
  @include font-size-heading-5;
  margin-bottom: $space-medium;
  color: $color-heading;
  text-transform: uppercase;
}

// .productgrid--sidebar-title--small {
//   @include font($font-body, $font-weight: bolder);
//   @include font-size-body-small;
//   margin-top: $space-large;
//   margin-bottom: $space-xxx-small;
//   color: $color-text;
//   letter-spacing: 0;
//   text-transform: uppercase;
//   font-weight: 900;
//   font-style: italic;
//   margin-bottom: 20px;
// }

.productgrid--sidebar-item {
  padding-left: 0;
  margin-top: $space-xx-small;
  margin-left: 0;
  list-style: none;

  &:first-child {
    margin-top: 0;
  }
}

.productgrid--sidebar-filters--current {
  margin-bottom: $space-large;

  @include media($min: $bp-medium) {
    display: none;
  }
}

.utils-filter,
.utils-sortby,
.utils-view {
  @include font-size-body-small;
  display: table-cell;
  width: 40%;
  padding: $space-xx-small $space-small;
  vertical-align: middle;
}

.utils-sortby-button,
.utils-filter-button {
  @extend %button-reset, %link--default;
}

.utils-filter {
  text-align: left;

  @include media($min: $bp-medium) {
    display: none;
  }
}

.utils-filter-button {
  display: table;
  font-size: 0;
  transition: color $duration--small-200 $ease-in-out--normal;
}

.utils-filter-icon {
  display: table-cell;
  padding-right: 11px;
  vertical-align: middle;

  svg {
    display: block;
    width: 19px;
    height: 13px;
    transition: fill $duration--small-200 $ease-in-out--normal;
    fill: currentColor;
  }
}

.utils-filter-text {
  @include font($font-body, $font-family: false, $font-weight: bolder);
  @include font-size-body-small;
  display: table-cell;
  vertical-align: middle;
}

.utils-sortby {
  font-size: 0;
  text-align: right;

  @include media($min: $bp-medium) {
    text-align: left;
  }
}

.utils-sortby-select,
.utils-sortby-title {
  display: inline-block;
  vertical-align: middle;
}

.utils-sortby-title {
  @include font($font-body, $font-family: false, $font-weight: bolder);
  cursor: pointer;

  @include media($min: $bp-medium) {
    @include font-size-body-small;
    display: inline-block;
  }
}

.utils-sortby-button {
  @include font($font-body, $font-family: false, $font-weight: bolder);
  @include font-size-body-small;
  display: inline-block;
  vertical-align: middle;

  @include media($min: $bp-medium) {
    display: none;
  }
}

.utils-sortby-select {
  display: none;
  width: auto;
  max-width: 100%;

  @include media($min: $bp-medium) {
    display: inline-block;
    margin-left: $space-xx-small;
  }

  .form-field-select {
    @include font-size-body-smaller;
    max-width: 100%;
    padding-top: 0;
    padding-bottom: 0;
    background-color: transparent;
    color: $color-text;
    border: 0;
    box-shadow: none;
    &:focus {
      outline: 5px auto -webkit-focus-ring-color;
    }
  }

  svg {
    color: $color-text;
  }
}

.utils-sortby--modal {
  display: none;
}

.utils-sortby--modal-title {
  @include font($font-body, $font-family: false, $font-weight: bolder);
  @include font-size-heading-5;
  display: block;
  margin-bottom: $space-medium;
  color: $color-heading;
}

.utils-sortby--modal-list {
  padding-left: 0;
  margin-top: 0;
  margin-bottom: 0;
  list-style: none;
}

.utils-sortby--modal-item {
  margin-top: $space-x-small;

  &:first-child {
    margin-top: 0;
  }
}

.utils-sortby--modal-button {
  @extend %button-secondary;
  display: block;
  width: 100%;
  transition-duration: $duration--zero;

  &:active,
  &:focus,
  &.utils-sortby--modal-button--active {
    &,
    &:hover {
      color: $color-background;
      background: $color-link;
    }
  }
}

.utils-showby {
  font-size: 0;
  text-align: right;

  @include media($max: $bp-medium) {
    display: none;
  }

  li {
    display: inline-block;
    list-style: none;

    &:not(:first-child) {
      margin-left: $space-small;
    }
  }
}

.utils-showby-title {
  @include font($font-body, $font-family: false, $font-weight: bolder);
  @include font-size-body-small;
}

.utils-showby-item {
  @extend %link--text;
  @include font-size-body-smaller;

  &:hover {
    color: $color-link;
  }

  &.utils-showby-item--active {
    @extend %link--default;
  }
}

// Limit product grid modals to a reasonable width
.modal--productgrid-sort,
.modal--productgrid-filters {
  .modal-inner {
    max-width: rem(500px);
  }
}

.productgrid--outer:not(.layout--has-sidebar) .utils-sortby {
  text-align: left;
}

.utils-view {
  width: rem(102px);

  @include media($max: $bp-medium) {
    padding: 0  $space-xx-small 0 0;

    &.utils-hide {
      display: none;
    }
  }

  @include media($min: $bp-medium) {
    width: 60%;
  }
}

.utils-view-container {
  display: flex;
  justify-content: flex-end;
  align-items: center;
}

.utils-viewtoggle {
  display: flex;
  align-items: center;

  @include media($min: $bp-medium) {
    margin-left: $gutter-content * 2;
  }
}

.utils-viewtoggle-label {
  @include font($font-body, $font-family: false, $font-weight: bolder);
  display: none;
  margin-right: 10px;

  @include media($min: $bp-medium) {
    display: block;
  }
}

.utils-viewtoggle-button {
  padding: 5px 13px 2px;
  margin-left: 0;
  color: lighten($color-text, 40%);
  cursor: pointer;
  background: $color-background;
  border: 0;
  border-top: 1px solid lighten($color-text, 40%);
  border-bottom: 1px solid lighten($color-text, 40%);
  outline: 0;
  transition: color $duration--small-200 $ease-in-out--normal;
  -webkit-appearance: none;


  &:nth-of-type(1) {
    border-left: 1px solid lighten($color-text, 40%);
    border-radius: 3px 0 0 3px;

    &.active {
      border-color: $color-link;
    }
  }

  &:nth-of-type(2) {
    border-right: 1px solid lighten($color-text, 40%);
    border-radius: 0 3px 3px 0;

    &.active {
      border-color: $color-link;
    }
  }

  &:focus {
    box-shadow: 0 0 0 2px transparentize($color-text, 0.8);

    &.active {
      border-color: $color-link-hover;
      box-shadow: 0 0 0 2px transparentize($color-link, 0.6);
    }
  }

  &:hover {
    color: lighten($color-text, 20%);
  }

  &.active {
    color: $color-background;
    background: $color-link;
  }

  @include media($min: $bp-medium) {
    height: 20px;
    padding: 0;
    margin-left: 6px;
    background-color: transparent;

    &:nth-of-type(1) {
      border: 0;
      border-radius: 2px;
    }

    &:nth-of-type(2) {
      border: 0;
      border-radius: 2px;
    }

    &.active {
      color: $color-link;
      background-color: transparent;
    }
  }
}

$local-button-size: 46px;

.shopify-model-viewer-ui {
  // These variables are passed in to the shadow-dom
  #{--progress-bar-color}: $color-heading;
  #{--progress-bar-height}: 2px;

  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  &:not(.shopify-model-viewer-ui--fullscreen) {
    .shopify-model-viewer-ui__control-icon.shopify-model-viewer-ui__control-icon--exit-fullscreen {
      display: none;
    }
  }

  &.shopify-model-viewer-ui--fullscreen {
    .shopify-model-viewer-ui__control-icon.shopify-model-viewer-ui__control-icon--enter-fullscreen {
      display: none;
    }
  }

  model-viewer {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 1;
    width: 100%;
    height: 100%;

    &.shopify-model-viewer-ui__disabled {
      pointer-events: none;
    }
  }

  .shopify-model-viewer-ui__controls-overlay {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    cursor: pointer;
  }

  .shopify-model-viewer-ui__controls-area {
    position: absolute;
    right: 10px;
    bottom: 10px;
    z-index: 1;
    display: flex;
    flex-direction: column;
    width: $local-button-size;
    height: auto;
    opacity: 0;
    transition: opacity $duration--small-300 $ease-in--normal;

    &:not(.shopify-model-viewer-ui__controls-area--playing) {
      display: none;
    }

    &:focus-within {
      opacity: 1;
    }
  }

  &:hover .shopify-model-viewer-ui__controls-area {
    opacity: 1;
  }

  .shopify-model-viewer-ui__button {
    &:focus {
      z-index: 1;
    }
  }

  .shopify-model-viewer-ui__button--zoom-out,
  .shopify-model-viewer-ui__button--zoom-in,
  .shopify-model-viewer-ui__button--fullscreen {
    cursor: pointer;
  }

  .shopify-model-viewer-ui__button--poster,
  .shopify-model-viewer-ui__button--control {
    width: $local-button-size;
    height: $local-button-size;
    padding: 0;
    color: $color-heading;
    background-color: $color-background;
    border: 1px solid rgba($color-heading, 0.05);
    transition: background-color $duration--small-200 $ease-in--normal;

    body:not(.user-is-tabbing) & {
      outline: none;
    }

    svg {
      width: $local-button-size;
      height: $local-button-size;
      pointer-events: none;
      opacity: 1;
      transition: opacity $duration--small-200 $ease-in--normal;
    }

    &:hover svg {
      opacity: 0.55;
    }

    &:active {
      background-color: mix($color-heading, $color-background, 5%);
    }
  }

  .shopify-model-viewer-ui__button--poster {
    position: absolute;
    top: calc(50% - #{60px / 2});
    left: calc(50% - #{60px / 2});
    z-index: 1;
    width: 60px;
    height: 60px;
    background-color: $color-background;
    border: none;
    box-shadow: 0 0 0 1px rgba($color-heading, 0.05);

    &:hover svg {
      opacity: 0.55;
    }

    svg {
      width: 100%;
      height: 100%;
      border: none;
      opacity: 1;
      transition: opacity $duration--small-600 $ease-in-out--normal;
    }
  }

  .shopify-model-viewer-ui__button--control {
    &:first-child {
      border-bottom: 0;
    }

    &:last-child {
      border-top: 0;
    }
  }
}

.plyr.plyr--video {
  color: $color-heading;
  background-color: $color-background-light;

  [data-product-gallery-aspect-ratio="short"] &,
  [data-product-gallery-aspect-ratio="square"] &,
  [data-product-gallery-aspect-ratio="tall"] &,
  [data-product-gallery-image-crop][data-product-gallery-aspect-ratio="short"] &,
  [data-product-gallery-image-crop][data-product-gallery-aspect-ratio="square"] &,
  [data-product-gallery-image-crop][data-product-gallery-aspect-ratio="tall"] & {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;

    .plyr__video-wrapper {
      height: 100%;
    }

    video {
      height: 100%;
    }
  }

  .plyr__control {
    color: $color-heading;
    background: $color-background;
    border: none;
  }

  // This is the main play button shown before play starts
  > .plyr__control {
    height: rem(60px);
    width: rem(60px);
    padding: 0;
    background: $color-background;
    box-shadow: 0 0 0 1px rgba($color-heading, 0.05);

    > svg {
      height: 100%;
      width: 100%;
      margin: 0;
      border: none;
      transition: opacity $duration--small-600 $ease-in-out--normal;
    }

    &:hover > svg {
      opacity: 0.55;
    }

    &:active {
      opacity: 0.7;
    }
  }

  .plyr__progress__buffer {
    background: rgba($color-heading, 0.6);
    opacity: 0.6;
  }

  .plyr__control--overlaid.plyr__tab-focus,
  .plyr__control--overlaid:hover {
    color: $color-heading;
  }

  .plyr__video-wrapper,
  .plyr__poster {
    background-color: $color-background-light;
  }

  .plyr__controls {
    background: $color-background;
    border: none;
    box-shadow: 0 0 0 1px rgba($color-heading, 0.05)
  };

  .plyr__tooltip {
    color: $color-background;
    background: $color-heading;

    &:before {
      border-top: 4px solid $color-heading;
    }
  }

  // I would have grouped these in a better way in SCSS, but when different selectors
  // are comma separated in Chrome, the webkit definition does not get applied. It's like
  // Chrome just ignores it because there are others it doesn't recognize in the selector.
  &.plyr--full-ui input[type="range"]::-webkit-slider-runnable-track {
    background-image: linear-gradient(to right, $color-heading var(--value, 0%), rgba($color-heading, 0.6) var(--value, 0%));
  }

  &.plyr--full-ui input[type="range"].plyr__tab-focus::-webkit-slider-runnable-track {
    box-shadow: 0 0 0 4px rgba($color-heading, 0.25);
  }
  &.plyr--full-ui input[type="range"].plyr__tab-focus::-moz-range-track {
    box-shadow: 0 0 0 4px rgba($color-heading, 0.25);
  }
  &.plyr--full-ui input[type="range"].plyr__tab-focus::-ms-track {
    box-shadow: 0 0 0 4px rgba($color-heading, 0.25);
  }

  &.plyr--full-ui input[type="range"]::-webkit-slider-thumb {
    box-shadow: 2px 0 0 0 $color-background;
  }
  &.plyr--full-ui input[type="range"]::-moz-range-track {
    box-shadow: 2px 0 0 0 $color-background;
  }
  &.plyr--full-ui input[type="range"]::-ms-thumb {
    box-shadow: 2px 0 0 0 $color-background;
  }

  &.plyr--full-ui input[type="range"]:active::-webkit-slider-thumb {
    box-shadow: 0 0 0 3px rgba($color-heading, 0.25);
  }
  &.plyr--full-ui input[type="range"]:active::-moz-range-track {
    box-shadow: 0 0 0 3px rgba($color-heading, 0.25);
  }
  &.plyr--full-ui input[type="range"]:active::-ms-thumb {
    box-shadow: 0 0 0 3px rgba($color-heading, 0.25);
  }

  // Volume Control
  &.plyr--full-ui .plyr__volume {
    background-color: $color-heading;
  }

  &.plyr--full-ui .plyr__volume input[type="range"]::-webkit-slider-runnable-track {
    background-image: linear-gradient(to right, $color-background var(--value, 0%), rgba($color-background, 0.6) var(--value, 0%));
  }

  &.plyr--full-ui .plyr__volume input[type="range"].plyr__tab-focus::-webkit-slider-runnable-track {
    box-shadow: 0 0 0 4px rgba($color-background, 0.25);
  }
  &.plyr--full-ui .plyr__volume input[type="range"].plyr__tab-focus::-moz-range-track {
    box-shadow: 0 0 0 4px rgba($color-background, 0.25);
  }
  &.plyr--full-ui .plyr__volume input[type="range"].plyr__tab-focus::-ms-track {
    box-shadow: 0 0 0 4px rgba($color-background, 0.25);
  }

  &.plyr--full-ui .plyr__volume input[type="range"]::-webkit-slider-thumb {
    color: $color-background;
    box-shadow: 2px 0 0 0 $color-heading;
  }
  &.plyr--full-ui .plyr__volume input[type="range"]::-moz-range-track {
    color: $color-background;
    box-shadow: 2px 0 0 0 $color-heading;
  }
  &.plyr--full-ui .plyr__volume input[type="range"]::-ms-thumb {
    color: $color-background;
    box-shadow: 2px 0 0 0 $color-heading;
  }

  &.plyr--full-ui .plyr__volume input[type="range"]:active::-webkit-slider-thumb {
    box-shadow: 0 0 0 3px rgba($color-background, 0.25);
  }
  &.plyr--full-ui .plyr__volume input[type="range"]:active::-moz-range-track {
    box-shadow: 0 0 0 3px rgba($color-background, 0.25);
  }
  &.plyr--full-ui .plyr__volume input[type="range"]:active::-ms-thumb {
    box-shadow: 0 0 0 3px rgba($color-background, 0.25);
  }
}

.product-details {
  color: $color-text;

  @include media($max: $bp-small) {
    margin-top: $space-large;
    margin-bottom: $space-medium;
  }
}

.product-title {
  @include font-size-heading-3;
  margin-top: 0;
  margin-bottom: 0;
  color: $color-heading;
  line-height: 1.2;

  @include media($min: $bp-small) {
    @include font-size-heading-1;
  }

  a {
    color: $color-heading;
    text-decoration: none;
  }
}

.product-vendor {
  @include font-size-body;
  margin-top: $space-xxx-small;
  line-height: 1.6;
  color: $color-text-light;

  a {
    @extend %link--default;
  }
}

.product-ratings {
  margin-top: $space-xx-small;

  .spr-badge {

    .spr-badge-caption {
      margin-left: $space-xx-small;
    }

    .spr-badge-starrating {
      position: relative;
      top: -1px;

      .spr-icon {
        @include font-size-body-smaller;

        @include media($min: $bp-small) {
          font-size: rem($font-body-size + 1);
        }
      }
    }
  }
}

.product-pricing {
  display: flex;
  flex-wrap: nowrap;
  margin-top: $space-x-small;
  margin-bottom: -1 * $space-xxx-small;

  @include media($min: $bp-small) {
    margin-top: $space-small;
  }
}

.product-sku {
  margin: $gutter-outer-medium 0 $gutter-outer;
  font-size: rem(14px);
  line-height: 1.5;
  color: $color-text-light;

  &.product-sku--empty {
    display: none;
  }

  .modal & {
    margin-bottom: $gutter-outer-small;
  }
}

.product--badge {
  display: inline-block;
  height: 100%;
  margin-right: $space-small;
  margin-bottom: $space-xxx-small;
  font-size: rem(13px);
  white-space: nowrap;
}

.product--price {
  display: flex;
  flex-grow: 0;
  flex-shrink: 1;
  flex-wrap: wrap;
  vertical-align: middle;

  .price--compare-at,
  .price--main {
    @include font-size-heading-4;
    flex-basis: auto;
    flex-grow: 1;
    margin-bottom: $space-xxx-small;
    line-height: 1.15;
    white-space: nowrap;

    @include media($min: $bp-small) {
      font-size: rem($font-size-base * 1.25);
    }
  }

  .price--main {
    display: inline-block;
  }

  .price--compare-at {
    margin-right: $space-xx-small;

    &.visible + .price--main {
      color: $color-sale;
    }
  }
}

.product-section--container {
  @extend %layout-container;
  margin-top: $space-xx-large;

  @include media($min: $bp-large) {
    margin-top: $space-xxx-large;
  }

}

.product-section--title {
  @include font-size-heading-4;
  margin-bottom: $space-medium;
  color: $color-heading;

  @include media($min: $bp-medium) {
    margin-bottom: $space-large;
  }
}

// Additional product sections
.product-section--content {
  margin-top: $space-medium;

  @include media($min: $bp-medium) {
    margin-top: $space-large;
  }
}

.product-recommendations--title {
  @include media($max: $bp-small) {
    padding-right: $gutter-outer-small;
    padding-left: $gutter-outer-small;
  }

  @include media($min: $bp-small, $max: $bp-large) {
    padding-right: $gutter-outer-medium;
    padding-left: $gutter-outer-medium;
  }
}

.product-message--container {
  //scss-lint:disable SpaceAfterPropertyColon
  max-height: 0;
  padding-top: 0;
  overflow: hidden;
  opacity: 0;
  transition:
    max-height $duration--medium-100 $ease-in-out--normal,
    padding-top $duration--medium-100 $ease-in-out--normal,
    opacity $duration--small-400 $ease-in-out--normal;

  &.visible {
    max-height: 200px;
    padding-top: $space-small;
    opacity: 1;
  }

  div {
    padding: $space-x-small;
  }
}

.product-message--error {
  @extend %message--error;
  outline: none;
}

.badge--soldout,
.badge--sale {
  @include font($font-body, $font-family: false, $font-weight: bolder);
  padding: $space-xxx-small rem(5px);
  text-decoration: none;
  vertical-align: middle;
}

.badge--soldout {
  color: $color-background;
  background-color: $color-notice;
}

.badge--sale {
  color: $color-white;
  background-color: $color-sale;
}

.smart-payment-enabled {
  .product-form--atc-button {
    @extend %button-secondary, %atc-button;
    @include button-size(large);
    @include font-size-body;
    width: 100%;
    margin-top: $space-small;
    margin-left: 0;
  }
}

//scss-lint:disable SelectorFormat
.shopify-payment-button {
  margin-top: $space-small;

  .shopify-payment-button__button {
    margin-right: auto;
    margin-left: auto;
  }

  .shopify-payment-button__button--unbranded {
    @extend %button-primary, %atc-button;
    @include button-size(large);

    .product-form--alt & {
      @include media($max: $bp-xxl) {
        font-size: $button-medium-size;
      }
    }
  }

  .shopify-payment-button__button--branded {
    // Make button same height as ATC button
    min-height: 48px;
    overflow: hidden;
    border-radius: 3px;
  }

  .shopify-payment-button__more-options {
    @extend %link--default;
    @include font($font-body);
    @include font-size-body-small;
    padding: 0;

    &:hover {
      text-decoration: none;
    }
  }
}

//scss-lint:enable SelectorFormat

.form-options {
  // Undo default <fieldset> styling
  padding: 0;
  margin-top: $space-small;
  margin-right: 0;
  margin-left: 0;
  border: none;

  .no-js & {
    &.no-js-required {
      display: block;
      width: 100%;
    }

    &.js-required {
      display: none;
    }
  }

  .js & {
    &.no-js-required {
      display: none;
    }

    &.js-required {
      display: block;
    }
  }
}

.product-form--alt .form-options-first {
  margin-top: 0;
}

.form-options-swatches {
  z-index: 5;
}

.product-form--atc {
  margin-top: $space-small;
  font-size: 0;

  // For non variant products when in the alternate column
  .product-form--alt input[type=hidden] + & {
    margin-top: 0;
  }
}

.product-form--atc-qty,
.product-form--atc-button {
  display: inline-block;
  vertical-align: middle;
}

.product-form--atc-qty {
  width: $quantity-width;
}

.product-form--atc-button {
  @extend %button-primary, %atc-button;
  @include button-size(large);
  width: calc(100% - #{$space-x-small + $quantity-width});
  padding-right: rem(5px);
  padding-left: rem(5px);
  margin-left: $space-x-small;

  .product-form--alt & {
    @include media($max: $bp-xxl) {
      font-size: $button-medium-size;
    }
  }
}

.option-name {
  @include font($font-body, $font-family: false, $font-weight: bolder);

  @include media($min: $bp-small) {
    @include font-size-body-smaller;
  }
}

.option-swatch-value {
  font-weight: font-weight($font-body, $font-weight: initial);
}

.option-values {
  margin-top: $gutter-outer-small;
}

.option-value {
  display: inline-block;
}

.option-value-input {
  position: absolute;
  opacity: 0;

  & + .option-value-name {
    @extend %form-control-base;
    display: inline-block;
    width: auto;
    padding: $gutter-outer-small * 0.75 $gutter-outer-small;
    margin: 0 $gutter-outer-small / 2 $gutter-outer-small 0;
    cursor: pointer;
    transition: $duration--small-600 $ease-in-out--normal;

    @include media($min: $bp-small) {
      @include font-size-body-smaller;
    }
  }

  &:focus ~ .option-value-name {
    outline: auto;
  }


  &:checked + .option-value-name {
    color: $color-link;
    background-color: rgba($color-link, 0.1);
    border-color: rgba($color-link, 0.8);
  }

  &:disabled + .option-value-name {
    opacity: 0.5;
    text-decoration: line-through;
    cursor: default;
  }

  + .option-value-swatch-wrapper {
    @include swatch-wrapper($swatches-size-product-page);

    .swatches-variant-images-square & {
      border-radius: $swatches-variant-image-selected-border-radius;
    }

    // Placing this element on page before it's required fixes some weird jitters in Safari
    &::after {
      position: absolute;
      bottom: 0;
      left: 50%;
      pointer-events: none;
      content: "";
      will-change: transform;
    }

    &:hover {
      z-index: 5;

      &::after {
        @extend %swatch-tooltip;
      }
    }

    .swatch {
      @include swatch($swatches-size-product-page);

      .swatches-variant-images-square & {
        border-radius: $swatches-variant-image-border-radius;
      }
    }

    .swatch-inner {
      @extend %swatch-inner;
      width: $swatches-size-product-page;
    }
  }

  &:focus ~ .option-value-swatch-wrapper {
    outline: 0;
  }

  &:checked + .option-value-swatch-wrapper {
    @extend %swatch-wrapper-selected;
    background-color: transparent;

    .swatch {
      @include swatch-selected($swatches-size-product-page);
    }
  }

  &:disabled:checked + .option-value-swatch-wrapper {
    @extend %swatch-wrapper-disabled-selected;
  }

  &:disabled + .option-value-swatch-wrapper {
    @extend %swatch-wrapper-disabled;
    cursor: not-allowed;
    opacity: 1; //override standard disabled option opacity

    .swatch {
      @extend %swatch-disabled;
    }

    .swatch-inner {
      @extend %swatch-inner-disabled;
    }
  }
}

$local-thumbnail-space: rem(3px);
$local-mobile-thumb-space: rem(2px);

.product-gallery {
  position: relative;
}

.product-gallery--viewer {
  position: relative;
  width: 100%;
  overflow: hidden;
  transition: height $duration--small-600 $ease-in-out--normal;

  @include media($min: $bp-small) {
    margin-top: 0;
  }

  @include media($min: $bp-large) {
    .hover-zoom-enabled & {
      cursor: crosshair;
    }
  }

  .click-to-zoom-enabled & {
    cursor: pointer;
  }

  &.product-gallery--has-media {
    .product-gallery--media:not([data-gallery-selected="true"]) {
      position: absolute;
    }

    &:not(.flickity-enabled) {
      .product-gallery--media:not([data-gallery-selected="true"]) {
        visibility: hidden;
        opacity: 0;
      }
    }
  }
}

.product-gallery:not([data-product-gallery-aspect-ratio="natural"]) {
  .product-gallery--image-background {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background-position: center;
    background-size: cover;
  }
}

[data-product-gallery-aspect-ratio="natural"] {
  .product-gallery--image-background {
    background-size: 0;
  }

  .product-gallery--external_video {
    padding-bottom: 56.25%; // 16:9, most common YT aspect ratio
  }
}

[data-product-gallery-aspect-ratio="short"],
[data-product-gallery-aspect-ratio="square"],
[data-product-gallery-aspect-ratio="tall"],
[data-product-gallery-image-crop][data-product-gallery-aspect-ratio="short"],
[data-product-gallery-image-crop][data-product-gallery-aspect-ratio="square"],
[data-product-gallery-image-crop][data-product-gallery-aspect-ratio="tall"] {
  .product-gallery--media {
    height: 0;
  }
}

[data-product-gallery-aspect-ratio="short"],
[data-product-gallery-aspect-ratio="square"],
[data-product-gallery-aspect-ratio="tall"] {
  .in-theme-editor & {
    background-color: $color-background;
  }

  .product-gallery--loaded-image {
    position: absolute;
    top: 50%;
    left: 50%;
    display: block;
    width: auto;
    height: auto;
    max-width: 100%;
    max-height: 100%;
    margin: 0 auto;
    transform: translate(-50%, -50%);
  }
}

[data-product-gallery-aspect-ratio="tall"] {
  .product-gallery--loaded-image {
    width: 100%;
  }
}

[data-product-gallery-image-crop][data-product-gallery-aspect-ratio="short"],
[data-product-gallery-image-crop][data-product-gallery-aspect-ratio="square"],
[data-product-gallery-image-crop][data-product-gallery-aspect-ratio="tall"] {
  .product-gallery--media {
    img {
      position: absolute;
      top: 0;
      left: 0;
      overflow-x: hidden;
      transform: none;

      &[data-rimg="noscript"] {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      &[data-rimg="lazy"],
      &[data-rimg="loading"],
      &[data-rimg="loaded"] {
        @extend %show-for-sr;
      }
    }
  }
}

[data-product-gallery-aspect-ratio="short"],
[data-product-gallery-image-crop][data-product-gallery-aspect-ratio="short"] {
  .product-gallery--media {
    padding-bottom: 75%;
  }
}

[data-product-gallery-aspect-ratio="square"],
[data-product-gallery-image-crop][data-product-gallery-aspect-ratio="square"] {
  .product-gallery--media {
    padding-bottom: 100%;
  }
}

[data-product-gallery-aspect-ratio="tall"],
[data-product-gallery-image-crop][data-product-gallery-aspect-ratio="tall"] {
  .product-gallery--media {
    padding-bottom: 150%;
  }
}

.product-gallery--media {
  width: 100%;
  margin: 0;
  overflow: hidden;
  outline: none;
  color: $color-heading;
  opacity: 0;
  transition: opacity $duration--small-200 $ease-in-out--normal;

  video,
  .video,
  .shopify-model-viewer-ui {
    display: none;
  }

  &[data-gallery-selected="true"] {
    video,
    .video,
    .shopify-model-viewer-ui {
      display: block;
    }
  }

  @include media($max: $bp-small) {
    .flickity-enabled &,
    &[data-gallery-selected="true"] {
      opacity: 1;
    }
  }

  @include media($min: $bp-small) {
    left: 0 !important; //scss-lint:disable ImportantRule
    z-index: -1;
    opacity: 0;

    &.product-gallery--image-placeholder,
    &[data-gallery-selected="true"],
    &.is-selected {
      z-index: 0;
      width: 100%;
      opacity: 1;
    }
  }

  [data-product-gallery-aspect-ratio="natural"] & img,
  svg {
    display: block;
    width: 100%;
    margin: 0 auto;
  }
}

.product-gallery--navigation {
  position: relative;
  width: 100%;
  padding-bottom: $local-mobile-thumb-space;
  margin-top: $space-xx-small;
  margin-left: -1 * $local-mobile-thumb-space;
  font-size: 0;
  text-align: left;
  transition: opacity $duration--small-600 $ease-in-out--normal;

  &.loading {
    position: absolute;
    opacity: 0;
  }

  @include media($min: $bp-small) {
    margin-top: $space-xx-small;
    margin-right: rem(-5px);
    margin-left: rem(-5px);
  }
}

.gallery-navigation--scroll-button {
  position: absolute;
  height: 100%;
  width: 2rem;
  display: none;
  background: $color-background;
  color: $color-heading;
  border-top: none;
  border-bottom: none;
  outline: none;
  z-index: 2;
  transform: translate3d(0, 0, 0); // This fixes an issue with iOS not respecting z-index when scrolling the thumbnails
  cursor: pointer;

  &.visible {
    display: block;
  }

  &.scroll-left {
    left: 0;
    padding-left: 0;
    border-right: 1px solid transparentize($color-border, 0.70);
    border-left: none;

    svg {
      transform: rotate(90deg);
    }
  }

  &.scroll-right {
    right: 0;
    padding-right: 0;
    border-right: none;
    border-left: 1px solid transparentize($color-border, 0.70);

    svg {
      transform: rotate(270deg);
    }
  }
}

.gallery-navigation--scroller {
  padding-top: $space-xxx-small;
  padding-bottom: $space-xxx-small;
  overflow-x: scroll;
  overflow-y: hidden;
  white-space: nowrap;
  scroll-behavior: smooth;

  @include media($min: $bp-small) {
    overflow: visible;
    white-space: normal;
  }

  @include media($max: $bp-small) {
    .product-gallery--media-thumbnail:last-child {
      margin-right: $gutter-outer-small;
    }

    &::-webkit-scrollbar {
      display: none;
    }
  }
}

.product-gallery--media-thumbnail {
  @extend %button-reset;
  position: relative;
  display: inline-block;
  height: rem(64px);
  padding: 2px;
  margin-right: $local-thumbnail-space;
  margin-left: $local-thumbnail-space;
  vertical-align: middle;
  border-radius: 2px;
  box-shadow: 0 0 2px transparent;
  transition: box-shadow $duration--small-200 $ease-in--normal;

  @include media($min: $bp-small) {
    margin-top: $local-thumbnail-space * 2;
  }

  @include media($min: $bp-xl) {
    height: rem(79px);

    .modal--quickshop-full & {
      height: rem(64px);
    }
  }

  .no-js & {
    cursor: default;
  }

  &:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba($color-slider-accent, 0.7);
  }

  &[data-gallery-selected="true"] {
    box-shadow: 0 0 0 2px $color-slider-accent;

    &:focus {
      box-shadow: 0 0 0 2px rgba($color-slider-accent, 0.8), 0 0 10px 0 $color-slider-accent;
    }
  }

  .product-gallery--media-thumbnail-img-wrapper {
    position: relative;
    display: block;
    height: 100%;
  }

  .icon-play-thumb,
  .icon-model-thumb {
    position: absolute;
    top: rem(3px);
    right: rem(3px);
    width: rem(20px);
    height: rem(20px);
    background: $color-background;
    color: $color-heading;
    box-shadow: 0 0 0 1px rgba($color-heading, 0.05);
    z-index: 1;
    pointer-events: none;

    .no-js & {
      display: none;
    }
  }
}

.product-gallery--media-thumbnail-img {
  display: block;
  max-width: 100%;
  height: 100%;
}

.product-gallery--media-thumbnail:focus,
.product-gallery--media-thumbnail-img-wrapper:focus {
  outline: none;
}

// Thumbnails positioned left
[data-product-gallery-thumbnails="left"] {
  @include media($min: $bp-small) {
    display: flex;

    .modal--quickshop-full & {
      display: flex;
    }

    .product-gallery--navigation {
      flex: 1 0 auto;
      max-width: rem(64px) + ($local-thumbnail-space * 2);
      max-height: rem(550px);
      padding: 0;
      margin-top: 0;
      margin-right: $space-xx-small;

      @include media($min: $bp-xl) {
        max-width: rem(79px) + ($local-thumbnail-space * 2);
      }
    }

    .gallery-navigation--scroller {
      display: flex;
      flex-direction: column;
      flex-wrap: wrap;
      max-height: rem(550px);
    }

    .product-gallery--media-thumbnail {
      width: rem(64px);
      height: auto;
      margin-top: -2px;
      margin-bottom: $local-thumbnail-space * 2;

      @include media($min: $bp-xl) {
        width: rem(79px);
      }
    }

    .product-gallery--media-thumbnail-img-wrapper {
      width: 100%;
      height: auto;
    }

    .product-gallery--media-thumbnail-img {
      width: 100%;
      height: auto;
      max-width: auto;
      max-height: 100%;
    }

    .product-gallery--viewer {
      padding: 0;
    }
  }
}

.product-gallery--external-video {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;

  .video {
    width: 100%;
    height: 100%;
    padding-bottom: 0;
  }
}

.product-gallery--video {
  video {
    width: 100%;
  }
}

.product-gallery--model {
  position: relative;
  width: 100%;
  height: 0;
  padding-bottom: 100%;
}

.product-gallery--viewinyourspace {
  @include font($font-body);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: auto;
  color: $color-heading;
  background-color: rgba($color-heading, 0.08);
  border: 0;

  &[data-shopify-xr-hidden] {
    visibility: hidden;

    @include media($min: $bp-small) {
      display: none;
    }
  }

  svg {
    width: 44px;
    height: 44px;
  }
}

$local-thumbnail-space: rem(3px);
// PhotoSwipe css defaults
$pswp__assets-path: '{{ '' | asset_url }}';
/*! PhotoSwipe main CSS by Dmitry Semenov | photoswipe.com | MIT license */

/*
	Styles for basic PhotoSwipe functionality (sliding area, open/close transitions)
*/

// PhotoSwipe uses Autoprefixer, so vendor prefixed are added automatically when needed.

$pswp__show-hide-transition-duration: 333ms !default;
$pswp__controls-transition-duration: 333ms !default;
$pswp__background-color: #000 !default;
$pswp__placeholder-color: #222 !default;
$pswp__box-sizing-border-box: true !default; // disable .pswp * { box-sizing:border-box } (in case you already have it in your site css)
$pswp__root-z-index: 1500 !default;
$pswp__assets-path: '' !default; // path to skin assets folder (preloader, PNG and SVG sprite)
$pswp__error-text-color: #CCC !default; // "Image not loaded" text color
$pswp__include-minimal-style: true !default;

 
/* pswp = photoswipe */
.pswp {
	display: none;
	position:absolute;
	width: 100%;
	height: 100%;
	left:0;
	top:0;
	overflow: hidden;
	touch-action: none;
	z-index: $pswp__root-z-index;
	-webkit-text-size-adjust: 100%;
	/* create separate layer, to avoid paint on window.onscroll in webkit/blink */
	-webkit-backface-visibility: hidden;
	outline: none;

	@if $pswp__box-sizing-border-box == true {
		* {
			box-sizing: border-box;
		}
	}
	
	img {
		max-width: none;
	}
}

/* style is added when JS option showHideOpacity is set to true */
.pswp--animate_opacity {
	/* 0.001, because opacity:0 doesn't trigger Paint action, which causes lag at start of transition */
	opacity: 0.001;
	will-change:opacity;
	/* for open/close transition */
	transition: opacity $pswp__show-hide-transition-duration cubic-bezier(.4,0,.22,1);
}

.pswp--open {
	display: block;
}

.pswp--zoom-allowed .pswp__img {
	/* autoprefixer: off */
	cursor: -webkit-zoom-in;
	cursor: -moz-zoom-in;
	cursor: zoom-in;
}

.pswp--zoomed-in .pswp__img {
	/* autoprefixer: off */
	cursor: -webkit-grab;
	cursor: -moz-grab;
	cursor: grab;
}

.pswp--dragging  .pswp__img {
	/* autoprefixer: off */
	cursor: -webkit-grabbing;
	cursor: -moz-grabbing;
	cursor: grabbing;
}

/*
	Background is added as a separate element.
	As animating opacity is much faster than animating rgba() background-color.
*/
.pswp__bg {
	position: absolute;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	background: $pswp__background-color;
	opacity: 0;
	transform: translateZ(0);
	-webkit-backface-visibility: hidden;
	will-change:opacity;
}

.pswp__scroll-wrap {
	position: absolute;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	overflow:hidden;
}

.pswp__container,
.pswp__zoom-wrap { 
	touch-action: none;
	position: absolute;
	left: 0;
	right: 0;
	top: 0;
	bottom: 0;
}

/* Prevent selection and tap highlights */
.pswp__container,
.pswp__img {
	-webkit-user-select: none;
	-ms-user-select: none;
	    user-select: none;
	-webkit-tap-highlight-color: rgba(0,0,0,0);
	-webkit-touch-callout: none;
}

.pswp__zoom-wrap {
	position: absolute;
	width: 100%;
	transform-origin: left top;
	/* for open/close transition */
	transition: transform $pswp__show-hide-transition-duration cubic-bezier(.4,0,.22,1);
}

.pswp__bg {
	will-change: opacity;
	/* for open/close transition */
	transition: opacity $pswp__show-hide-transition-duration cubic-bezier(.4,0,.22,1);
}

.pswp--animated-in {
	.pswp__bg,
	.pswp__zoom-wrap {
		transition: none;
	}
}

.pswp__container,
.pswp__zoom-wrap {
	-webkit-backface-visibility: hidden;
}

.pswp__item {
	position: absolute;
	left: 0;
	right: 0;
	top: 0;
	bottom: 0;
	overflow: hidden;
}

.pswp__img {
	position: absolute;
	width: auto;
	height: auto;
	top: 0;
	left: 0;
}

/*
	stretched thumbnail or div placeholder element (see below)
	style is added to avoid flickering in webkit/blink when layers overlap
*/
.pswp__img--placeholder {
	-webkit-backface-visibility: hidden;
}

/*
	div element that matches size of large image
	large image loads on top of it
*/
.pswp__img--placeholder--blank {
	background: $pswp__placeholder-color;
}

.pswp--ie .pswp__img {
	width: 100% !important;
	height: auto !important;
	left: 0;
	top: 0;
}

/*
	Error message appears when image is not loaded
	(JS option errorMsg controls markup)
*/
.pswp__error-msg {
	position: absolute;
	left: 0;
	top: 50%;
	width: 100%;
	text-align: center;
	font-size: 14px;
	line-height: 16px;
	margin-top: -8px;
	color: $pswp__error-text-color;
}

.pswp__error-msg a {
	color: $pswp__error-text-color;
	text-decoration: underline;
}

/*! PhotoSwipe Default UI CSS by Dmitry Semenov | photoswipe.com | MIT license */

/*

	Contents:

	1. Buttons
	2. Share modal and links
	3. Index indicator ("1 of X" counter)
	4. Caption
	5. Loading indicator
	6. Additional styles (root element, top bar, idle state, hidden state, etc.)

*/

// PhotoSwipe uses Autoprefixer, so vendor prefixed are added automatically when needed.



$pswp__show-hide-transition-duration: 333ms !default;
$pswp__controls-transition-duration: 333ms !default;
$pswp__background-color: #000 !default;
$pswp__placeholder-color: #222 !default;
$pswp__box-sizing-border-box: true !default; // disable .pswp * { box-sizing:border-box } (in case you already have it in your site css)
$pswp__root-z-index: 1500 !default;
$pswp__assets-path: '' !default; // path to skin assets folder (preloader, PNG and SVG sprite)
$pswp__error-text-color: #CCC !default; // "Image not loaded" text color
$pswp__include-minimal-style: true !default;


/*
	
	1. Buttons

 */

/* <button> css reset */
.pswp__button {
	width: 44px;
	height: 44px;
	position: relative;
	background: none;
	cursor: pointer;
	overflow: visible;
	-webkit-appearance: none;
	display: block;
	border: 0;
	padding: 0;
	margin: 0;
	float: right;
	opacity: 0.75;
	transition: opacity 0.2s;
	box-shadow: none;

	&:focus,
	&:hover {
		opacity: 1;
	}
	
	&:active {
		outline: none;
		opacity: 0.9;
	}

	&::-moz-focus-inner {
		padding: 0;
		border: 0
	}
}

/* pswp__ui--over-close class it added when mouse is over element that should close gallery */
.pswp__ui--over-close .pswp__button--close {
	opacity: 1;
}

.pswp__button,
.pswp__button--arrow--left:before,
.pswp__button--arrow--right:before {
	background: url(#{$pswp__assets-path}default-skin.png) 0 0 no-repeat;
	background-size: 264px 88px;
	width: 44px;
	height: 44px;
}

@media (-webkit-min-device-pixel-ratio: 1.1),  (-webkit-min-device-pixel-ratio: 1.09375),  (min-resolution: 105dpi),  (min-resolution: 1.1dppx) {

	/* Serve SVG sprite if browser supports SVG and resolution is more than 105dpi */
    .pswp--svg .pswp__button,
    .pswp--svg .pswp__button--arrow--left:before,
	.pswp--svg .pswp__button--arrow--right:before {
        background-image: url(#{$pswp__assets-path}default-skin.svg);
    }

    .pswp--svg .pswp__button--arrow--left,
	.pswp--svg .pswp__button--arrow--right {
		background: none;
	}
}

.pswp__button--close {
	background-position: 0 -44px;
}

.pswp__button--share {
	background-position: -44px -44px;
}

.pswp__button--fs {
	display: none;
}

.pswp--supports-fs .pswp__button--fs {
	display: block;
}

.pswp--fs .pswp__button--fs {
	background-position: -44px 0;
}

.pswp__button--zoom {
	display: none;
	background-position: -88px 0;
}

.pswp--zoom-allowed .pswp__button--zoom {
	display: block;
}

.pswp--zoomed-in .pswp__button--zoom {
	background-position: -132px 0;
}

/* no arrows on touch screens */
.pswp--touch {
	.pswp__button--arrow--left,
	.pswp__button--arrow--right {
		visibility: hidden;		
	}
}

/*
	Arrow buttons hit area
	(icon is added to :before pseudo-element)
*/
.pswp__button--arrow--left,
.pswp__button--arrow--right {
	background: none;
	top: 50%;
	margin-top: -50px;
	width: 70px;
	height: 100px;
	position: absolute;
}

.pswp__button--arrow--left {
	left: 0;
}

.pswp__button--arrow--right {
	right: 0;
}

.pswp__button--arrow--left:before,
.pswp__button--arrow--right:before {
	content: '';
	top: 35px;
	background-color: rgba(0,0,0,0.3);
	height: 30px;
	width: 32px;
	position: absolute;
}

.pswp__button--arrow--left:before {
	left: 6px;
	background-position: -138px -44px;
}

.pswp__button--arrow--right:before {
	right: 6px;
	background-position: -94px -44px;
}


/*

	2. Share modal/popup and links

 */

.pswp__counter,
.pswp__share-modal {
	-webkit-user-select: none;
	-ms-user-select: none;
	    user-select: none;
}

.pswp__share-modal {
	display: block;
	background: rgba(0, 0, 0, 0.5);
	width: 100%;
	height: 100%;
	top: 0;
	left: 0;
	padding: 10px;
	position: absolute;
	z-index: $pswp__root-z-index + 100;
	opacity: 0;
	transition: opacity 0.25s ease-out;
	-webkit-backface-visibility: hidden;
	will-change: opacity;
}

.pswp__share-modal--hidden {
	display: none;
}

.pswp__share-tooltip {
	z-index: $pswp__root-z-index + 120;
	position: absolute;
	background: #FFF;
	top: 56px;
	border-radius: 2px;
	display: block;
	width: auto;
	right: 44px;
	box-shadow: 0 2px 5px rgba(0, 0, 0, 0.25);
	transform: translateY(6px);
	transition: transform 0.25s;
	-webkit-backface-visibility: hidden;
	will-change: transform;

	a {
		display: block;
		padding: 8px 12px;
		color: #000;
		text-decoration: none;
		font-size: 14px;
		line-height: 18px;

		&:hover {
			text-decoration: none;
			color: #000;
		}

		
		&:first-child {
			/* round corners on the first/last list item */
			border-radius: 2px 2px 0 0;
		}
		
		&:last-child {
			border-radius: 0 0 2px 2px;
		}
	}
}

.pswp__share-modal--fade-in {
	opacity: 1;

	.pswp__share-tooltip {
		transform: translateY(0);
	}
}

/* increase size of share links on touch devices */
.pswp--touch .pswp__share-tooltip a {
	padding: 16px 12px;
}

a.pswp__share--facebook {
	&:before {
		content: '';
		display: block;
		width: 0;
		height: 0;
		position: absolute;
		top: -12px;
		right: 15px;
		border: 6px solid rgba(0, 0, 0, 0);
		border-bottom-color: #FFF;
		-webkit-pointer-events: none;
		-moz-pointer-events: none;
		pointer-events: none;
	}

	&:hover {
		background: #3E5C9A;
		color: #FFF;

		&:before {
			border-bottom-color: #3E5C9A;
		}
	}
}

a.pswp__share--twitter {
	&:hover {
		background: #55ACEE;
		color: #FFF;
	}
}

a.pswp__share--pinterest {
	&:hover {
		background: #CCC;
		color: #CE272D;
	}
}

a.pswp__share--download {
	&:hover {
		background: #DDD;
	}
}


/*

	3. Index indicator ("1 of X" counter)

 */

.pswp__counter {
	position: absolute;
	left: 0;
	top: 0;
	height: 44px;
	font-size: 13px;
	line-height: 44px;
	color: #FFF;
	opacity: 0.75;
	padding: 0 10px;
}


/*
	
	4. Caption

 */

.pswp__caption {
	position: absolute;
	left: 0;
	bottom: 0;
	width: 100%;
	min-height: 44px;
	
	small {
		font-size: 11px;
		color: #BBB;
	}
}

.pswp__caption__center {
	text-align: left;
	max-width: 420px;
	margin: 0 auto;
	font-size: 13px;
	padding: 10px;
	line-height: 20px;
	color: #CCC;
}

.pswp__caption--empty {
	display: none;
}

/* Fake caption element, used to calculate height of next/prev image */
.pswp__caption--fake {
	visibility: hidden;
}


/*

	5. Loading indicator (preloader)

	You can play with it here - http://codepen.io/dimsemenov/pen/yyBWoR

 */

.pswp__preloader {
	width: 44px;
	height: 44px;
	position: absolute;
	top: 0;
	left: 50%;
	margin-left: -22px;
	opacity: 0;
	transition: opacity 0.25s ease-out; 
	will-change: opacity;
	direction: ltr;
}

.pswp__preloader__icn {
	width: 20px;
	height: 20px;
	margin: 12px;
}

.pswp__preloader--active {
	opacity: 1;

	.pswp__preloader__icn {
		/* We use .gif in browsers that don't support CSS animation */
		background: url(#{$pswp__assets-path}preloader.gif) 0 0 no-repeat;
	}
}

.pswp--css_animation {
	.pswp__preloader--active {
		opacity: 1;

		.pswp__preloader__icn {
			animation: clockwise 500ms linear infinite;
		}

		.pswp__preloader__donut {
			animation: donut-rotate 1000ms cubic-bezier(.4,0,.22,1) infinite;
		}
	}
	
	.pswp__preloader__icn {
		background: none;
		opacity: 0.75;
		width: 14px;
		height: 14px;
		position: absolute;
		left: 15px;
		top: 15px;
		margin: 0;
	}

	
	.pswp__preloader__cut {
		/* 
			The idea of animating inner circle is based on Polymer ("material") loading indicator 
			 by Keanu Lee https://blog.keanulee.com/2014/10/20/the-tale-of-three-spinners.html
		*/
		position: relative;
		width: 7px;
		height: 14px;
		overflow: hidden;
	}

	.pswp__preloader__donut {
		box-sizing: border-box;
		width: 14px;
		height: 14px;
		border: 2px solid #FFF;
		border-radius: 50%;
		border-left-color: transparent;
		border-bottom-color: transparent;
		position: absolute;
		top: 0;
		left: 0;
		background: none;
		margin: 0;
	}
}

@media screen and (max-width: 1024px) {
	.pswp__preloader {
		position: relative;
		left: auto;
		top: auto;
		margin: 0;
		float: right;
	}
}

@keyframes clockwise {
  0% { transform: rotate(0deg) }
  100% { transform: rotate(360deg) }
}

@keyframes donut-rotate {
  0% { transform: rotate(0) }
  50% { transform: rotate(-140deg) }
  100% { transform: rotate(0) }
}


/*
	
	6. Additional styles

 */

/* root element of UI */
.pswp__ui {
	-webkit-font-smoothing: auto;
	visibility: visible;
	opacity: 1;
	z-index: $pswp__root-z-index + 50;
}

/* top black bar with buttons and "1 of X" indicator */
.pswp__top-bar {
	position: absolute;
	left: 0;
	top: 0;
	height: 44px;
	width: 100%;
}

.pswp__caption,
.pswp__top-bar,
.pswp--has_mouse .pswp__button--arrow--left,
.pswp--has_mouse .pswp__button--arrow--right {
	-webkit-backface-visibility: hidden; 
	will-change: opacity;
	transition: opacity $pswp__controls-transition-duration cubic-bezier(.4,0,.22,1);
}

/* pswp--has_mouse class is added only when two subsequent mousemove events occur */
.pswp--has_mouse {
	.pswp__button--arrow--left,
	.pswp__button--arrow--right {
		visibility: visible;
	}
}

.pswp__top-bar,
.pswp__caption {
	background-color: rgba(0,0,0,0.5);
}

/* pswp__ui--fit class is added when main image "fits" between top bar and bottom bar (caption) */
.pswp__ui--fit {
	.pswp__top-bar,
	.pswp__caption {
		background-color: rgba(0,0,0,0.3);
	}
}

/* pswp__ui--idle class is added when mouse isn't moving for several seconds (JS option timeToIdle) */
	
.pswp__ui--idle {
	.pswp__top-bar { 
		opacity: 0; 
	}

	.pswp__button--arrow--left,
	.pswp__button--arrow--right {
		opacity: 0;
	}
}

/*
	pswp__ui--hidden class is added when controls are hidden
	e.g. when user taps to toggle visibility of controls
*/
.pswp__ui--hidden {
	.pswp__top-bar,
	.pswp__caption,
	.pswp__button--arrow--left,
	.pswp__button--arrow--right {
		/* Force paint & create composition layer for controls. */
		opacity: 0.001; 
	}
}

/* pswp__ui--one-slide class is added when there is just one item in gallery */
.pswp__ui--one-slide {
	.pswp__button--arrow--left,
	.pswp__button--arrow--right,
	.pswp__counter {
		display: none;
	}
}

.pswp__element--disabled {
	display: none !important;
}

@if $pswp__include-minimal-style == true {
	.pswp--minimal--dark {
		.pswp__top-bar {
			background: none;
		}
	}
}














.product-gallery--expand {
  @include font($font-body);
  @include font-size-body-smaller;
  position: absolute;
  right: 0;
  bottom: 0;
  z-index: $index-main + 1;
  padding: rem(6px) rem(10px) rem(6px) rem(9px);
  margin: 0 $space-x-small $space-x-small 0;
  font-weight: normal;
  color: $color-text;
  cursor: pointer;
  background: rgba($color-background, 0.9);
  border: 0;
  border-radius: 3px;
  box-shadow: 0 0 0 1px $color-border-soft;

  &.expand--hide-mobile {
    @include media($max: $bp-small) {
      display: none;
    }
  }

  &.expand--hide-desktop {
    @include media($min: $bp-small) {
      display: none;
    }
  }

  @include media($min: $bp-small) {
    margin-right: $space-x-small;
  }

  [data-selected-media-type="video"] & ,
  [data-selected-media-type="external_video"] & ,
  [data-selected-media-type="model"] & {
    display: none;
  }

  span {
    display: flex;
    align-items: center;
    outline: none;

    svg {
      margin-right: rem(5px);
    }
  }

  .tap-text {
    display: none;
  }

  .has-touch & {
    .click-text {
      display: none;
    }

    .tap-text {
      display: flex;
    }
  }
}

// Photoswipe overrides
.pswp {
  .pswp__bg {
    background: $color-background;
    transition: opacity $duration--small-600 $ease-out--strong;
  }

  .pswp__img--placeholder {
    animation: shimmer-background $duration--large-400 $ease-in-out--normal infinite;
    animation-fill-mode: forwards;
    animation-direction: alternate;
  }

  .pswp__top-bar {
    background: transparent;
    opacity: 1;
  }

  .pswp__button--close {
    width: rem(40px);
    height: rem(40px);
    margin: $gutter-outer-small + 2px;
    color: $color-black;
    background: $color-white;
    border-radius: 100%;
    box-shadow: 0 0 0 1px rgba(127,127,127,0.03), 0 2px 5px rgba(127, 127, 127, 0.3);
    transition:
      transform $duration--small-400 $ease-in-out--normal,
      opacity $duration--small-400 $ease-in-out--normal,
      box-shadow $duration--small-400 $ease-in-out--normal;
    opacity: 0;

    @include media($min: $bp-small) {
      width: rem(48px);
      height: rem(48px);
      margin: $gutter-outer;
    }

    &:hover {
      box-shadow: 0 0 0 1px rgba(127,127,127,0.04), 0 3px 10px rgba(127, 127, 127, 0.4);
      transform: scale(1.125);

      span {
        opacity: 0.8;
        transition: opacity $duration--small-400 $ease-in-out--normal;
      }
    }

    span {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100%;
      width: 100%;
      opacity: 0.6;
      outline: none;
    }
  }

  .product-zoom--thumbnails {
    position: absolute;
    bottom: 0;
    width: 100%;
    margin: $space-xx-small 0;
    padding: $space-xxx-small $space-xx-small;
    opacity: 0;
    background: $color-background;
    transition: opacity $duration--small-600 $ease-out--normal;

    @include media($min: $bp-small) {
      top: 0;
      bottom: auto;
      width: auto;
      margin: $gutter-outer;
      padding: 0 0 $local-thumbnail-space;
      background: transparent;
    }
  }

  .gallery-navigation--scroll-button {
    top: 0;
    padding: 0 $space-xx-small;
  }

  .product-zoom--thumb-scroller {
    padding-top: rem(2px);
    padding-bottom: rem(2px);
    white-space: nowrap;
    overflow: auto;
    scroll-behavior: smooth;

    @include media($min: $bp-small) {
      display: flex;
      flex-direction: column;
      flex-wrap: wrap;
      padding: 0;
      max-height: rem(500px);
      overflow: visible;
    }
  }

  &.pswp--animated-in {
    .product-zoom--thumbnails,
    .pswp__button--close {
      opacity: 1;
    }
  }

  @include media($max: $bp-small) {
    .product-gallery--media-thumbnail {
      margin-top: 0;
    }
  }

  @include media($min: $bp-small) {
    .product-gallery--media-thumbnail {
      width: 51px;
      height: auto;
    }

    .product-gallery--media-thumbnail-img {
      width: 100%;
    }
  }
}

@keyframes drift-fadeZoomIn {
  0% { transform: scale(0.8); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}

@keyframes drift-fadeZoomOut {
  0% { opacity: 1; }
  100% { opacity: 0; }
}

@keyframes drift-fadeIn {
  0% { transform: scale(1); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}

@keyframes drift-fadeOut {
  0% { transform: scale(1); opacity: 1; }
  100% { transform: scale(1); opacity: 0; }
}

@keyframes drift-loader-rotate {
  0% { transform: translate(-50%, -50%) rotate(0); }
  50% { transform: translate(-50%, -50%) rotate(180deg); }
  100% { transform: translate(-50%, -50%) rotate(360deg); }
}

.product-gallery--zoomed-image {
  position: absolute;
  display: inline-block;
  top: 0;
  right: 0;
}

.drift-zoom-pane {
  background: $color-white;
  /* This is required because of a bug that causes border-radius to not
  work with child elements in certain cases. */
  transform: translate3d(0, 0, 0);
  z-index: 3;
  box-shadow: 0 1px 5px rgba(127,127,127,0.02), 0 5px 18px rgba(127,127,127,0.2);

  .product-gallery--zoomed-image & {
    height: rem(550px);
    width: rem(550px);
    left: $gutter-outer;

    .layout--two-col & {
      @include media($max: $bp-xxl) {
        height: rem(450px);
        width: rem(450px);
      }
    }
  }

  img {
    top: 0;
    left: 0;
  }
}

.drift-zoom-pane.drift-opening {
  animation: drift-fadeZoomIn $duration--small-600 $ease-in--strong;

  // If the zoom is inline, it's inside the image element
  .product-gallery--image & {
    animation: drift-fadeIn $duration--small-600 $ease-in--strong;
  }
}

.drift-zoom-pane.drift-closing {
  animation: drift-fadeZoomOut $duration--small-400 $ease-out--strong;

  // If the zoom is inline, it's inside the image element
  .product-gallery--image & {
    animation: drift-fadeOut $duration--small-400 $ease-out--strong;
  }
}

.drift-zoom-pane.drift-inline {
  position: absolute;
  width: 150px;
  height: 150px;
  border-radius: 75px;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.3);
}

.drift-zoom-pane-loader {
  position: absolute;
  top: 50%;
  left: 50%;
  display: none;
  transform: translate(-50%, -50%);
  width: 50px;
  height: 50px;
  animation: drift-loader-rotate 0.6s infinite linear;

  .drift-loading & {
    display: block;
  }

  &::after {
    position: absolute;
    top: 50%;
    left: 50%;
    display: block;
    font-size: 0;
    content: url('data:image/svg+xml;utf8, <svg width="50" height="50" viewBox="0 0 77 77" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M38.5 76.5C17.513 76.5 0.5 59.487 0.5 38.5C0.5 17.513 17.513 0.5 38.5 0.5C59.487 0.5 76.5 17.513 76.5 38.5C76.5 59.487 59.487 76.5 38.5 76.5ZM38.5 73.5C57.83 73.5 73.5 57.83 73.5 38.5C73.5 19.17 57.83 3.5 38.5 3.5C19.17 3.5 3.5 19.17 3.5 38.5C3.5 57.83 19.17 73.5 38.5 73.5Z" fill="%23#{$color-text-encoded}" fill-opacity="0.16"/><path opacity="0.9" d="M38.5 75C58.658 75 75 58.658 75 38.5" stroke="%23#{$color-text-encoded}" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>');
    transform: translate(-50%, -50%);
  }
}

.drift-bounding-box {
  background: rgba(255, 255, 255, 0.25);
  box-shadow: 0 0 0 1px rgba(0,0,0,0.4) inset;
  z-index: $index-main;
}

.price--compare-at {
  display: none;
  font-size: rem(13px);
  line-height: 1.38;
  color: $color-text-light;
  text-decoration: line-through;

  &.visible {
    display: inline-block;
  }
}

.price--main {
  @include font-size-body;
  line-height: rem(23px);
}

.product-recently-viewed--section {
  position: relative;

  &.hide {
    display: none;
  }

  .flickity-viewport {
    position: relative;

    &:before,
    &:after {
      content: '';
      position: absolute;
      top: 0;
      left: -$gutter-content;
      right: 100%;
      bottom: 0;
      background: linear-gradient( to right, $color-background-light 10%, rgba($color-background-light, 0) 100%);
      z-index: 2;
    }

    &:after {
      left: 100%;
      right: -$gutter-content;
      background: linear-gradient( to left, $color-background-light 10%, rgba($color-background-light, 0) 100%);
    }
  }

  .flickity-prev-next-button {
    opacity: 1;

    svg {
      transform: scale(1);
      transition:
        transform $duration--small-400 $ease-in-out--normal,
        fill $duration--medium-200 $ease-in-out--normal;
      fill: $color-text;
    }

    &:disabled {
      cursor: default;
      opacity: 0.15;
    }

    &:hover {
      &:not([disabled]) {
        opacity: 1;

        svg {
          transform: scale(1.2);
        }
      }
    }

    &:active {
      &:not([disabled]) {
        opacity: 0.5;
      }
    }

    @include media($max: $bp-medium) {
      display: none;
    }

    &.next {
      @include media($min: $bp-medium, $max: $bp-large) {
        right: rem(25px);
      }
    }

    &.previous {
      @include media($min: $bp-medium, $max: $bp-large) {
        left: rem(25px);
      }
    }
  }
}

.product-recently-viewed-wrapper {
  padding: $gutter-content $gutter-content $gutter-outer-small;
  background-color: $color-background-light;
}

.product-recently-viewed--content {
  display: flex;
  width: calc(100%);
  padding: 0 $gutter-content;
  margin: $space-x-large auto;
  overflow: hidden;
  outline: 0;

  @include media($min: $bp-medium) {
    width: calc(100% - (70px - #{$gutter-content * 2}));
  }

  @include media($max: $bp-medium) {
    padding: 0 calc(#{$space-xxx-small / 2});
  }
}

.product-recently-viewed-header {
  align-items: center;
  justify-content: space-between;
  width: 100%;

  @include media($min: $bp-medium) {
    display: flex;
  }
}

.product-recently-viewed-heading {
  margin: 0;

  @include media($max: $bp-medium) {
    margin-bottom: $space-xxx-small;
  }
}

.product-recently-viewed-clear {
  @extend %link--default;
  font-size: $button-small-size;
  cursor: pointer;
  background-color: transparent;
  border: none;
}

.product-recently-viewed-card {
  @include font-size-body-small;
  width: rem(175px);
  padding: 0;
  height: auto;
  margin-right: $gutter-outer-small;
  margin-bottom: 4px;
  background: $color-white;
  transition:
    transform $duration--zero,
    opacity $duration--medium-200;
  list-style-type: none;

  & .productitem {
    padding-top: 10px;
  }

  &.hide-card {
    opacity: 0;
  }

  &.move-card {
    transform: translateX(calc(-100% - #{$gutter-outer-small}));
    transition:
      transform $duration--medium-600,
      opacity $duration--medium-100;
  }

  @include media($min: $bp-medium) {
    width: rem(200px);
    padding: 0;
    margin-right: $gutter-content;
  }
}

.product-recently-viewed-card-time {
  @include font-size-body-smallest;
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: $space-x-small;
  line-height: 1;
  opacity: 0.7;

  @include media($min: $bp-medium) {
    @include font-size-body-smaller;
  }
}

.product-recently-viewed-card-remove {
  padding: 5px;
  margin-right: -6px;
  cursor: pointer;
  border: none;
  background-color: transparent;
  color: $color-text;

  @include media($min: $bp-medium) {
    margin-right: -10px;
  }

  svg {
    display: block;
    fill: currentColor;
  }
}

.product-recently-viewed-card-image {

  &.product-recently-viewed-card-image-placeholder {
    background-color: $color-placeholder-background;
  }
}

.product-recently-viewed-card-price {
  padding: $gutter-content 0 $gutter-outer-small / 2;

  .price--main {
    color: $color-link;
  }

  .product--badge {
    @include font-size-body-smaller;
  }
}

.product-recently-viewed-card-title {
  position: relative;
  display: block;
  height: 45px;
  color: $color-text;
  @include font-size-body-small;
  line-height: 1.5;
  text-decoration: none;
  overflow: hidden;

  &:after {
    content: '';
    position: absolute;
    width: 40%;
    height: rem(20px);
    right: 0;
    bottom: 0;
    background: linear-gradient(to right, rgba($color-white, 0), $color-white 50%);
    text-align: right;
  }
}

.product-reviews--content {

  .spr-container {
    padding: 0;
    border: 0;
  }

  // Header
  .spr-header {
    padding: $space-large $space-medium;
  }

  .spr-header-title {
    @include font-size-heading-4;
    margin-bottom: 0;
    color: $color-heading;
  }

  @media only screen and (max-width: 480px) {
    .spr-summary,
    .spr-header-title {
      text-align: left;
    }
  }

  // Current rating
  .spr-summary {
    @include font-size-heading-3;
    position: relative;
    margin-top: $space-x-small;

    .spr-starrating {
      display: block;
      margin-right: 0;

      @include media($min: $bp-small) {
        display: inline-block;
      }

      .spr-icon {
        @include font-size-heading-3;
      }
    }
  }

  .spr-summary-caption {
    @include font-size-body;
    display: block;
    margin-top: $space-x-small;
    line-height: 1.5;
    color: $color-text;
    vertical-align: bottom;

    @include media($min: $bp-small) {
      display: inline-block;
      margin-top: ($font-h3-size - rem($font-body-size)) / 2;
      margin-left: $space-xx-small;
    }

    span.spr-summary-actions-togglereviews {
      color: $color-text-light;
    }

    a.spr-summary-actions-togglereviews {
      @extend %link--default;
      opacity: 1;
    }
  }

  .spr-summary-actions {
    display: block;
    margin-top: $space-large;

    @include media($min: $bp-small) {
      position: absolute;
      right: 0;
      bottom: 0;
      margin-top: 0;
    }
  }

  .spr-summary-actions-newreview {
    @extend %button-primary;
    background: black;
    float: none;
  }

  .spr-form-message-error {
    @extend %message--error;
  }

  // Review form
  .spr-form {
    padding: $space-large $space-medium;
    margin-top: 0;
    border: 0;
    border-top: 1px solid $color-border-soft;

    @include media($min: $bp-small) {
      padding-top: $space-xx-large;
      padding-bottom: $space-xx-large;
    }

    .spr-form-title {
      @include font-size-heading-4;
      color: $color-heading;
    }

    form {
      max-width: rem(640px);
      margin-right: auto;
      margin-left: auto;
    }

    .spr-form-label {
      @extend %form-label;
      @include font($font-body, $font-family: false, $font-weight: false);
      display: block;
      margin-top: $space-large;
      color: $color-text;
    }

    .spr-form-contact-name .spr-form-label {
      margin-top: $space-small;
    }

    .spr-form-input {
      display: block;
      margin-top: $space-x-small;
    }

    .spr-form-input-text,
    .spr-form-input-email,
    .spr-form-input-textarea {
      @extend %form-control-base, %form-control-input;
      padding-top: rem(15px);
      padding-bottom: rem(15px);
      margin-bottom: 0;

      &:-ms-input-placeholder {
        color: $color-input-text;
        opacity: 0.4;
      }

      &::-ms-input-placeholder {
        color: $color-input-text;
        opacity: 0.4;
      }

      &::placeholder {
        color: $color-input-text;
        opacity: 0.4;
      }

      &.spr-form-input-error {
        border-color: $color-error;
      }
    }

    .spr-form-input-textarea {
      @extend %form-control-textarea;
    }

    .spr-form-review-rating {

      .spr-icon {
        @include font-size-heading-3;
        width: $font-h3-size;
        height: $font-h3-size;
        color: $color-star;
      }
    }

    .spr-form-actions {
      margin-top: $space-large;
    }

    .spr-button-primary {
      float: none;
    }

    .spr-form-contact-name,
    .spr-form-contact-email,
    .spr-form-contact-location,
    .spr-form-review-rating,
    .spr-form-review-title,
    .spr-form-review-body {
      margin-bottom: 0;
    }

  }

  // Review / Pagination container
  .spr-content {

    // Review container
    .spr-reviews {
      @extend %clearfix;
      padding: $space-x-large / 2 $space-medium;
      margin-top: 0;
      border: 0;
      border-top: 1px solid $color-border-soft;
    }

    // Individual review
    .spr-review {
      padding: $space-x-large / 2 0;
      margin: 0;
      border: 0;

      @include media($min: $bp-small) {
        float: left;
        width: calc(50% - #{$space-medium});

        &:nth-child(2n + 1) {
          margin-right: $space-medium * 2;
          clear: left;
        }
      }

      &:first-child {
        margin-top: 0;
      }

      .spr-review-header-starratings {
        margin-bottom: $space-xxx-small;
      }

      .spr-review-header-title {
        @include font-size-heading-4;
        margin-top: $space-xx-small;
        color: $color-heading;
      }

      .spr-review-header-byline {
        @include font-size-body-small;
        display: block;
        margin-top: $space-xx-small;
        margin-bottom: 0;
        font-style: font-style($font-body);
        color: $color-text-light;

        strong {
          @include font($font-body, $font-family: false, $font-weight: initial);
        }
      }

      .spr-review-content {
        margin-top: $space-x-small;
        margin-bottom: 0;

        .spr-review-content-body {
          @include font-size-body;
          line-height: 1.625;
        }
      }

      .spr-review-reply {
        padding: $space-small;
        margin-top: $space-medium;
        margin-bottom: 0;
        background-color: $color-background-light;

        .spr-review-reply-body {
          @include font-size-body-smaller;
        }
      }

      .spr-review-footer {
        margin-top: $space-medium;

        a {
          @extend %link--default;
          font-size: rem(12px);
        }
      }
    }

    // Review pagination
    .spr-pagination {
      padding: $space-large 0 0;
      clear: both;
      border-top: 0;

      a {
        @extend %link--default;
        padding: 0 rem(9px);
      }
    }

    .spr-pagination-page {
      display: inline-block;
      color: $color-text;

      &.is-active {
        padding: rem(9px);
      }
    }

    .spr-pagination-prev,
    .spr-pagination-next {
      position: relative;
      right: auto;
      left: auto;
      display: inline-block;
    }
  }
}

$local-expander-width: rem(70px);

.promo-block {
  position: relative;
  background-position: 50% 50%;
  background-repeat: no-repeat;
  background-size: cover;

  @include media($max: $bp-small) {
    border-radius: 4px;
  }
}

.promo-block--content-wrapper {
  position: relative;
  width: 100%;
  transition: font-size $duration--medium-100 $ease-in-out--normal;

  .promo-block--content-align-top-center &,
  .promo-block--content-align-center-center &,
  .promo-block--content-align-bottom-center & {
    text-align: center;

    .promo-block--header,
    .promo-block--text {
      margin-right: auto;
      margin-left: auto;
    }
  }

  .promo-block--content-align-top-right &,
  .promo-block--content-align-center-right &,
  .promo-block--content-align-bottom-right & {
    text-align: right;

    .promo-block--header,
    .promo-block--text {
      margin-right: 0;
      margin-left: auto;
    }
  }

  @include media($max: $bp-small) {
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    .promo-block--header,
    .promo-block--text {
      max-width: 65%;
    }

    .promo-block--expanded:not(.animating-out) & {
      white-space: normal;
    }

    .promo-block--expanded &,
    .promo-block--expanded:not(.animating-out) & {
      max-width: 100%;
      .promo-block--header,
      .promo-block--text {
        max-width: 80%;
      }
    }
  }

  .promo-mosaic--column-narrow & {
    @include media($min: $bp-small) {
      max-width: 70%;
    }
  }

  .promo-grid--container & {
    @include media($min: $bp-small, $max: $bp-medium) {
      max-width: 80%;
    }
  }
}

.promo-block--content {
  position: relative;
  display: flex;
  align-items: flex-start;
  height: 100%;
  padding: $space-x-large $space-medium;
  color: currentColor;
  text-decoration: none;
  transition: height $duration--medium-100 $ease-in-out--normal;

  @include media($max: $bp-small) {
    height: 120px;
    padding-right: $local-expander-width + $space-medium;
    margin-top: 10px;
    cursor: pointer;
    border-radius: 4px;

    &.animating,
    &.promo-block--expanded {
      overflow: hidden;
    }

    &.animating-in,
    &.promo-block--expanded:not(.animating-out) {
      height: 270px;
    }

    &.promo-block--expanded,
    &.promo-block--expanded:not(.animating-out) {
      padding-right: 1.25em;
    }

    &.promo-block--expanded.promo-block--unlinked {
      cursor: default;
    }
  }

  @include media($min: $bp-xl) {
    padding: $space-large;
  }
}

.promo-block--content-align-center-left,
.promo-block--content-align-center-center,
.promo-block--content-align-center-right {
  align-items: center;
}

.promo-block--content-align-bottom-left,
.promo-block--content-align-bottom-center,
.promo-block--content-align-bottom-right {
  align-items: flex-end;
}

@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  // IE11 has issues flex aligning within a container without a defined height, so we
  // fall back to flex-start, which works as expected.
  .promo-block--content-align-center-left,
  .promo-block--content-align-center-center,
  .promo-block--content-align-center-right,
  .promo-block--content-align-bottom-left,
  .promo-block--content-align-bottom-center,
  .promo-block--content-align-bottom-right {
    align-items: flex-start;
  }
}

.promo-block--background {
  position: absolute;
  width: 100%;
  height: 100%;
}

.promo-block--expander {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: $local-expander-width;
  color: $color-white;
  cursor: pointer;
  background-color: transparent;
  background-image: linear-gradient(90deg, rgba($color-black, 0) 0%, rgba($color-black, 0.3) 100%);
  border: 0;
  border-radius: 0 4px 4px 0;
  outline: 0;
  transition: opacity $duration--medium-100 $ease-in-out--normal;

  @include media($min: $bp-small) {
    display: none;
  }

  // Button should be hidden when expanded
  .promo-block--expanded & {
    visibility: hidden;
  }

  // Button should be visible when expanded, but is collapsing
  .promo-block--expanded.animating-out & {
    visibility: visible;
  }

  // Button should be transparent when collapsing, then opaque as expanding
  .animating-in &,
  .promo-block--expanded:not(.animating-out) & {
    opacity: 0;
    transition-delay: $duration--zero;
  }

  svg {
    position: absolute;
    bottom: 50%;
    left: 50%;
    display: block;
    width: 20px;
    height: 12px;
    margin-bottom: -7px;
    margin-left: -10px;
    overflow: visible;
    filter: drop-shadow(0 0 4px rgba($color-black, 0.6));
    transform-origin: 50% 50%;
  }
}

.promo-block--text,
.promo-block--header {
  max-width: 60%;
  transition: font-size $duration--medium-100 $ease-in-out--normal;

  @include media($max: $bp-small) {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;

    .promo-block--expanded:not(.animating-out) & {
      white-space: normal;
    }
  }
}

.promo-block--header {
  @include font-size-heading-3;
  margin-top: 0;
  margin-bottom: 0;
  line-height: 1.2;

  @include media($max: $bp-small) {
    .animating-in &,
    .promo-block--expanded:not(.animating-out) & {
      @include font-size-heading-1;
    }
  }

  @include media($min: $bp-small) {
    .promo-grid--container & {
      @include font-size-heading-3;
    }
  }

  @include media($min: $bp-large) {
    line-height: 1.4;

    .promo-mosaic--column-full &,
    .promo-mosaic--column-wide & {
      @include font-size-heading-large;
    }

    .promo-mosaic--column-narrow & {
      @include font-size-heading-3;
    }

    .promo-grid--container & {
      @include font-size-heading-medium;
    }
  }
}

.promo-block--text {
  @include font-size-body-small;
  margin-top: $space-xxx-small;
  margin-bottom: 0;
  line-height: 1.4;

  @include media($max: $bp-small) {
    .animating-in &,
    .promo-block--expanded & {
      @include font-size-body-medium;
    }
  }

  @include media($min: $bp-small) {
    .promo-mosaic--column-full &,
    .promo-mosaic--column-wide & {
      @include font-size-body-medium;
    }
  }

  @include media($min: $bp-large) {
    .promo-mosaic--column-full &,
    .promo-mosaic--column-wide & {
      @include font-size-body-large;
    }

    .promo-mosaic--column-narrow &,
    .promo-grid--container & {
      @include font-size-body-medium;
    }
  }
}

.promo-block--button {
  display: none;
  margin-top: $space-medium;
  transition:
    background-color $duration--medium-400 $ease-out--normal,
    font-size $duration--small-400 $ease-out--normal,
    padding $duration--small-400 $ease-out--normal,
    opacity $duration--medium-100 $ease-in-out--normal;
  opacity: 0;

  .animating-in &,
  .promo-block--expanded & {
    display: inline-block;
  }

  .promo-block--expanded:not(.animating-out) & {
    opacity: 1;
  }

  @include media($min: $bp-small) {
    display: inline-block;
    opacity: 1;

    .promo-mosaic--column-full,
    .promo-mosaic--column-wide & { @include button-size(medium); }
  }

  @include media($min: $bp-large) {
    .promo-mosaic--column-full,
    .promo-mosaic--column-wide & {
      @include button-size(large);
      margin-top: $font-heading-medium;
    }

    .promo-mosaic--column-narrow &,
    .promo-grid--container & { @include button-size(medium); }
  }
}

.share-buttons {
  margin-top: $space-large;

  @include media($min: $bp-small) {
    margin-top: $space-x-large;
  }

  .share-buttons--title {
    @include font-size-body-smaller;
    margin-top: 0;
    margin-bottom: 0;
    color: $color-text;
    font-weight: 700;
  }

  .share-buttons--list {
    margin-top: $space-small;
    font-size: 0;

    @include media($min: $bp-small) {
      margin-top: $space-x-small;
    }
  }

  .share-buttons--button {
    display: inline-block;
    width: 30px;
    height: 30px;
    padding: 2px;
    color: $color-white;
    border-radius: 100%;

    &:not(:first-child) {
      margin-left: $space-xx-small;
    }

    @include media($min: $bp-small) {
      width: 24px;
      height: 24px;
      padding: 1px;
    }

    svg {
      display: block;
      width: 100%;
      height: 100%;
      fill: currentColor;
    }
  }

  .share-buttons--facebook {
    // background-color: $color-facebook;
    background-color: black;
  }

  .share-buttons--twitter {
    // background-color: $color-twitter;
    background-color: black;
  }
  
  .share-buttons--linkedin {
    // background-color: $color-linkedin;
    background-color: black;
  }

  .share-buttons--pinterest {
    // background-color: $color-pinterest;
    background-color: black;
  }
}

.site-header-actions {
  @extend %menu;
  @include font-size-body-small($font-menu-capitalize);
  flex: 1 0 auto;
  padding-left: 0;
  margin-top: 0;
  margin-bottom: 0;
  list-style: none;

  li {
    display: inline-block;

    a {
      @include font-size-body-small($font-menu-capitalize);
      padding-right: $site-nav-link-space-horizontal - 3px;
      padding-left: $site-nav-link-space-horizontal - 3px;
    }
  }

  .site-navigation-wrapper & {
    display: inline-block;
    max-width: $header-content-offset-right;
    margin-top: $site-nav-item-space;
    text-align: right;

    a {
      opacity: 0.8;
    }
  }

  .site-mobile-nav & {
    @include font-size-body($font-menu-capitalize);
    display: block;
    height: $header-content-height;
    padding-right: $gutter-outer;
    margin: 4px 16px;

    li {
      line-height: $header-content-height;
      opacity: 0.8;
    }

    a {
      padding-right: $site-nav-link-space-horizontal - 7px;
      padding-left: $site-nav-link-space-horizontal - 7px;
    }
  }

  .site-header-account-link:last-child {
    margin-right: -1 * $site-nav-link-space;
  }

  .currency-converter-wrapper {

    .site-navigation-wrapper & {
      margin-right: -1 * rem(6px);
      opacity: 0.8;
    }

    .form-field-select {
      @extend %menu;
      @include font-size-body-small($font-menu-capitalize);
      padding-top: $site-nav-item-space;
      padding-right: rem(20px);
      padding-bottom: $site-nav-item-space;
      color: currentColor;
      background-color: transparent;
      border: 0;
      box-shadow: none;

      &:focus {
        outline: solid rgba($color-header-text, 0.5);
      }

      // Some browsers extend <select> color to options
      // Style as consistently legible <option>
      option {
        font-weight: font-weight($font-menu);
        color: $color-black;
        background-color: $color-white;
      }

      .site-mobile-nav & {
        @include font-size-body($font-menu-capitalize);
      }
    }

    svg {
      right: $site-nav-link-space-horizontal - 8px;
      color: currentColor;
    }
  }
}

.site-navigation-wrapper {
  @extend %clearfix;
  display: none;
  background-color: $color-header-background;
  transition: margin-top $duration--small-400 $ease-out--normal;


  .site-header-sticky--scrolled & {
    position: relative;
    z-index: $index-header-internal-nav;
    width: 100%;
  }

  .site-header-nav--open & {
    @include media($min: $bp-large) {
      display: block;
    }
  }
}

.intersection-target {
  position: absolute;
  top: 30vh;
  pointer-events: none;
}

.site-navigation {
  @extend %layout-container;
  display: flex;
  background-color: #000000;
  color: white;

  ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

  a {
    @extend %menu;
    position: relative;
    display: inline-block;
    padding: $site-nav-link-space-vertical $site-nav-link-space-horizontal;
    line-height: $header-line-height;
    color: $color-header-text;
    text-decoration: none;

    &:focus {
      outline: solid rgba($color-header-text, 0.5);
      outline-offset: -5px;
    }

    &.navmenu-item-active:focus {
      outline: 0;
    }
  }

  .navmenu-icon {
    position: absolute;
    top: 50%;
    right: $site-subnav-space + 5px;
    display: inline-block;
    height: 6px;
    margin-top: -3px;

    &.navmenu-icon-depth-1 {
      position: relative;
      top: -1px;
      right: -3px;
      transform: rotate(90deg);
    }

    svg {
      display: block;
      width: 8px;
      height: 6px;
      transform: rotate(-90deg);
      fill: currentColor;
    }

    .icon-chevron-down-left,
    .icon-chevron-down-right {
      transition:
        transform $duration--medium-400 $ease-out--normal,
        fill $duration--medium-400 $ease-out--normal;
      transform-origin: 50% 50%;
    }
  }

  .navmenu {
    display: flex;
    flex-wrap: wrap;
    padding: 0;
  }

  .navmenu-depth-1 {
    display: inline-block;
    height: 100%;
    max-width: 100%;
    flex: 1 1 auto;
    margin-left: -1 * $site-nav-link-space-horizontal;

    > li {
      display: inline-block;
      padding-top: $site-nav-item-space;
      padding-bottom: $site-nav-item-space;
      vertical-align: top;

      > a {
        @extend %menu;
        transition: opacity $duration--small-600 $ease-out--normal;

        &:hover,
        &[aria-expanded="true"] {
          opacity: 0.8;
        }
      }
    }
  }

  .navmenu-submenu {
    position: absolute;
    top: 100%;
    z-index: 100;
    display: none;
    width: 240px;
    padding-top: $site-subnav-space;
    padding-bottom: $site-subnav-space;
    background-color: $color-background;
    box-shadow: 0 3px 4px transparentize($color-border, 0.75);

    &.navmenu-submenu-inline-children {
      overflow-x: hidden;
      overflow-y: auto;

      .navmenu-icon svg {
        transform: rotate(0deg);
      }

      .navmenu-depth-3 {
        position: relative;
        top: 0;
        left: 0;
        padding-top: 0;
        margin-left: 0;
        box-shadow: none;
      }
    }
  }

  .navmenu-depth-2 {
    margin-left: -1 * rem(10px);

    .navmenu-link {
      @include font($font-body);
      @include font-size-body;
      @extend %link--text;
      z-index: 2;
      display: block;
      padding: rem($site-nav-link-space) rem($gutter-outer + $site-nav-link-space) rem($site-nav-link-space) rem($gutter-outer);
      letter-spacing: 0;
      text-transform: none;
      transition: color $duration--small-600 $ease-out--normal;
      border: solid rgba($color-link, 0) 1px;

      &:hover,
      &.navmenu-active {
        color: $color-link;
      }

      &:hover {
        border: solid rgba($color-link, 0.5) 1px;
        // outline-offset: 2px;
      }
    }

    .navmenu-item-text {
      transition: color $duration--small-600 $ease-out--normal;

      &:hover {
        color: $color-link;
      }
    }
  }

  .navmenu-depth-3 {
    top: -1 * $site-subnav-space;
    left: 100%;
    min-height: 100%;
    margin-left: -1px;

    > li a {
      @include font-size-body;
      letter-spacing: 0;
      text-transform: none;
    }
  }

  .navmenu-link-parent,
  .navmenu-item-parent {
    position: relative;
  }

  .navmenu-meganav-item-parent,
  .navmenu-meganav-item-parent > a {
    position: inherit;
  }

  .navmenu-meganav-item,
  .navmenu-meganav--image-text {
    > a:focus {
      outline: solid rgba($color-link, 0.5);
      outline-offset: -2px;
    }
  }

  .site-header--full-width & {
    width: 100%;
    max-width: 100%;
  }
}

// Desktop meganav animations
.navmenu-submenu.navmenu-meganav {
  .meganav-ghost {
    position: absolute;
    top: 0;
    pointer-events: none;
  }

  &[data-animation-state="closed"] {
    display: none;
  }

  &[data-animation] {
    display: block;
    height: var(--menu-closed-height, 0);
    opacity: 0;

    .navmenu-meganav-wrapper {
      opacity: 0;
      transform: translate3d(0, -10px, 0);
    }
  }

  &[data-animation="ghost=>open"] {
    transition: height $duration--small-400 $ease-in-out--normal;

    .navmenu-meganav-wrapper {
      transition: opacity $duration--small-400 $ease-in-out--normal $duration--small-200;
    }

    .navmenu-meganav-wrapper.meganav-ghost {
      transition: opacity $duration--small-200 $ease-in-out--normal;
    }
  }

  &[data-animation="closed=>open"] {
    opacity: 1;
    transition:
      height $duration--medium-100 $ease-out--normal;

    .navmenu-meganav-wrapper {
      transition:
        opacity $duration--small-600 $ease-in-out--normal $duration--small-400,
        transform $duration--small-600 $ease-in-out--normal $duration--small-300;
    }
  }

  &[data-animation="open=>closed"] {
    transition:
      height $duration--small-400 $ease-in--normal,
      opacity $duration--small-200 $ease-in--normal $duration--small-200;

    .navmenu-meganav-wrapper,
    > .navmenu-item {
      transition:
        opacity $duration--small-300 $ease-in--normal $duration--small-100,
        transform $duration--small-400 $ease-in--normal;
    }
  }

  &[data-animation-state="ghost"] {
    display: block;
    height: var(--menu-closed-height, auto);
    opacity: 1;

    .navmenu-meganav-wrapper {
      opacity: 0;
      transform: translate3d(0, 0, 0);
    }

    .navmenu-meganav-wrapper.meganav-ghost {
      opacity: 1;
      transform: translate3d(0, 0, 0);
    }
  }

  &[data-animation-state="open"] {
    display: block;
    height: var(--menu-open-height, auto);
    opacity: 1;

    .navmenu-meganav-wrapper,
    > .navmenu-item {
      opacity: 1;
      transform: translate3d(0, 0, 0);
    }

    .navmenu-meganav-wrapper.meganav-ghost {
      opacity: 0;
    }
  }
}

// All desktop navigation standard dropdown animations
.navmenu-submenu:not(.navmenu-meganav) {
  &[data-animation-state="closed"] {
    display: none;
  }

  &[data-animation] {
    display: block;
    height: var(--menu-closed-height, 0);
    opacity: 0;

    > .navmenu-item {
      opacity: 0;
      transform: translate3d(0, -10px, 0);
    }
  }

  &[data-animation="closed=>open"] {
    opacity: 1;
    transition: height $duration--small-100 $ease-out--normal;

    > .navmenu-item {
      transition:
        opacity $duration--small-500 $ease-in-out--normal $duration--small-300,
        transform $duration--small-500 $ease-in-out--normal $duration--small-200;
    }
  }

  &[data-animation="open=>closed"] {
    transition:
      height $duration--small-400 $ease-in--normal,
      opacity $duration--small-200 $ease-in--normal $duration--small-200;
    // This clips the overflow below the dropdown, so contents doesn't overflow during height animation
    // while still showing the left or right dropdowns.
    -webkit-clip-path: polygon(-100vw 0, 100vw 0, 100vw 100vh, 100% 100vh, 100% 100%, 0 100%, 0 100vh, -100vw 100vh);
            clip-path: polygon(-100vw 0, 100vw 0, 100vw 100vh, 100% 100vh, 100% 100%, 0 100%, 0 100vh, -100vw 100vh);

    > .navmenu-item {
      transition:
        opacity $duration--small-300 $ease-in--normal $duration--small-100,
        transform $duration--small-400 $ease-in--normal;
    }
  }

  &[data-animation-state="open"] {
    display: block;
    height: var(--menu-open-height, auto);
    opacity: 1;

    > .navmenu-item {
      opacity: 1;
      transform: translate3d(0, 0, 0);
    }
  }

  // Specific styles for tier 3 desktop navigation dropdowns
  &.navmenu-depth-3 {
    &[data-animation] {
      height: auto;
      opacity: 0;

      > .navmenu-item {
        opacity: 1;
        transform: translate3d(0, 0, 0);
        transition: none;
      }
    }

    &[data-animation="closed=>open"] {
      transition: opacity $duration--small-100 $ease-out--normal;
    }

    &[data-animation="open=>closed"] {
      transition: opacity $duration--small-100 $ease-in--normal;
      -webkit-clip-path: none;
              clip-path: none;
    }

    &[data-animation-state="open"] {
      height: auto;
      opacity: 1;

      > .navmenu-item {
        opacity: 1;
        transform: translate3d(0, 0, 0);
      }
    }
  }
}

.navmenu-item-parent {
  &.alternate-drop .navmenu {
    left: calc(-100% + 1px);
  }
}

.main-nav-dimmer {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: $index-main + 5;
  display: none;
  background: $color-overlay-background;
  opacity: 0;

  &[data-animation] {
    display: block;
  }

  &[data-animation="closed=>open"] {
    transition: opacity $duration--small-400 $ease-out--normal $duration--small-100;
  }

  &[data-animation="open=>closed"] {
    transition: opacity $duration--small-300 $ease-in--normal $duration--small-100;
  }

  &[data-animation-state="open"] {
    display: block;
    opacity: 1;
  }
}

.site-main {
  position: relative;
  z-index: $index-main;
  outline: none;
}

$local-padding: 2px;
$local-menu-offset: $local-padding + $gutter-outer;
$local-fade-width: 30px + $local-padding;

.navmenu-meganav {
  &.navmenu-meganav--desktop {
    position: absolute;
    left: 0;
    float: left;
    width: 100%;
    margin-left: 0;
    padding-top: 0;
    padding-bottom: 0;
    overflow: hidden;
    transform: translate3d(0, 0, 0);
    -webkit-backface-visibility: hidden;
            backface-visibility: hidden;

    a {
      &:focus {
        outline-offset: 1px;
      }
    }

    .navmenu-meganav-items {
      position: relative;
      flex: 1 1 auto;
      display: block;
      height: 100%;
      margin-left: 0;
      padding-top: $site-subnav-space + 3px; // Thse numbers create better spacing effect
      padding-bottom: $site-subnav-space + 10px;
      z-index: 1;
      -webkit-overflow-scrolling: touch;

      @supports (display: grid) {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(175px, 1fr));
        grid-gap: rem(35px);
      }
    }

    .navmenu-meganav--image-first + .navmenu-meganav-items {
      margin-left: $gutter-outer;
    }

    .navmenu-meganav-items + .navmenu-meganav--image-last {
      margin-left: $gutter-outer * 2;
    }

    .navmenu-meganav-item {
      display: inline-block;
      width: rem(225px);
      padding: 0 $gutter-outer $gutter-outer 0;
      vertical-align: top;

      @supports (display: grid) {
        width: auto;
        padding: 0;
      }
    }

    .navmenu-icon {
      &.navmenu-icon-depth-2 {
        display: none;
      }

      &.navmenu-icon-depth-3 {
        position: relative;
        top: -1px;
        right: -2px;
      }

      svg {
        transform: rotate(0deg);
      }
    }

    .navmenu-depth-4,
    .navmenu-depth-3 {
      position: relative;
      top: 0;
      left: auto;
      z-index: 1;
      width: 100%;
      transform: translate(0);
      box-shadow: none;
    }

    .navmenu-depth-3 {
      display: block;
      height: auto;
      min-height: auto;
      padding: 0;
      margin-top: rem(4px);
      margin-left: 0;
      opacity: 1;
    }

    .navmenu-depth-3 .navmenu-submenu {
      padding-top: rem(2.5px);
      padding-bottom: $site-subnav-space / 2;
      padding-left: 12px;
    }

    .navmenu-item-text {
      @extend %menu;
      @include font-size-body-medium($font-menu-capitalize, -3.5);
      display: block;
      padding: rem($site-nav-link-space) 0;
      color: $color-heading;
    }

    .navmenu-link {
      padding: rem($site-nav-link-space) 0;
      white-space: normal;
    }

    .navmenu-button {
      display: none;
    }
  }
}

.navmenu-meganav-wrapper {
  @extend %layout-container;
  position: relative;
  display: flex;
  overflow-y: auto;

  .site-header-sticky & {
    max-height: 70vh;
  }

  .site-header--full-width & {
    width: 100%;
    max-width: 100%;
  }
}

.site-mobile-nav {
  .navmenu-submenu.navmenu-meganav {
    .navmenu-depth-2 {
      display: flex;
      flex-direction: column;
      max-height: 999999px;
      opacity: 1;
    }
  }

  .navmenu-meganav--image {
    width: 100%;
  }
}

// The following widths are used in calculations in meganav.liquid,
// so if you update them here, you should change them there as well.
.navmenu-meganav--image-size-small {
  display: block;
  width: 200px;
}

.navmenu-meganav--image-size-medium {
  width: 300px;
}

.navmenu-meganav--image-size-large {
  width: 400px;
}

.navmenu-meganav--image-container {
  position: relative;
  flex: 0 0 auto;
  margin-top: $gutter-content;
  margin-bottom: $gutter-content;

  &.navmenu-meganav--image-first {
    margin-right: $gutter-outer;
  }

  &.navmenu-meganav--image-last {
    margin-left: $gutter-outer;
  }

  .site-mobile-nav & {
    margin: $gutter-content 0;
    padding: 0 $gutter-content 0 $gutter-outer;
  }
}

.navmenu-meganav--image-text {
  margin-top: $space-x-small;
  margin-bottom: 0;
  color: $color-text;
}

.site-navigation .navmenu-meganav--image-link {
  @extend %link--text;
  @include font($font-body);
  @include font-size-body;
  display: block;
  padding: 0;
  color: $color-text;
}

.navmenu-meganav--image-last {
  order: 1;
}

$local-link-space: 13px;

.site-mobile-nav {
  display: none;
  opacity: 0;

  &.animating-in {
    transition: text-shadow 0.4s $ease-in--normal; // sneak-in-meganav animation duration
  }

  &.animating-out {
    transition: text-shadow 0.3s $ease-out--normal; // sneak-out-mobilenav animation length
  }

  &.animating,
  &.visible {
    display: block;
    opacity: 1;
  }
}

.mobile-nav-panel {
  position: fixed;
  top: 0;
  bottom: 0;
  z-index: $index-mobile-nav + 2;
  display: none;
  width: 100%;
  height: 100%;
  max-width: 325px;
  overflow-x: hidden;
  overflow-y: scroll;
  color: $color-text;
  background-color: $color-background;
  transition: transform 0.4s $ease-out--normal;
  -webkit-overflow-scrolling: touch;

  .animating-in &,
  .visible & {
    display: block;
    transform: translate3d(0, 0, 0);
  }

  .animating-in & {
    animation-delay: $duration--zero;
    animation-duration: 0.4s;
    animation-name: sneak-in-mobilenav;
    animation-timing-function: $ease-in--normal;
    animation-fill-mode: both;
    animation-direction: normal;
  }

  .animating-out & {
    animation-delay: $duration--zero;
    animation-duration: 0.2s;
    animation-name: sneak-out-mobilenav;
    animation-timing-function: $ease-out--normal;
    animation-fill-mode: both;
    animation-direction: normal;
  }

  a {
    color: currentColor;
    text-decoration: none;
  }
}

.mobile-nav-overlay {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: $index-mobile-nav + 1;
  display: block;
  height: 100%;
  background-color: $color-overlay-background;

  .animating-out &,
  .visible & {
    display: block;
  }

  .animating-in & {
    animation-delay: $duration--zero;
    animation-duration: 0.4s;
    animation-name: overlay-fade-in;
    animation-timing-function: $ease-in--normal;
    animation-direction: normal;
  }

  .animating-out & {
    opacity: 0;
    animation-delay: 0.1s;
    animation-duration: 0.2s;
    animation-name: overlay-fade-out;
    animation-timing-function: $ease-out--normal;
    animation-fill-mode: both;
    animation-direction: normal;
  }
}

.mobile-nav-close {
  position: absolute;
  top: 10px;
  right: 7px;
  width: 33px;
  height: 33px;
  padding: 10px;

  svg {
    display: block;
    width: 13px;
    height: 13px;
    vertical-align: middle;
  }
}

.mobile-nav-content {
  min-height: 100%;
  padding-top: 20px;
  padding-bottom: 60px;

  .site-header-actions ~ & {
    min-height: calc(100% - #{$header-content-height});
  }

  .navmenu {
    display: flex;
    flex-wrap: wrap;
    padding: 0;
    margin: 0;
    list-style: none;
  }

  li {
    position: relative;
    width: 100%;
    margin-right: 0;
    margin-left: 0;
  }

  .navmenu-depth-1 {
    @include font($font-body, $font-family: false, $font-weight: bolder);
    @include font-size-body-medium;
  }

  .navmenu-depth-2 {
    @include font($font-body, $font-family: false, $font-weight: initial);
    @include font-size-body;
    background-color: mix($color-text, $color-background, 10%);

    .navmenu-submenu {
      padding: 0 rem(10px);
    }
  }

  .navmenu-depth-1,
  .navmenu-depth-2,
  .navmenu-depth-3 {
    .navmenu-submenu {
      display: none;
    }
  }

  .navmenu-submenu {
    max-height: 0;
    overflow: hidden;
    opacity: 0;
    transition:
      max-height $duration--medium-100 $ease-in-out--normal,
      opacity $duration--small-400 $ease-in-out--normal;

    &.visible {
      flex-direction: column;
      max-height: 999999px;
      opacity: 1;
    }
  }

  .navmenu-link,
  .navmenu-item-text {
    position: relative;
    display: block;
    padding: rem($local-link-space) rem($gutter-outer);
    cursor: pointer;
    transition: color 0.1s ease-in;

    &.navmenu-link-parent {
      padding-right: rem($local-link-space + 10px);
    }
  }

  .navmenu-link {
    &:focus {
      outline: solid rgba($color-header-background, 0.5);
      outline-offset: -3px;
    }
  }

  .navmenu-depth-1 > .navmenu-item > .navmenu-link {
    @extend %menu;
    @include font-size-menu-large;
  }

  .navmenu-button {
    position: absolute;
    top: rem(4px);
    right: 0;
    width: rem(36px);
    height: rem(36px);
    padding: 0;
    margin-right: rem(6px);
    background: none;
    border: none;
    border-radius: 0.2rem;
    cursor: pointer;

    &:focus {
      outline: solid rgba($color-header-background, 0.5);
      outline-offset: -3px;
    }
  }

  .navmenu-button-wrapper {
    width: 100%;
    height: 100%;
    outline: none;
  }

  .navmenu-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    display: inline-block;
    margin-top: -3px;
    transform: translateX(-50%);

    svg {
      display: block;
      width: 8px;
      height: 6px;
      transform: scale(1.25);
      fill: currentColor;
    }

    .icon-chevron-down-left,
    .icon-chevron-down-right {
      transform: rotate(0);
      transition:
        transform $duration--zero,
        fill 0.1s $ease-in-out--normal;
      transform-origin: 50% 50%;
    }
  }

  .navmenu-link-parent-active {
    color: $color-link;

    ~ .navmenu-button {
      background: mix($color-text, $color-background, 10%);
      color: $color-link;

      .navmenu-icon {
        margin-top: rem(2px);
      }
      svg {
        transform: scale(1.75);
      }
      .icon-chevron-down-left,
      .icon-chevron-down-right {
        transform: rotate(-45deg);
        transform-origin: 0 0;
      }
    }
  }

  .navmenu-depth-2 {
    .navmenu-link-parent-active ~ .navmenu-button {
      background: mix($color-text, $color-background, 20%);
    }
  }
}

.site-navigation .navmenu-meganav.navmenu-meganav--desktop {
  .navmenu-multi-column-items.navmenu-meganav-wrapper {
    display: block;
    overflow-y: auto;

    .site-header-sticky & {
      max-height: 70vh;
    }
  }

  & .navmenu-multi-column-items .navmenu-depth-2 {
    display: block;
    margin-left: 0;
    padding-top: $site-subnav-space + 3px; // Thse numbers create better spacing effect
    padding-bottom: $site-subnav-space + 10px;
    column-count: 5;
    column-gap: $gutter-outer;

    &.multi-column-count-4 {
      column-count: 4;
    }

    > li {
      break-inside: avoid;

      > ul {
        margin-left: $gutter-outer;
      }
    }
  }
}

.social-icons {
  margin-top: -4px;
  margin-right: -4px;
  margin-left: -4px;
  font-size: 0;
}

.social-link {
  @include font-size-body-small;
  display: inline-block;
  width: 36px;
  height: 36px;
  padding: 4px;
  overflow: hidden;
  color: $color-text;
  line-height: 1.8;
  vertical-align: top;

  svg {
    width: 28px;
    height: 28px;
    background-color: $local-footer-accent;
    border-radius: 100%;
    transition: background-color $duration--medium-400 $ease-out--normal;
  }

  &:hover svg {
    background-color: rgba($color-footer-text, 0.05);
  }
}

.rte .tabs,
.rte .tabs-content {
  padding-left: 0;
  margin-left: 0;
  list-style: none;
}

.rte .tabs {
  margin-top: $space-large;

  li {
    display: inline-block;
    cursor: pointer;

    &:not(:first-child) {
      margin-left: $space-large;
    }

    &,
    > a {
      @extend %link--text;
    }

    &.active,
    &.active a {
      @extend %link--default;
    }
  }
}

.rte .tabs-content {
  margin-top: $space-medium;

  > li {
    display: none;

    &.active {
      display: block;
    }
  }
}

.dynamic-video-wrapper {
  @extend %layout-container;
  margin-top: $gutter-outer;
}

.video {
  position: relative;
  width: 100%;
  padding-bottom: percentage(9/16);
  z-index: 2;

  &.video-aspect-ratio-21-9 {
    padding-bottom: percentage(9/21);
  }

  iframe {
    position: absolute;
    z-index: 0;
    width: 100%;
    height: 100%;
    background-color: $color-black;
  }

  &.video-playing {
    .fluid-width-video-wrapper {
      z-index: 1;
    }
  }

  .hide-player {
    visibility: hidden;
    opacity: 0;
    transition: opacity $duration--small-600 $ease-in-out--strong;
  }

  &.video-transitioning .hide-player,
  &.video-playing .hide-player {
    visibility: visible;
    opacity: 1;
  }
}

.video-cover {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 1;
  width: 100%;
  height: 100%;
  background-position: center;
  background-size: cover;
  opacity: 1;

  .video-transitioning &,
  .video-playing & {
    opacity: 0;
    transition: opacity $duration--small-600 $ease-in-out--strong;
  }

  .video-playing & {
    z-index: 0;
  }
}

.video-overlay {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
}

.video-play-button {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: rem(60px);
  height: rem(60px);
  padding: 0;
  margin: 0;
  color: $color-heading;
  background: $color-background;
  cursor: pointer;
  border: none;
  box-shadow: 0 0 0 1px rgba($color-heading, 0.05);
  transition:
    transform $duration--small-300 $ease-in-out--normal,
    background-color $duration--small-600 $ease-in-out--normal;

  &.no-cover {
    opacity: 0;

    &:active {
      opacity: 0;
    }
  }

  &:hover .icon-play {
    opacity: 0.55;
  }

  &:active {
    opacity: 0.7;
    outline: none;
  }

  .video-loading & {
    background-color: transparent;
    box-shadow: none;
  }

  .video-playing & {
    display: none;
  }
}

.icon-play {
  position: absolute;
  top: 0;
  left: 0;
  display: block;
  height: auto;
  opacity: 1;
  transition: opacity $duration--small-300 $ease-in-out--normal;
  outline: none;

  .video-loading & {
    opacity: 0;
  }
}

.icon-loading  {
  position: absolute;
  top: 0;
  left: 0;
  display: none;
  height: 100%;
  opacity: 0;
  animation: 0.6s rotate linear infinite both;
  outline: none;

  .product-gallery--media & {
    display: none;
  }

  .video-loading & {
    display: block;
    opacity: 1;
    transition: opacity $duration--small-600 $ease-in-out--normal;
  }
}

/* added by molsoft */

.header-login-buttons{
  font-size: 20px;

  a {
    padding: 10px;
  }
  
}

.header-wrapper{
  display: flex;
  width: 100%;
  align-items: center;
}

.site-header-main-content{
  flex: 1;
  margin-right: 20px;
}

.header-right-actions{
  display: flex;
  max-width: 30vw;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.site-header-cart{
  position: relative;
  right: initial !important;
  left: initial !important;
  bottom: initial !important;
  top: initial !important;
  margin-top: -11px !important;
}

.header-login-buttons svg{
  width: 22px;
  color: black;
}

.live-search-button{
  border-radius: 0;
}

.live-search-form .form-field-input{
  border-radius: 0;
}

@media only screen and (max-width: $bp-large) {
  .header-right-actions{
    position: absolute;
    right: 9px;
    top: 20px;
  }
  
  .site-header-main-content{
    margin-right: 0 !important;
  }
}

@media only screen and (max-width: 400px) {
  .site-logo{
    max-width: 124px !important;
  }
}

.promo-bottom-caption {
  .promo-block--header{
    font-style: inherit;
    font-weight: initial;
    font-size: 20px !important;
    max-width: initial !important;
  }
  
  .promo-block--text{
    font-weight: 900;
    max-width: initial !important;
    font-size: 16px !important;

    p {
      display: inline;
    }

    svg {
      margin-left: 20px;
      vertical-align: middle;
      width: 25px;
    }
  }
  
  .promo-block--content-wrapper{
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 1.85938rem;
    background: black;
  }
}

.navmenu-link .site-header-menu-toggle--button {
  padding: 0;

  .toggle-icon--bar{
    background-color: white;
  }
}

.meganav-side-menu{

  .meganav-side-menu-main-links{
    width: initial;
    margin: 0;
    padding: 0;

    .navmenu-item{
      margin: 0;
      padding-top: 10px;
      padding-bottom: 10px;

      &.opened{
        background: black;

        a{
          color: white !important;
        }
      }
    }
  }

  .navmenu-submenu:not(.navmenu-wrapper):not(.navmenu-depth-3){
    box-shadow: -3px 3px 4px rgba(127,127,127,0.25);
    position: initial;
    flex: 1;

    &.opened{
      display: block;
    }
  }
}

.article--excerpt-content{
  background: white;
}

.product-description.rte{
  background: #F1F1F1;
  padding: 20px;
}

.collection--information{
  background-color: #f2f2f2;
  padding: 20px;
}

.site-footer-block-title{
  font-weight: 900;
}

.pxs-newsletter-heading{
  font-size: 35px;
  font-style: initial;
  margin-bottom: 30px;
  max-width: 650px;
}

.product-main .price--main .money{
  font-weight: bold;
  font-size: 25px;
}

.live-search-wrapper{
  display: flex;
  flex-basis: auto;
  flex-grow: 1;
  flex-shrink: 1;
}


@media screen and (max-width: $bp-large) {
  .live-search-wrapper{
    display: block;
    padding: 30px 20px;
    margin-left: -15px;
    margin-right: -15px;
    margin-top: 15px;
    margin-bottom: 15px;
    background: black;

    .live-search{
      margin: 0;
    }

    .live-search-form{
      border: 1px solid white;
    }
  }

  .testimonial-slideshow .flickity-prev-next-button{
    &.previous{
      left: 0 !important;
    }
    
    &.next{
      right: 0 !important;
    }
  }
}

.site-header-actions{
  display: flex !important;
  align-items: center !important;
  margin: 0 !important;
  justify-content: flex-end !important;
  height: initial !important;
}

.store-locator-nav a{
  display: flex;
  align-items: center;
  padding: 0;
  opacity: 1 !important;

  svg {
    max-width: 22px;
    margin-right: 12px;
    fill: white;
  }
}
// ADDED BY KENDRA

.button-primary.featured-btn {
  margin-top: 60px;
  padding-top: 5px;
  color: black !important; 
  background-color: white !important; 
}

// "all brands" button 
.logolist--container {
  text-align: center;
}

.button-primary.all-brands-btn {
  padding-top: 15px;
  padding-bottom: 15px;
  padding-left: 25px;
  padding-right: 25px;
}

.site-footer-left {
  display: inline-block;
  // margin-left: 40%;
  p {
    max-width: 500px;
  }
}

.payment-icons {
  // position: absolute; 
  margin-right: 0 !important;
}


// TESTIMONIALS

.html--section-testimonial {
background-color: #FAFAFA;
.home-section--title {
  padding-top: 70px;
  font-style: italic;
  font-size: 35px;
}
}

.rte.testimonial{
  width: 100%;
  min-height: 400px;
  background-color: #FAFAFA;
}

.testimonials-wrapper{
  padding: 0 20px; 
  width: 100%;
}

.testimonial-column {
background-color: white;
border: 1px solid #97979C;
box-sizing: border-box;
box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
text-align: center;
padding-bottom: 25px;
z-index: 1;
padding: 20px;
height: calc(100% - 20px);
}

.testimonial-column h4 {
  margin-top: -19px;
  margin-bottom: 1px;
  font-size: 18px;
  font-family: "Open Sans", sans-serif;
  font-style: normal;
  font-weight: 400 bold;
}

.testimonial-column p {
  font-size: 14px;
  padding: 7px;
  margin-left: 10px;
  margin-right: 10px;
}

.flickity-page-dots {
  position: relative;
}

.flickity-viewport {
  position: relative;
  // overflow: hidden;
}

.testimonial-slideshow{
  position: relative;
  
  .flickity-prev-next-button.previous{
    left: -2.1875rem;
  }

  .flickity-prev-next-button.next {
    right: -2.1875rem;
  }
}

.testimonial-slideshow:focus {
    outline:0;
}

@media screen and (max-width: 750px) {
  .testimonials-wrapper{
    padding: 0 20px; 
    width: 100%;
  }
}

.highlights-banners-heading a,
.small-promo-heading a{
  text-decoration: none;
}

.ly-languages-switcher{
  display: none !important;
}

.template-collection .highlights-banners-container{
  border-bottom: solid black 1px;
}

#submitBtn{
  background: black !important;
  border-radius: 0 !important;
  border: none !important;
  padding: 8px !important;
}

.mobile-nav-content .store-locator-nav {
  span{
    margin-right: 10px;
  }

  svg{
    max-height: 17px;
    fill: black;
  }
}

@media screen and (max-width: $bp-large) {
  .site-header-actions{
    padding-top: 20px;
  }


  .site-header-actions .store-locator-nav{
    display: none;
  }

  .site-header-main-content .small-promo{
    padding-top: 0;
  }
}

@font-face{font-family:'font-awesome-stars';src:url(https://productreviews.shopifycdn.com/assets/font-awesome-stars/font-awesome-stars-911003a601bdba3638357048b4273cc43c8958b4ea8d8e8b57d2a1b0c6620eeb.eot?38446773);src:url(https://productreviews.shopifycdn.com/assets/font-awesome-stars/font-awesome-stars-911003a601bdba3638357048b4273cc43c8958b4ea8d8e8b57d2a1b0c6620eeb.eot?38446773#iefix) format("embedded-opentype"),url(https://productreviews.shopifycdn.com/assets/font-awesome-stars/font-awesome-stars-9db9f5907ce1cfed8edd001b2c6f89efd1d4b1847972f4432679de8a760c60e0.svg?38446773#font-awesome-stars) format("svg");font-weight:normal;font-style:normal}@font-face{font-family:'font-awesome-stars';src:url("data:application/octet-stream;base64,d09GRgABAAAAAAtYAA4AAAAAE1QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABRAAAAEQAAABWPclI2mNtYXAAAAGIAAAAOgAAAUrQFBm3Y3Z0IAAAAcQAAAAUAAAAHAa1/8RmcGdtAAAB2AAABPkAAAmRigp4O2dhc3AAAAbUAAAACAAAAAgAAAAQZ2x5ZgAABtwAAAGtAAACclq+oyVoZWFkAAAIjAAAADUAAAA2/5GU62hoZWEAAAjEAAAAIAAAACQHVwNQaG10eAAACOQAAAATAAAAFBC8AABsb2NhAAAI+AAAAAwAAAAMATAB621heHAAAAkEAAAAIAAAACAAywnVbmFtZQAACSQAAAGcAAADRT5lefFwb3N0AAAKwAAAAD4AAABcM6St93ByZXAAAAsAAAAAVgAAAFaSoZr/eJxjYGSOZJzAwMrAwVTFtIeBgaEHQjM+YDBkZGJgYGJgZWbACgLSXFMYHF4wvGBmDvqfxRDF7MhgDhRmBMkBANqQCyF4nGNgYGBmgGAZBkYGEHAB8hjBfBYGDSDNBqQZGZgYGF4w//8PUvCCAURLMELVAwEjG8OIBwBnHgaxAAB4nGNgQANGDEbMjv9PgjAAE2AEfXicnVXZdtNWFJU8ZHASOmSgoA7X3DhQ68qEKRgwaSrFdiEdHAitBB2kDHTkncc+62uOQrtWH/m07n09JLR0rbYsls++R1tn2DrnRhwjKn0aiGvUoZKXA6msPZZK90lc13Uvj5UMBnFdthJPSZuonSRKat3sUC7xWOsqWSdYJ+PlIFZPVZ5noAziFB5lSUQbRBuplyZJ4onjJ4kWZxAfJUkgJaMQp9LIUEI1GsRS1aFM6dCr1xNx00DKRqMedVhU90PFJ8c1p9SsA0YqVznCFevVRr4bpwMve5DEOsGzrYcxHnisfpQqkIqR6cg/dkpOlIaBVHHUoVbi6DCTX/eRTCrNQKaMYkWl7oG43f102xYxPXQ6vi5KlUaqurnOKJrt0fGogygP2cbppNzQ2fbw5RlTVKtdcbPtQGYNXErJbHSfRAAdJlLj6QFONZwCqRn1R8XZ588BEslclKo8VTKHegOZMzt7cTHtbiersnCknwcyb3Z2452HQ6dXh3/R+hdM4cxHj+Jifj5C+lBqfiJOJKVGWMzyp4YfcVcgQrkxiAsXyuBThDl0RdrZZl3jtTH2hs/5SqlhPQna6KP4fgr9TiQrHGdRo/VInM1j13Wt3GdQS7W7Fzsyr0OVIu7vCwuuM+eEYZ4WC1VfnvneBTT/Bohn/EDeNIVL+5YpSrRvm6JMu2iKCu0SVKVdNsUU7YoppmnPmmKG9h1TzNKeMzLj/8vc55H7HN7xkJv2XeSmfQ+5ad9HbtoPkJtWITdtHblpLyA3rUZu2lWjOnYEGgZpF1IVQdA0svph3Fab9UDWjDR8aWDyLmLI+upER521tcofxX914gsHcmmip7siF5viLq/bFj483e6rj5pG3bDV+MaR8jAeRnocmtBZ+c3hv+1N3S6a7jKqMugBFUwKwABl7UAC0zrbCaT1mqf48gdgXIZ4zkpDtVSfO4am7+V5X/exOfG+x+3GLrdcd3kJWdYNcmP28N9SZKrrH+UtrVQnR6wrJ49VaxhDKrwour6SlHu0tRu/KKmy8l6U1srnk5CbPYMbQlu27mGwI0xpyiUeXlOlKD3UUo6yQyxvKco84JSLC1qGxLgOdQ9qa8TpoXoYGwshhqG0vRBwSCldFd+0ynfxHqtr2Oj4xRXh6XpyEhGf4ir7UfBU10b96A7avGbdMoMpVaqn+4xPsa/b9lFZaaSOsxe3VAfXNOsaORXTT+Rr4HRvOGjdAz1UfDRBI1U1x+jGKGM0ljXl3wR0MVZ+w2jVYvs93E+dpFWsuUuY7JsT9+C0u/0q+7WcW0bW/dcGvW3kip8jMb8tCvw7B2K3ZA3UO5OBGAvIWdAYxhYmdxiug23EbfY/Jqf/34aFRXJXOxq7eerD1ZNRJXfZ8rjLTXZZ16M2R9VOGvsIjS0PN+bY4XIstsRgQbb+wf8x7gF3aVEC4NDIZZiI2nShnurh6h6rsW04VxIBds2x43QAegAuQd8cu9bzCYD13CPnLsB9cgh2yCH4lByCz8i5BfA5OQRfkEMwIIdgl5w7AA/IIXhIDsEeOQSPyNkE+JIcgq/IIYjJIUjIuQ3wmByCJ+QQfE0OwTdGrk5k/pYH2QD6zqKbQKmdGhzaOGRGrk3Y+zxY9oFFZB9aROqRkesT6lMeLPV7i0j9wSJSfzRyY0L9iQdL/dkiUn+xiNRnxpeZIymvDp7zjg7+BJfqrV4AAAAAAQAB//8AD3icddC7TttQHMfx//8cX5Ljk/oWX0JDEjs4UZJKiUqDJcTgQl+iC3OZ2BmYGCt1YwYJsWQC8QypShZExTNUUR4hF3PiAgIEg89k6ff5fwHTNL2mp/Qr1OBT0rIMjUpAcVtCSoBQ+AGEsB1EAA2+AYi/auWiL1sdLOpou05RCbuoKmGjH9vNRv9LHMUbn6souw491Uc95K42nXKXY2/0oYr+oVbTDtGv4pjrw8VYUrmhHh2pBtfQG+rckVsLz1u0ZEdMAUkXwnYibHlow2YSU4EqrziFfE5VZBQiSt6GMsbarB2t+Z5tynoH4y7q6KmxZz+o6++pycFgsrc3GbT+3s6Wfk972x+e1+/u6ueT/X28fDil/N4lWWO8EXeY8DHxcwqCBIjb4mM7kIHLNjE7aL4irePNi22DJnPn1UbWaZb+oWc0AQZNWEuCFZuznCiUAyJWnnUJA88xDZoVoWYVuxiptqs0sxr1sLGc3niMUUFy/Ot3ZH4PLgIVS6Me5YV8YToVD6e9kcVKTz1KDLd+rirB1fyfuTuMBqKH5eKyR9EWVKsi/a8hVeAe4gt3jAAAAHicY2BkYGAA4iudNUfi+W2+MnAzvwCKMJzLdJkHoXni/v/5f5J5CbMjkMvBwAQSBQB/7Q2nAAAAeJxjYGRgYA76n8UQxfyCgeH/D+YVDEARFMAKAIv5Ba14nGN+wcDAvACCGb9AaAAqvAPKAAAAAAAATgCyAOIBOQABAAAABQArAAIAAAAAAAIACgAXAG4AAABLCZEAAAAAeJyNkMFKI0EQhv+JUVkDe1jBcx1ElCWTZEAETy4Bc9uDh1z2sm3szEyYTIfujpKDjyD7LF59gT3tK/gCvsT+02lENixkhun+/r+qeroKwBe8IsH6Oee35oT+eeQW9jGKvEP/e+Q2+WfkXXRgI+/Rf4x8gK/4FbmDQ7zwhKT9iWqGP5ETHCcXkVv4nPyIvEO/jNwmP0XexVHyHHmP/u/IBxgnb5E7OGl9G5rFypZ54eV0eCZZf5DJ7UoMrbJWlailL4x1ciVTU3tdVSadmHnDXfWgnZnrrvPKuhudLytlNwObzlhbV5paBml/MzjStbbK67vmFu4+z7yfytSauVzH/8vCmpme+LTwfnHZ6328F4YwWGDFMZfIUcBDcEr3jHuGPgZcBbfMEGaus0rUUKjoKCxZUYSIo77iN6Wq6WpmVOQUE67zd7/LqgdGXXA1taOrwgk31DnPrILepmKbnDF1s5chV9hTys62qRxR16FahY7u3mfhcM+bZnQ9T2q6tqFecP1P/8L5NrEZnQn9NEzZ071Ej+9/5vUXXlOlpHicY2BigAAuBuyAlYGBkZmRhZGVkY01syQ114CluCSxiAtE6KbmFpRUcoKZGYk5abxwlm5iTgkDAwCe8RByAABLuADIUlixAQGOWbkIAAgAYyCwASNEsAMjcLIEKAlFUkSyCgIHKrEGAUSxJAGIUViwQIhYsQYDRLEmAYhRWLgEAIhYsQYBRFlZWVm4Af+FsASNsQUARAAA") format("woff"),url("data:application/octet-stream;base64,AAEAAAAOAIAAAwBgT1MvMj3JSNoAAADsAAAAVmNtYXDQFBm3AAABRAAAAUpjdnQgBrX/xAAACUwAAAAcZnBnbYoKeDsAAAloAAAJkWdhc3AAAAAQAAAJRAAAAAhnbHlmWr6jJQAAApAAAAJyaGVhZP+RlOsAAAUEAAAANmhoZWEHVwNQAAAFPAAAACRobXR4ELwAAAAABWAAAAAUbG9jYQEwAesAAAV0AAAADG1heHAAywnVAAAFgAAAACBuYW1lPmV58QAABaAAAANFcG9zdDOkrfcAAAjoAAAAXHByZXCSoZr/AAAS/AAAAFYAAQNZAZAABQAIAnoCvAAAAIwCegK8AAAB4AAxAQIAAAIABQMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUGZFZABA6ADoAwNS/2oAWgNBADcAAAABAAAAAAAAAAAAAwAAAAMAAAAcAAEAAAAAAEQAAwABAAAAHAAEACgAAAAGAAQAAQACAADoA///AAAAAOgA//8AABgBAAEAAAAAAAAAAAEGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf///8oDoQNBACAALEApEhALAwQAAwFCBAEDAgACAwBoAAICCkMBAQAACwBEAAAAIAAgHBQYBRIrARQPARMWFRQGIi8BBwYiJjU3EycmNTQ3JTc2Mh8BBRYVA6EPyzABDBYL+/sMFgwBMMsOHwEYfgsgC34BGB8B6QwPxv7pBAcMEAeEhAcQDAsBF8YPDBUFKf4XF/4pBRUAAAAAAv/+/8oDoANBAAkAKgA6QDcDAQMCHBoVDQkIBwYFAQALAAMCQgQBAwIAAgMAaAACAgpDAQEAAAsARAoKCioKKiUkGBcTEQUPKwE3LwEPARcHNxcTFA8BExYVFCMiLwEHBiImNTcTJyY1NDclNzYyHwEFFhUCeqvraWnrqynT0vwPyzABFwsL+/sMFgwBMMsOHwEYfgsgC34BGB8BIqYj1dUjputvbwGyDA/G/ukEBxwHhIQHEAwLARfGDwwVBSn+Fxf+KQUVAAAB////ygHQA0EAEQAbQBgIBgEABAABAUIAAQEKQwAAAAsARBwTAhErAREHBiImNTcTJyY1NDclNzYzAdD7DBYMATDLDh8BGH4LEANA/RWEBxAMCwEXxg8MFQUp/hcAAAAC//z/yQOkA0AACgAnACRAIRoTDAoIBgUBCAACAUIAAgIKQwEBAAALAEQiIRcVERADDysBNy8DER8BLwElBxMWBiciLwEHBiMiJjcTJyY2NyU3NjIfAQUeAQKWj8clEVkhsSEHARnLMAMMDQkN+/sNCQ0MAzDLEgoZARh+CyALfgEYGQoBPIwdBiG0/ecRXsYlq8b+6RIWAQeEhAcUEwEXxhIeBCn+Fxf+KQQeAAAAAAEAAAABAADUicAIXw889QALA+gAAAAAzmlEngAAAADOaQxe//z/yQOkA0EAAAAIAAIAAAAAAAAAAQAAA1L/agBaA+gAAP/4A6gAAQAAAAAAAAAAAAAAAAAAAAUD6AAAA6AAAAOgAAAB9AAAA6AAAAAAAAAATgCyAOIBOQABAAAABQArAAIAAAAAAAIACgAXAG4AAABLCZEAAAAAAAAAEgDeAAEAAAAAAAAANQAAAAEAAAAAAAEAEgA1AAEAAAAAAAIABwBHAAEAAAAAAAMAEgBOAAEAAAAAAAQAEgBgAAEAAAAAAAUACwByAAEAAAAAAAYAEgB9AAEAAAAAAAoAKwCPAAEAAAAAAAsAEwC6AAMAAQQJAAAAagDNAAMAAQQJAAEAJAE3AAMAAQQJAAIADgFbAAMAAQQJAAMAJAFpAAMAAQQJAAQAJAGNAAMAAQQJAAUAFgGxAAMAAQQJAAYAJAHHAAMAAQQJAAoAVgHrAAMAAQQJAAsAJgJBQ29weXJpZ2h0IChDKSAyMDEyIGJ5IG9yaWdpbmFsIGF1dGhvcnMgQCBmb250ZWxsby5jb21mb250LWF3ZXNvbWUtc3RhcnNSZWd1bGFyZm9udC1hd2Vzb21lLXN0YXJzZm9udC1hd2Vzb21lLXN0YXJzVmVyc2lvbiAxLjBmb250LWF3ZXNvbWUtc3RhcnNHZW5lcmF0ZWQgYnkgc3ZnMnR0ZiBmcm9tIEZvbnRlbGxvIHByb2plY3QuaHR0cDovL2ZvbnRlbGxvLmNvbQBDAG8AcAB5AHIAaQBnAGgAdAAgACgAQwApACAAMgAwADEAMgAgAGIAeQAgAG8AcgBpAGcAaQBuAGEAbAAgAGEAdQB0AGgAbwByAHMAIABAACAAZgBvAG4AdABlAGwAbABvAC4AYwBvAG0AZgBvAG4AdAAtAGEAdwBlAHMAbwBtAGUALQBzAHQAYQByAHMAUgBlAGcAdQBsAGEAcgBmAG8AbgB0AC0AYQB3AGUAcwBvAG0AZQAtAHMAdABhAHIAcwBmAG8AbgB0AC0AYQB3AGUAcwBvAG0AZQAtAHMAdABhAHIAcwBWAGUAcgBzAGkAbwBuACAAMQAuADAAZgBvAG4AdAAtAGEAdwBlAHMAbwBtAGUALQBzAHQAYQByAHMARwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABzAHYAZwAyAHQAdABmACAAZgByAG8AbQAgAEYAbwBuAHQAZQBsAGwAbwAgAHAAcgBvAGoAZQBjAHQALgBoAHQAdABwADoALwAvAGYAbwBuAHQAZQBsAGwAbwAuAGMAbwBtAAAAAAIAAAAAAAAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAQMBBAEFAQYFaXRlbTAEc3RhcgpzdGFyLWVtcHR5CXN0YXItaGFsZg1zdGFyLWhhbGYtYWx0AAAAAQAB//8ADwAAAAAAAAAAAAAAAAAAAAAAMgAyA0H/yQNB/8mwACywIGBmLbABLCBkILDAULAEJlqwBEVbWCEjIRuKWCCwUFBYIbBAWRsgsDhQWCGwOFlZILAKRWFksChQWCGwCkUgsDBQWCGwMFkbILDAUFggZiCKimEgsApQWGAbILAgUFghsApgGyCwNlBYIbA2YBtgWVlZG7AAK1lZI7AAUFhlWVktsAIsIEUgsAQlYWQgsAVDUFiwBSNCsAYjQhshIVmwAWAtsAMsIyEjISBksQViQiCwBiNCsgoAAiohILAGQyCKIIqwACuxMAUlilFYYFAbYVJZWCNZISCwQFNYsAArGyGwQFkjsABQWGVZLbAELLAHQyuyAAIAQ2BCLbAFLLAHI0IjILAAI0JhsIBisAFgsAQqLbAGLCAgRSCwAkVjsAFFYmBEsAFgLbAHLCAgRSCwACsjsQIEJWAgRYojYSBkILAgUFghsAAbsDBQWLAgG7BAWVkjsABQWGVZsAMlI2FERLABYC2wCCyxBQVFsAFhRC2wCSywAWAgILAJQ0qwAFBYILAJI0JZsApDSrAAUlggsAojQlktsAosILgEAGIguAQAY4ojYbALQ2AgimAgsAsjQiMtsAssS1RYsQcBRFkksA1lI3gtsAwsS1FYS1NYsQcBRFkbIVkksBNlI3gtsA0ssQAMQ1VYsQwMQ7ABYUKwCitZsABDsAIlQrEJAiVCsQoCJUKwARYjILADJVBYsQEAQ2CwBCVCioogiiNhsAkqISOwAWEgiiNhsAkqIRuxAQBDYLACJUKwAiVhsAkqIVmwCUNHsApDR2CwgGIgsAJFY7ABRWJgsQAAEyNEsAFDsAA+sgEBAUNgQi2wDiyxAAVFVFgAsAwjQiBgsAFhtQ0NAQALAEJCimCxDQUrsG0rGyJZLbAPLLEADistsBAssQEOKy2wESyxAg4rLbASLLEDDistsBMssQQOKy2wFCyxBQ4rLbAVLLEGDistsBYssQcOKy2wFyyxCA4rLbAYLLEJDistsBkssAgrsQAFRVRYALAMI0IgYLABYbUNDQEACwBCQopgsQ0FK7BtKxsiWS2wGiyxABkrLbAbLLEBGSstsBwssQIZKy2wHSyxAxkrLbAeLLEEGSstsB8ssQUZKy2wICyxBhkrLbAhLLEHGSstsCIssQgZKy2wIyyxCRkrLbAkLCA8sAFgLbAlLCBgsA1gIEMjsAFgQ7ACJWGwAWCwJCohLbAmLLAlK7AlKi2wJywgIEcgILACRWOwAUViYCNhOCMgilVYIEcgILACRWOwAUViYCNhOBshWS2wKCyxAAVFVFgAsAEWsCcqsAEVMBsiWS2wKSywCCuxAAVFVFgAsAEWsCcqsAEVMBsiWS2wKiwgNbABYC2wKywAsANFY7ABRWKwACuwAkVjsAFFYrAAK7AAFrQAAAAAAEQ+IzixKgEVKi2wLCwgPCBHILACRWOwAUViYLAAQ2E4LbAtLC4XPC2wLiwgPCBHILACRWOwAUViYLAAQ2GwAUNjOC2wLyyxAgAWJSAuIEewACNCsAIlSYqKRyNHI2EgWGIbIVmwASNCsi4BARUUKi2wMCywABawBCWwBCVHI0cjYbAGRStlii4jICA8ijgtsDEssAAWsAQlsAQlIC5HI0cjYSCwBCNCsAZFKyCwYFBYILBAUVizAiADIBuzAiYDGllCQiMgsAhDIIojRyNHI2EjRmCwBEOwgGJgILAAKyCKimEgsAJDYGQjsANDYWRQWLACQ2EbsANDYFmwAyWwgGJhIyAgsAQmI0ZhOBsjsAhDRrACJbAIQ0cjRyNhYCCwBEOwgGJgIyCwACsjsARDYLAAK7AFJWGwBSWwgGKwBCZhILAEJWBkI7ADJWBkUFghGyMhWSMgILAEJiNGYThZLbAyLLAAFiAgILAFJiAuRyNHI2EjPDgtsDMssAAWILAII0IgICBGI0ewACsjYTgtsDQssAAWsAMlsAIlRyNHI2GwAFRYLiA8IyEbsAIlsAIlRyNHI2EgsAUlsAQlRyNHI2GwBiWwBSVJsAIlYbABRWMjIFhiGyFZY7ABRWJgIy4jICA8ijgjIVktsDUssAAWILAIQyAuRyNHI2EgYLAgYGawgGIjICA8ijgtsDYsIyAuRrACJUZSWCA8WS6xJgEUKy2wNywjIC5GsAIlRlBYIDxZLrEmARQrLbA4LCMgLkawAiVGUlggPFkjIC5GsAIlRlBYIDxZLrEmARQrLbA5LLAwKyMgLkawAiVGUlggPFkusSYBFCstsDossDEriiAgPLAEI0KKOCMgLkawAiVGUlggPFkusSYBFCuwBEMusCYrLbA7LLAAFrAEJbAEJiAuRyNHI2GwBkUrIyA8IC4jOLEmARQrLbA8LLEIBCVCsAAWsAQlsAQlIC5HI0cjYSCwBCNCsAZFKyCwYFBYILBAUVizAiADIBuzAiYDGllCQiMgR7AEQ7CAYmAgsAArIIqKYSCwAkNgZCOwA0NhZFBYsAJDYRuwA0NgWbADJbCAYmGwAiVGYTgjIDwjOBshICBGI0ewACsjYTghWbEmARQrLbA9LLAwKy6xJgEUKy2wPiywMSshIyAgPLAEI0IjOLEmARQrsARDLrAmKy2wPyywABUgR7AAI0KyAAEBFRQTLrAsKi2wQCywABUgR7AAI0KyAAEBFRQTLrAsKi2wQSyxAAEUE7AtKi2wQiywLyotsEMssAAWRSMgLiBGiiNhOLEmARQrLbBELLAII0KwQystsEUssgAAPCstsEYssgABPCstsEcssgEAPCstsEgssgEBPCstsEkssgAAPSstsEossgABPSstsEsssgEAPSstsEwssgEBPSstsE0ssgAAOSstsE4ssgABOSstsE8ssgEAOSstsFAssgEBOSstsFEssgAAOystsFIssgABOystsFMssgEAOystsFQssgEBOystsFUssgAAPistsFYssgABPistsFcssgEAPistsFgssgEBPistsFkssgAAOistsFossgABOistsFsssgEAOistsFwssgEBOistsF0ssDIrLrEmARQrLbBeLLAyK7A2Ky2wXyywMiuwNystsGAssAAWsDIrsDgrLbBhLLAzKy6xJgEUKy2wYiywMyuwNistsGMssDMrsDcrLbBkLLAzK7A4Ky2wZSywNCsusSYBFCstsGYssDQrsDYrLbBnLLA0K7A3Ky2waCywNCuwOCstsGkssDUrLrEmARQrLbBqLLA1K7A2Ky2wayywNSuwNystsGwssDUrsDgrLbBtLCuwCGWwAyRQeLABFTAtAAAAS7gAyFJYsQEBjlm5CAAIAGMgsAEjRLADI3CyBCgJRVJEsgoCByqxBgFEsSQBiFFYsECIWLEGA0SxJgGIUVi4BACIWLEGAURZWVlZuAH/hbAEjbEFAEQAAA==") format("truetype")}[class^="spr-icon-"]:before,[class*=" spr-icon-"]:before{font-family:"font-awesome-stars";font-style:normal;font-weight:normal;speak:none;display:inline-block;text-decoration:inherit;width:1em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;font-size:120%}.spr-icon-star:before{content:'\e800'}.spr-icon-star-hover:before{content:'\e800'}.spr-icon-star-empty:before{content:'\e801'}.spr-icon-star-empty.spr-icon-star-hover:before{content:'\e800'}.spr-icon-star-half:before{content:'\e802'}.spr-icon-star-half-alt:before{content:'\e803'}#shopify-product-reviews{*zoom:1;display:block;clear:both;overflow:hidden;margin:1em 0}#shopify-product-reviews:before,#shopify-product-reviews:after{content:" ";display:table}#shopify-product-reviews:after{clear:both}.spr-loading{*zoom:1;display:block;border:1px solid rgba(0,0,0,0.1);padding:24px;text-align:center}.spr-loading:before,.spr-loading:after{content:" ";display:table}.spr-loading:after{clear:both}.spr-container{*zoom:1;border:1px solid #DFDFDF;border:1px solid rgba(0,0,0,0.1);padding:2em}.spr-container:before,.spr-container:after{content:" ";display:table}.spr-container:after{clear:both}.spr-header{*zoom:1}.spr-header:before,.spr-header:after{content:" ";display:table}.spr-header:after{clear:both}.spr-header-title{*zoom:1;font-size:24px;margin:0 0 12px 0}.spr-header-title:before,.spr-header-title:after{content:" ";display:table}.spr-header-title:after{clear:both}.spr-starratings{font-size:13px;margin:0 0 8px 0}.spr-icon{font-size:120%;position:relative;top:1px;width:1.3em;height:1.3em}.spr-icon.spr-icon-star-empty{opacity:0.6}.spr-badge{*zoom:1;min-height:auto;min-width:auto;display:block}.spr-badge:before,.spr-badge:after{content:" ";display:table}.spr-badge:after{clear:both}.spr-badge-starrating{margin:0 3px 0 0}.spr-badge-starrating .spr-icon{font-size:100%}.spr-summary{*zoom:1}.spr-summary:before,.spr-summary:after{content:" ";display:table}.spr-summary:after{clear:both}.spr-summary-actions-newreview{float:right}.spr-summary-starrating{margin:0 6px 0 0}.spr-form{margin:24px 0 0 0;padding:24px 0 0 0;border-top:1px solid #DFDFDF;border-top:1px solid rgba(0,0,0,0.1)}.spr-form>form{margin:0}.spr-form-title{font-size:16px;line-height:24px;margin-top:0}.spr-form-contact-name,.spr-form-contact-email,.spr-form-contact-location,.spr-form-review-rating,.spr-form-review-title,.spr-form-review-body{*zoom:1;margin:0 0 15px 0}.spr-form-contact-name:before,.spr-form-contact-name:after,.spr-form-contact-email:before,.spr-form-contact-email:after,.spr-form-contact-location:before,.spr-form-contact-location:after,.spr-form-review-rating:before,.spr-form-review-rating:after,.spr-form-review-title:before,.spr-form-review-title:after,.spr-form-review-body:before,.spr-form-review-body:after{content:" ";display:table}.spr-form-contact-name:after,.spr-form-contact-email:after,.spr-form-contact-location:after,.spr-form-review-rating:after,.spr-form-review-title:after,.spr-form-review-body:after{clear:both}.visuallyhidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.spr-form-contact,.spr-form-review,.spr-form-actions{*zoom:1;padding:0;border:0;margin:0}.spr-form-contact:before,.spr-form-contact:after,.spr-form-review:before,.spr-form-review:after,.spr-form-actions:before,.spr-form-actions:after{content:" ";display:table}.spr-form-contact:after,.spr-form-review:after,.spr-form-actions:after{clear:both}.spr-form-review-rating{clear:both;overflow:hidden}.spr-form-review-rating a,.spr-form-review-rating a:hover{text-decoration:none;display:inline-block;float:left}.spr-form-label{font-size:13px;line-height:20px}.spr-form-input{margin:0}.spr-form-label+.spr-form-input{margin:0}.spr-form-input-text,.spr-form-input-email,.spr-form-input-textarea{-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;max-width:100%;margin:0}.spr-form-input-textarea{resize:vertical}.spr-form-input-error,input[type="text"].spr-form-input-error,input[type="email"].spr-form-input-error{border-color:#C0363A}.spr-starrating.spr-form-input-error a{color:#C0363A}.spr-form-message{padding:0.8em 1em;margin:0 0 1em 0}.spr-form-message-error{background:#C0363A;color:#FFF}.spr-form-message-success{padding:0;margin:0}.spr-button,.spr-button-primary{width:auto;margin:0;min-height:1em}.spr-button-primary{float:right}.spr-reviews{margin:24px 0 0 0}.spr-review{padding:24px 0;border-top:1px solid #DFDFDF;border-top:1px solid rgba(0,0,0,0.1)}.spr-review:first-child{margin-top:24px}.spr-review:last-child{padding-bottom:0}.spr-review-header-byline{font-style:italic;font-size:13px;opacity:0.5;display:inline-block;margin:0 0 1em 0}.spr-review-header-starratings{margin:0 0 0.5em 0;display:inline-block}.spr-review-header-title{font-size:16px;line-height:24px;margin:0;padding:0;border:none}.spr-review-content{*zoom:1;margin:0 0 24px 0}.spr-review-content:before,.spr-review-content:after{content:" ";display:table}.spr-review-content:after{clear:both}.spr-review-content-body{font-size:13px;line-height:20px;margin:0;padding:0}.spr-review-reply{*zoom:1;background:#ECECEC;background:rgba(0,0,0,0.06);margin:0 0 24px 0;padding:24px}.spr-review-reply:before,.spr-review-reply:after{content:" ";display:table}.spr-review-reply:after{clear:both}.spr-review-reply-body,.spr-review-reply-shop{font-size:13px;line-height:20px}.spr-review-reply-body{margin:0 0 12px 0}.spr-review-reply-shop{display:block;float:right;font-style:italic}.spr-review-footer{*zoom:1}.spr-review-footer:before,.spr-review-footer:after{content:" ";display:table}.spr-review-footer:after{clear:both}.spr-review-reportreview{float:right;font-size:11px;line-height:16px}.spr-pagination{text-align:center;padding:12px 0 0 0;position:relative;border-top:1px solid #DFDFDF;border-top:1px solid rgba(0,0,0,0.1)}.spr-pagination-page,.spr-pagination-deco,.spr-pagination-next,.spr-pagination-prev{display:inline-block}.spr-pagination-page.is-active{font-weight:bold}.spr-pagination-prev{position:absolute;left:0}.spr-pagination-next{position:absolute;right:0}@media only screen and (max-width: 480px){.spr-header-title{text-align:center}.spr-summary{text-align:center}.spr-summary-actions-newreview{float:none;*zoom:1}.spr-summary-actions-newreview:before,.spr-summary-actions-newreview:after{content:" ";display:table}.spr-summary-actions-newreview:after{clear:both}}

.owl-stage {
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;

  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
}

.owl-item{
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  height: auto !important;
}

.owl-nav button {
  position: absolute;
  top: 50%;
  font-size: 51px !important;
  transform: translate(0,-50%);
  width: 50px;
  text-align: center;
  height: 50px;
  line-height: 50px !important;
  background: white !important;
  border-radius: 50%;
  box-shadow: 0px 0px 3px black;
  outline: none !important;

  &.owl-prev{
    left: 0 !important;

    span {
      right: 2px;
    }
  }

  &.owl-next{
    right: 0 !important;

    span {
      left: 2px;
    }
  }

  span{
    position: relative;
    top: -4px;
  }

  &.disabled{
    opacity: .5;
  }
}

.productitem--image{
  padding-bottom: 20px;
}

.collection--description{
  overflow: hidden;
  transition: all .5s;
}

.description-read-more-button{
  font-weight: bold;
  text-transform: uppercase;
  padding-top: 10px;
}

.site-navigation .navmenu-depth-1>li>a{
  font-size: 12px;
}

.filter-icon--checkbox{
  position: relative;
}

.filter-item .filter-icon--checkbox svg{
  display: none !important;
}

.filter-icon--checkbox:before {
  content: "";
  background: #f2f2f2;
  width: 13px;
  height: 13px;
  display: block;
}

.filter-item--active .filter-icon--checkbox:after {
  content: "";
  display: block;
  width: 7px;
  height: 7px;
  background: black;
  border-radius: 50%;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

@media screen and (min-width: $bp-medium) {
  .collection--description{
    max-height: initial !important;
  }

  .description-read-more-button{
    display: none !important;
  }
}